(function(g){var c={fullName:"$baseName.UI.InlayPreview",version:"1.0.1",register:function(){this.U=g.using("$baseName.Utility",window)},initialize:function(i){this.stUrlKey="bd_cpro_prev";this.oldTemplateTypes=["text_pages_","text_newest_","text_roll_","text_noframe_"];this.newTemplateType="text_default_";this.asynGloNames=["template","height","width","at"];this.gloNames=["template","h","w","ads_c","at"];this.asynGloValues=["text_default_125_125","125","125","text_image_video_flash"];this.gloValues=["text_default_125_125","125","125",{},"text_image_video_flash"];this.sizeOk=false;this.templateOk=true;this.prevValue=i.prevValue;this.prevData=i.prevData;this.typeNum=i.typeNum;this.item=i.item;this.ads=i.ads;this.U.proxy(this.createAds,this)()},createAds:function(){if(this.ads==="sync"){var j=this.gloNames.length;while(j--){window["cpro_"+this.gloNames[j]]=window["cpro_"+this.gloNames[j]]||this.gloValues[j]}if(this.prevValue!==null&&this.prevValue!==""&&this.checkType(this.typeNum,window.cpro_at.toLowerCase())){this.sizeOk=this.checkSize(this.typeNum,window.cpro_w,window.cpro_h,this.prevData)}window.cpro_template=this.redirectTemplate(window.cpro_template,this.oldTemplateTypes,this.newTemplateType);window.cpro_template.indexOf("text_default_")===-1&&(this.templateOk=false);this.url=this.templateOk?this.makeUrl(this.prevValue,this.typeNum,this.sizeOk,window.cpro_template,this.stUrlKey):"about:blank";document.write('<div style=display:none>-</div><iframe align="center,center" marginwidth=0 marginheight=0 scrolling=no frameborder=0 width='+window.cpro_w+" height="+window.cpro_h+' allowtransparency src="'+this.url+'"></iframe>')}else{var j=this.asynGloNames.length;while(j--){this.item[this.asynGloNames[j]]=this.item[this.asynGloNames[j]]||this.asynGloValues[j]}if(this.item.domId&&(this.dom=document.getElementById(this.item.domId))){if(this.prevValue!==null&&this.prevValue!==""&&this.checkType(this.typeNum,this.item.at)){this.sizeOk=this.checkSize(this.typeNum,this.item.width,this.item.height,this.prevData)}this.item.template=this.redirectTemplate(this.item.template,this.oldTemplateTypes,this.newTemplateType);this.item.template.indexOf("text_default_")===-1&&(this.templateOk=false);this.url=this.templateOk?this.makeUrl(this.prevValue,this.typeNum,this.sizeOk,this.item.template,this.stUrlKey):"about:blank";this.dom.innerHTML='<div style=display:none>-</div><iframe align="center,center" marginwidth=0 marginheight=0 scrolling=no frameborder=0 width='+this.item.width+" height="+this.item.height+' allowtransparency src="'+this.url+'"></iframe>';this.dom=null}}},checkSize:function(l,k,i,j){if(l!==1){if(j.imgWidth===k&&j.imgHeight===i){return true}else{return false}}else{return true}},checkType:function(j,i){switch(j){case 1:return((i.indexOf("text")!==-1)||(i.indexOf("tuwen")!==-1)||(i.indexOf("all")!==-1))?1:0;case 2:case 4:return((i.indexOf("flash")!==-1)||(i.indexOf("image")!==-1)||(i.indexOf("all")!==-1))?1:0}return 0},redirectTemplate:function(l,j,k){var i=j.length;while(i--){if(l.indexOf(j[i])!==-1){return l.replace(j[i],k)}}return l},makeUrl:function(n,l,m,k,i){var j;if(m===false){j="http://cpro.baidu.com/cpro/ui/blank_tips.html"}else{if(l===1){j=k+".html"}else{if(l===2){j="http://cpro.baidu.com/cpro/ui/image.html"}else{if(l===4){j="http://cpro.baidu.com/cpro/ui/flash.html"}}}}return"http://cpro.baidu.com/cpro/ui/preview/templates/"+j+"?"+(i+"=#"+n+"&ut="+(+new Date().getTime())).replace(/\.(?!swf)/g,"%252e")}};var e=g.using("$baseName.Utility"),b="bd_cpro_prev",h;if(e.isInCrossDomainIframe(window)){h=e.getUrlQueryValue(document.referrer,b)}else{if(e.isInIframe(window)){h=e.getUrlQueryValue(window.top.location.href,b)}else{h=e.getUrlQueryValue(window.location.href,b)}}if(!h){return}var d=e.jsonToObj(decodeURIComponent(h).replace(/\\x1e/g,"&").replace(/\\x1d/g,"=").replace(/\\x1c/,"?").replace(/\\x5c/,"\\")),f=d.type;g.registerClass(c);if(window.cpro_isSyncPreview){window.cpro_isSyncPreview=undefined;g.create(g.UI.InlayPreview,{ads:"sync",prevValue:h,prevData:d,typeNum:f,item:{}})}else{var a=window.cproPreviewArray instanceof Array?window.cproPreviewArray.length:0;while(a--){g.create(g.UI.InlayPreview,{ads:"async",prevValue:h,prevData:d,typeNum:f,item:cproPreviewArray[a]})}window.cproPreviewArray=null}})(window[___baseNamespaceName]);