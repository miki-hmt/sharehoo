<!DOCTYPE html>
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, minimumscale=1.0, maximum-scale=1.0" />
<meta name="language" content="zh-cn" />
<meta name="renderer" content="webkit" />
<title>jQuery.getScript()</title>
<link rel="stylesheet" type="text/css" href="../style/prettify.css" />
<link rel="stylesheet" type="text/css" href="../style/bootstrap.min.css" />
<link rel="stylesheet" type="text/css" href="../style/love.css" />
<script type="text/javascript" src="../style/jquery.min.js"></script>
<script type="text/javascript" src="../style/bootstrap.min.js"></script>
<script type="text/javascript" src="../style/prettify.js"></script>
</head>
<body>
<div id="post-content" class="m-bg">
	<h1 class="text-center">jQuery.getScript()</h1>
	<hr>
		<h3>
	<blockquote>
		概述&nbsp;&nbsp;&nbsp;&nbsp;jQuery.getScript( url [, success(script, textStatus, jqXHR) ] )
	</blockquote>
</h3>
<div class="desc">
	<p>
		返回值：<a href="http://www.shouce.ren/api/view/a/13081#articleHeader39" target="_blank">XMLHttpRequest</a> 
	</p>
	<p>
	</p>
	<p class="desc">
		<strong>描述：</strong> 使用一个HTTP GET请求从服务器加载并执行一个 JavaScript 文件
	</p>
	<ul class="signatures">
		<li class="signature" id="jQuery-getScript-url-successscript--textStatus--jqXHR">
			<h4 class="name">
				<span class="version-details">V : 1.0</span>jQuery.getScript( url [, success(script, textStatus, jqXHR) ] )
			</h4>
			<ul>
				<li>
					<div>
						<strong>url</strong> 
					</div>
					<div>
						类型: String
					</div>
					<div>
						一个包含发送请求的URL字符串。
					</div>
				</li>
				<li>
					<div>
						<strong>success(script, textStatus, jqXHR)</strong> 
					</div>
					<div>
						类型: <a href="http://www.shouce.ren/api/view/a/13081#articleHeader28" target="_blank">Function</a>()
					</div>
					<div>
						当请求成功后执行的回调函数。
					</div>
				</li>
			</ul>
		</li>
	</ul>
	<div class="longdesc" id="entry-longdesc">
		<p>
			这是一个Ajax函数的缩写，这相当于:
		</p>
		<div class="syntaxhighlighter javascript nogutter">
<pre class="prettyprint lang-js">$.ajax({
  url: url,
  dataType: "script",
  success: success
});</pre>
		</div>
		<p>
			这个脚本在全局环境中执行，所以指向其他变量和运行jQuery函数。被加载的脚本同样作用于当前页面：
		</p>
		<h4 id="success-callback">
			Success Callback（成功回调）
		</h4>
		<p>
			一旦脚本已经被加载，将触发回调
&nbsp;但不一定执行。
		</p>
		<div class="syntaxhighlighter javascript nogutter">
<pre class="prettyprint lang-js">$(".result").html("&lt;p&gt;Lorem ipsum dolor sit amet.&lt;/p&gt;");</pre>
		</div>
		<p>
			通过引用这个文件名，脚本被包含进来并执行：
		</p>
		<div class="syntaxhighlighter javascript nogutter">
<pre class="prettyprint lang-js">$.getScript("ajax/test.js", function(data, textStatus, jqxhr) {
   console.log(data); //data returned
   console.log(textStatus); //success
   console.log(jqxhr.status); //200
   console.log('Load was performed.');
});</pre>
		</div>
		<h4 id="handling-errors">
			Handling Errors（错误处理）
		</h4>
		<p>
			从jQuery 1.5开始，你可以用<a href="http://www.shouce.ren/api/view/a/13049" class="book-a"><code>.fail()</code></a>来处理错误:
		</p>
		<div class="syntaxhighlighter javascript nogutter">
<pre class="prettyprint lang-js">$.getScript("ajax/test.js")
.done(function(script, textStatus) {
  console.log( textStatus );
})
.fail(function(jqxhr, settings, exception) {
  $( "div.log" ).text( "Triggered ajaxError handler." );
});</pre>
		</div>
		<p>
			jQuery1.5之前，不得不使用全局的<code>.ajaxError()</code>回调事件来处理<code>$.getScript()</code>错误：
		</p>
		<div class="syntaxhighlighter javascript nogutter">
<pre class="prettyprint lang-js">$( "div.log" ).ajaxError(function(e, jqxhr, settings, exception) {
  if (settings.dataType=='script') {
    $(this).text( "Triggered ajaxError handler." );
  }
});</pre>
		</div>
		<h4 id="caching-requests">
			Caching Responses（缓存响应）
		</h4>
		<p>
			默认情况下，<code>$.getScript()</code> cache选项被设置为 <code>false</code>。这将在请求的URL的查询字符串中追加一个时间戳参数，以确保每次浏览器下载的脚本被重新请求。您可以全局的使用 <a href="http://www.shouce.ren/api/view/a/12874" class="book-a"><code>$.ajaxSetup()</code></a>设置cache(缓存)属性覆盖该功能：
		</p>
		<div class="syntaxhighlighter javascript nogutter">
<pre class="prettyprint lang-js">$.ajaxSetup({
  cache: true
});</pre>
		</div>
		<p>
			另外，
&nbsp;你可以使用更灵活的 <code>$.ajax()</code> 方法定义一个新的方法
		</p>
	</div>
</div>
<div class="example">
	<h3>
		<blockquote>
			示例
		</blockquote>
	</h3>
<span id="f_ad2"></span> 
	<h4>
		实例
	</h4>
	<p>
		载入<code>&lt;a title="http://jquery.com/plugins/project/color" class="external text" href="http://jquery.com/plugins/project/color"&gt;</code>jQuery 
官方颜色动画插件&lt;/a&gt; 成功后绑定颜色变化动画。
	</p>
	<p>
	</p>
	<h5>
		HTML 代码:
	</h5>
<pre><code>&lt;button id="go"&gt;» Run&lt;/button&gt;
&lt;div class="block"&gt;&lt;/div&gt;</code></pre>
	<h5>
		jQuery 代码:
	</h5>
<pre><code>jQuery.getScript("http://dev.jquery.com/view/trunk/plugins/color/jquery.color.js", function(){
  $("#go").click(function(){
    $(".block").animate( { backgroundColor: 'pink' }, 1000)
      .animate( { backgroundColor: 'blue' }, 1000);
  });
});</code></pre>
	<h4>
		实例
	</h4>
	<p>
		加载并执行 test.js。
	</p>
	<h5>
		jQuery 代码:
	</h5>
<pre><code>$.getScript("test.js");</code></pre>
	<h4>
		实例
	</h4>
	<p>
		加载并执行 test.js ，成功后显示信息。
	</p>
	<h5>
		jQuery 代码:
	</h5>
<pre><code>$.getScript("test.js", function(){
  alert("Script loaded and executed.");
});</code></pre>
</div>
<p>
</p>
<div class="entry-example" id="example-0">
	<h4>
		实例
	</h4>
	<p>
		<span class="desc">定义了一个$.cachedScript（）方法可以获取缓存的脚本</span> 
	</p>
	<div class="syntaxhighlighter javascript ">
<pre class="prettyprint lang-js">jQuery.cachedScript = function(url, options) {
 
  // allow user to set any option except for dataType, cache, and url
  options = $.extend(options || {}, {
    dataType: "script",
    cache: true,
    url: url
  });
 
  // Use $.ajax() since it is more flexible than $.getScript
  // Return the jqXHR object so we can chain callbacks
  return jQuery.ajax(options);
};
 
// Usage
$.cachedScript("ajax/test.js").done(function(script, textStatus) {
  console.log( textStatus );
});</pre>
	</div>
</div>
<h4>
	实例<span class="desc"></span> 
</h4>
<p>
	<span class="desc">我们动态加载新的<a href="http://github.com/jquery/jquery-color">官方jQuery 颜色动画插件</a>，一旦该插件加载完成就会触发一些颜色动画。</span> 
</p>
<div class="syntaxhighlighter xml ">
<pre class="prettyprint lang-js">&lt;!doctype html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
  &lt;meta charset="utf-8"&gt;
  &lt;title&gt;jQuery.getScript demo&lt;/title&gt;
  &lt;style&gt;
  .block {
     background-color: blue;
     width: 150px;
     height: 70px;
     margin: 10px;
  }
  &lt;/style&gt;
  &lt;script src="//code.jquery.com/jquery-1.10.2.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
 
&lt;button id="go"&gt;&amp;raquo; Run&lt;/button&gt;
&lt;div class="block"&gt;&lt;/div&gt;
 
&lt;script&gt;
var url = "//code.jquery.com/color/jquery.color-git.js";
$.getScript( url, function() {
  $( "#go" ).click(function() {
    $( ".block" )
      .animate({
        backgroundColor: "rgb(255, 180, 180)"
      }, 1000 )
      .delay( 500 )
      .animate({
        backgroundColor: "olive"
      }, 1000 )
      .delay( 500 )
      .animate({
        backgroundColor: "#00f"
      }, 1000 );
  });
});
&lt;/script&gt;
 
&lt;/body&gt;
&lt;/html&gt;</pre>
<a href="http://www.shouce.ren/study/api/s/8027" target="_blank" class="btn btn-sm btn-success">运行一下</a>
</div>
<p>
</p></div>
<div class="m-bg text-center margin_t_1">
	<a class="btn btn-sm btn-default" href="http://www.shouce.ren"><strong>手册网</strong></a>
</div>
<script type="text/javascript">
$(function(){
	$("pre").addClass("prettyprint linenums");
	//代码高亮
	prettyPrint();
	$("table").attr('class','table table-striped table-bordered table-condensed');
});
</script>
</body>
</html>
