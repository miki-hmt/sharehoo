<!DOCTYPE html>
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, minimumscale=1.0, maximum-scale=1.0" />
<meta name="language" content="zh-cn" />
<meta name="renderer" content="webkit" />
<title>closest()</title>
<link rel="stylesheet" type="text/css" href="../style/prettify.css" />
<link rel="stylesheet" type="text/css" href="../style/bootstrap.min.css" />
<link rel="stylesheet" type="text/css" href="../style/love.css" />
<script type="text/javascript" src="../style/jquery.min.js"></script>
<script type="text/javascript" src="../style/bootstrap.min.js"></script>
<script type="text/javascript" src="../style/prettify.js"></script>
</head>
<body>
<div id="post-content" class="m-bg">
	<h1 class="text-center">closest()<span class="g-bg-red margin-l-5">1.7*</span></h1>
	<hr>
		<h3>
	<blockquote>
		概述&nbsp;&nbsp;&nbsp;&nbsp;.closest( selector )
	</blockquote>
</h3>
<div class="desc">
	<p>
		返回值：<code><a href="http://www.shouce.ren/api/view/a/13081#articleHeader38" target="_blank">jQuery</a></code> 
	</p>
</div>
<p>
</p>
<p class="desc">
	<strong>描述：</strong>从元素本身开始，在DOM 树上逐级向上级元素匹配，并返回最先匹配的祖先元素。
</p>
<ul class="signatures">
	<li class="signature" id="closest-selector">
		<h4 class="name">
			<span class="version-details">V : 1.3</span>.closest(
                          selector )
		</h4>
		<ul>
			<li>
				<div>
					<strong>selector</strong> 
				</div>
				<div>
					类型: Selector
				</div>
				<div>
					一个用于匹配元素的选择器字符串。
				</div>
			</li>
		</ul>
	</li>
	<li class="signature" id="closest-selector-context">
		<h4 class="name">
			<span class="version-details">V : 1.4</span>.closest(
                          selector [, context ] )
		</h4>
		<ul>
			<li>
				<div>
					<strong>selector</strong> 
				</div>
				<div>
					类型: Selector
				</div>
				<div>
					一个用于匹配元素的选择器字符串。
				</div>
			</li>
			<li>
				<div>
					<strong>context</strong> 
				</div>
				<div>
					类型: Element
				</div>
				<div>
					匹配元素可能在这个 DOM 元素内查找到。（手册网注：如果提供这个参数，那么在这个DOM元素内查找匹配的元素，可以使用这个参数减小查找范围，如果在这个在这个DOM元素内没有查找到匹配的元素，那么返回空的jQuery对象。可选参数）
				</div>
			</li>
		</ul>
	</li>
	<li class="signature" id="closest-jQuery-object">
		<h4 class="name">
			<span class="version-details">V : 1.6</span>.closest(
                          jQuery object )
		</h4>
		<ul>
			<li>
				<div>
					<strong>jQuery object</strong> 
				</div>
				<div>
					类型: jQuery
				</div>
				<div>
					一个用于匹配元素的jQuery对象。
				</div>
			</li>
		</ul>
	</li>
	<li class="signature" id="closest-element">
		<h4 class="name">
			<span class="version-details">V : 1.6</span>.closest(
                          element )
		</h4>
		<ul>
			<li>
				<div>
					<strong>element</strong> 
				</div>
				<div>
					类型: Element
				</div>
				<div>
					一个用于匹配元素的DOM元素。
				</div>
			</li>
		</ul>
	</li>
</ul>
<div class="longdesc" id="entry-longdesc">
	<p>
		鉴于一个jQuery对象，表示一个DOM元素的集合，<code>.closest()</code>方法允许我们在DOM树上查找这些匹配的元素和他们的祖先元素，并且构造一个新的jQuery对象。<code>.parents()</code>和<code>.closest()</code>方法类似，它们都在DOM树遍历了。两者之间的差异，尽管细微，是重要的：
	</p>
	<table>
		<thead>
			<tr>
				<th>
					<code>.closest()</code> 
				</th>
				<th>
					<code>.parents()</code> 
				</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<td>
					开始于当前元素
				</td>
				<td>
					开始于父元素
				</td>
			</tr>
			<tr>
				<td>
					在 DOM 树中向上遍历，直到找到与提供的选择器相匹配的元素
				</td>
				<td>
					向上遍历DOM树到文档的根元素，每个祖先元素加入到临时集合，如果提供一个选择器，则会使用该选择器在集合中进行过滤
				</td>
			</tr>
			<tr>
				<td>
					返回包含零个或一个元素的jQuery对象
				</td>
				<td>
					返回包含零个，一个或多个元素的jQuery对象
				</td>
			</tr>
		</tbody>
	</table>
	<div class="syntaxhighlighter xml nogutter">
<pre class="prettyprint lang-js">&lt;ul id="one" class="level-1"&gt;
  &lt;li class="item-i"&gt;I&lt;/li&gt;
  &lt;li id="ii" class="item-ii"&gt;II
  &lt;ul class="level-2"&gt;
    &lt;li class="item-a"&gt;A&lt;/li&gt;
    &lt;li class="item-b"&gt;B
      &lt;ul class="level-3"&gt;
        &lt;li class="item-1"&gt;1&lt;/li&gt;
        &lt;li class="item-2"&gt;2&lt;/li&gt;
        &lt;li class="item-3"&gt;3&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
    &lt;li class="item-c"&gt;C&lt;/li&gt;
  &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li class="item-iii"&gt;III&lt;/li&gt;
&lt;/ul&gt;</pre>
	</div>
	<p>
		假设我们从列表项 A 开始查找<code>&lt;ul&gt;</code>：
	</p>
	<div class="syntaxhighlighter javascript nogutter">
<pre class="prettyprint lang-js">$('li.item-a').closest('ul').css('background-color', 'red');</pre>
	</div>
	<p>
		这将改变level-2 <code>&lt;ul&gt;</code>的颜色，因为当向上遍历DOM树时，这是第一个遇到的匹配元素。
	</p>
	<p>
		假设我们这次搜索<code>&lt;li&gt;</code>元素，那么：
	</p>
	<div class="syntaxhighlighter javascript nogutter">
<pre class="prettyprint lang-js">$('li.item-a').closest('li').css('background-color', 'red');</pre>
	</div>
	<p>
		其结果是改变了列表项 A 的元素。<code>.closest()</code>方法是<em>从自身元素</em>开始查找的，然后在 DOM 树中向上遍历，直到找到了所提供的表达式列表项 A。
	</p>
	<p>
		我们可以传递一个DOM元素作为上下文在其中搜索最近的元素的。
	</p>
	<div class="syntaxhighlighter javascript nogutter">
<pre class="prettyprint lang-js">var listItemII = document.getElementById('ii');
$('li.item-a').closest('ul', listItemII)
  .css('background-color', 'red');
$('li.item-a').closest('#one', listItemII)
  .css('background-color', 'green');</pre>
	</div>
	<p>
		这将改变level-2 <code>&lt;ul&gt;</code>的颜色,因为它既是项目A的第一个<code>&lt;ul&gt;</code>祖先又是项目II的一个后裔。它将不会改变level-1 <code>&lt;ul&gt;</code>的 颜色 ，因为它不是项目II的后代。
	</p>
</div>
<div class="jquery-api-top">
</div>
<header>
<h3 class="underline">
	<blockquote>
		示例
	</blockquote>
</h3>
</header>
<div class="entry-example" id="example-0">
	<h4>
		实例
	</h4>
	<p>
		<span class="desc">显示什么样的事件委托能用closest完成。closest 列表元素或者其后代被点击进行切换一个黄色的背景。</span> 
	</p>
	<div class="syntaxhighlighter xml ">
<pre class="prettyprint lang-js">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;style&gt;
  li { margin: 3px; padding: 3px; background: #EEEEEE; }
  li.hilight { background: yellow; }
  &lt;/style&gt;
  &lt;script src="http://code.jquery.com/jquery-latest.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;b&gt;Click me!&lt;/b&gt;&lt;/li&gt;
    &lt;li&gt;You can also &lt;b&gt;Click me!&lt;/b&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;script&gt;
  $( document ).bind("click", function( e ) {
    $( e.target ).closest("li").toggleClass("hilight");
  });
&lt;/script&gt;
 
&lt;/body&gt;
&lt;/html&gt;</pre>
	</div>
	<p>
		<a href="http://www.shouce.ren/study/api/s/8119" target="_blank" class="btn btn-sm btn-success">运行一下</a>
	</p>
</div>
<h4>
	实例
</h4>
<p>
	<span class="desc">传递一个jQuery对象给closest. closest 列表元素或者其后代被点击进行切换一个黄色的背景。</span> 
</p>
<div class="syntaxhighlighter xml ">
<pre class="prettyprint lang-js">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;style&gt;
  li { margin: 3px; padding: 3px; background: #EEEEEE; }
  li.hilight { background: yellow; }
  &lt;/style&gt;
  &lt;script src="http://code.jquery.com/jquery-latest.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;ul&gt;
    &lt;li&gt;&lt;b&gt;Click me!&lt;/b&gt;&lt;/li&gt;
    &lt;li&gt;You can also &lt;b&gt;Click me!&lt;/b&gt;&lt;/li&gt;
  &lt;/ul&gt;
&lt;script&gt;
  var $listElements = $("li").css("color", "blue");
  $( document ).bind("click", function( e ) {
    $( e.target ).closest( $listElements ).toggleClass("hilight");
  });
&lt;/script&gt;
 
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p>
	<a href="http://www.shouce.ren/study/api/s/8118" target="_blank" class="btn btn-sm btn-success">运行一下</a>
</p>
<p>
</p>
<p>
</p>
<h3>
	<blockquote>
		概述&nbsp;&nbsp;&nbsp;&nbsp;.closest( selectors [, context ] )<span class="version-details">过时: 1.7, 移除: 1.8</span> 
	</blockquote>
</h3>
<div class="desc">
	<p>
		返回值：<code>Array</code> 
	</p>
</div>
<p>
</p>
<div class="entry-wrapper">
	<p class="desc">
		<strong>描述：</strong>以数组的形式返回与选择器相匹配的所有元素，从当前元素开始，在 DOM 树中向上遍历。
	</p>
	<ul class="signatures">
		<li class="signature" id="closest-selectors-context">
			<h4 class="name">
				<span class="version-details">V : 1.4</span>.closest( selectors [, context ] )
			</h4>
			<ul>
				<li>
					<div>
						<strong>selectors</strong> 
					</div>
					<div>
						类型: Array
					</div>
					<div>
						数组或字符串，其中包含一个选择表达式匹配的元素对（也可以是一个jQuery对象）。
					</div>
				</li>
				<li>
					<div>
						<strong>context</strong> 
					</div>
					<div>
						类型: Element
					</div>
					<div>
						匹配元素可能在这个 DOM 元素内查找到。
					</div>
				</li>
			</ul>
		</li>
	</ul>
	<div class="longdesc" id="entry-longdesc-1">
		<div class="warning">
			<strong>下面这个方法 (only!) jQuery1.7中不赞成使用，在jQuery1.8中被<em>删除</em>。</strong>它主要是为了让插件作者在内部使用。
		</div>
	</div>
</div>
<p>
</p>
<p>
</p></div>
<div class="m-bg text-center margin_t_1">
	<a class="btn btn-sm btn-default" href="http://www.shouce.ren"><strong>手册网</strong></a>
</div>
<script type="text/javascript">
$(function(){
	$("pre").addClass("prettyprint linenums");
	//代码高亮
	prettyPrint();
	$("table").attr('class','table table-striped table-bordered table-condensed');
});
</script>
</body>
</html>
