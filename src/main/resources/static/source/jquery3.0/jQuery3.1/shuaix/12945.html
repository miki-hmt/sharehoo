<!DOCTYPE html>
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, minimumscale=1.0, maximum-scale=1.0" />
<meta name="language" content="zh-cn" />
<meta name="renderer" content="webkit" />
<title>end()</title>
<link rel="stylesheet" type="text/css" href="../style/prettify.css" />
<link rel="stylesheet" type="text/css" href="../style/bootstrap.min.css" />
<link rel="stylesheet" type="text/css" href="../style/love.css" />
<script type="text/javascript" src="../style/jquery.min.js"></script>
<script type="text/javascript" src="../style/bootstrap.min.js"></script>
<script type="text/javascript" src="../style/prettify.js"></script>
</head>
<body>
<div id="post-content" class="m-bg">
	<h1 class="text-center">end()</h1>
	<hr>
		<h3>
	<blockquote>
		概述&nbsp;&nbsp;&nbsp;&nbsp;.end()
	</blockquote>
</h3>
<div class="desc">
	<p>
		返回值：<code><a href="http://www.shouce.ren/api/view/a/13081#articleHeader38" target="_blank">jQuery</a></code> 
	</p>
</div>
<p>
</p>
<p class="desc">
	<strong>描述：</strong> 终止在当前链的最新过滤操作，并返回匹配的元素的以前状态。
</p>
<ul class="signatures">
	<li class="signature" id="end">
		<h4 class="name">
			<span class="version-details">V : 1.0</span>.end()
		</h4>
		<ul>
			<li>
				<div class="null-signature">
					这个方法不接受任何参数。
				</div>
			</li>
		</ul>
	</li>
</ul>
<div class="longdesc" id="entry-longdesc">
	<p>
		大多数 jQueryDOM遍历 方法来操作 jQuery 对象实例，并创建一个新的对象，匹配一个不同的 DOM 元素集合。当发生这种情况时，实际上是新的元素集合被压入到对象内部维护的栈中。每次过滤方法都会被压入栈中。当我们需要返回到前一个状态时，我们可以使用<code>end()</code> 进行出栈操作，来返回栈中的前一个状态。
	</p>
	<p>
		假设页面上有几个短的列表
	</p>
	<div class="syntaxhighlighter xml nogutter">
<pre class="prettyprint lang-js">&lt;ul class="first"&gt;
   &lt;li class="foo"&gt;list item 1&lt;/li&gt;
   &lt;li&gt;list item 2&lt;/li&gt;
   &lt;li class="bar"&gt;list item 3&lt;/li&gt;
&lt;/ul&gt;
&lt;ul class="second"&gt;
   &lt;li class="foo"&gt;list item 1&lt;/li&gt;
   &lt;li&gt;list item 2&lt;/li&gt;
   &lt;li class="bar"&gt;list item 3&lt;/li&gt;
&lt;/ul&gt;</pre>
	</div>
	<p>
		<code>end()</code> 方法主要用于 jQuery 的链式属性中。当没有使用链式用法时，我们通常只是调用变量名上的前一个对象，所以我们不需要操作栈。使用 <code>end()</code> 时，我们可以一次性调用所有需要的方法：
	</p>
	<div class="syntaxhighlighter javascript nogutter">
<pre class="prettyprint lang-js">$('ul.first').find('.foo').css('background-color', 'red')
  .end().find('.bar').css('background-color', 'green');</pre>
	</div>
	<p>
		在上面的代码中，首先在链式用法中只在第一个列表中查找样式为 <code>foo</code> 的项目，并将其背景色变成红色。然后 <code>end()</code> 返回调用 <code>find()</code> 之前的状态。因此，第二次 <code>find()</code> 将只会查找 <code>&lt;ul class="first"&gt;</code> 中的 '.bar'，而不是继续在 <code>&lt;li class="foo"&gt;</code> 中进行查找，结果是将匹配到的元素的背景色变成绿色。上述代码的最终结果是，第一个列表中的第 1 和第 3 个列表项的背景色有颜色，而第二个列表中的任何项目都没有背景色。
	</p>
	<p>
		对于一个长的 jQuery 链式写法，可以使用结构块的写法，让其具有很好的可读性，即：将 <code>end()</code> 方法与其对应的过滤方法写在一个嵌套块中，例如：
	</p>
	<div class="syntaxhighlighter javascript nogutter">
<pre class="prettyprint lang-js">$('ul.first').find('.foo')
  .css('background-color', 'red')
.end().find('.bar')
  .css('background-color', 'green')
.end();</pre>
	</div>
	<p>
		最后的<code>end()</code>是不必要的，我们丢弃紧随其后的jQuery对象。然而，当编写这种形式的代码，<code>end()</code>提供了可视化的对称性和完整性，至少一些开发者的眼中，更具可读性，这样存在一些性能成本，因为它是一个额外的函数调用。
	</p>
</div>
<div class="jquery-api-top">
</div>
<header>
<h3 class="underline">
	<blockquote>
		示例
	</blockquote>
</h3>
</header>
<div class="entry-example" id="example-0">
	<h4>
		实例
	</h4>
	<p>
		<span class="desc">选择所有的段落，在其中查找 span 元素，之后再恢复到选择段落的状态。</span> 
	</p>
	<div class="syntaxhighlighter xml ">
<pre class="prettyprint lang-js">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;style&gt;
  p, div { margin:1px; padding:1px; font-weight:bold;
           font-size:16px; }
  div { color:blue; }
  b { color:red; }
  &lt;/style&gt;
  &lt;script src="http://code.jquery.com/jquery-latest.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;p&gt;
    Hi there &lt;span&gt;how&lt;/span&gt; are you &lt;span&gt;doing&lt;/span&gt;?
  &lt;/p&gt;
 
  &lt;p&gt;
    This &lt;span&gt;span&lt;/span&gt; is one of
    several &lt;span&gt;spans&lt;/span&gt; in this
    &lt;span&gt;sentence&lt;/span&gt;.
  &lt;/p&gt;
 
  &lt;div&gt;
    Tags in jQuery object initially: &lt;b&gt;&lt;/b&gt;
  &lt;/div&gt;
  &lt;div&gt;
    Tags in jQuery object after find: &lt;b&gt;&lt;/b&gt;
 
  &lt;/div&gt;
  &lt;div&gt;
    Tags in jQuery object after end: &lt;b&gt;&lt;/b&gt;
  &lt;/div&gt;
&lt;script&gt;
jQuery.fn.showTags = function (n) {
  var tags = this.map(function () {
                          return this.tagName;
                        })
                    .get().join(", ");
  $("b:eq(" + n + ")").text(tags);
  return this;
};
 
$("p").showTags(0)
      .find("span")
      .showTags(1)
      .css("background", "yellow")
      .end()
      .showTags(2)
      .css("font-style", "italic");
 
&lt;/script&gt;
 
&lt;/body&gt;
&lt;/html&gt;</pre>
	</div>
	<p>
		<p>
			<a href="http://www.shouce.ren/study/api/s/8150" target="_blank" class="btn btn-sm btn-success">运行一下</a>
		</p>
	</p>
</div>
<h4>
	实例
</h4>
<p>
	<span class="desc">Selects all paragraphs, finds span elements inside these, and reverts the selection back to the paragraphs.</span> 
</p>
<div class="syntaxhighlighter xml ">
<pre class="prettyprint lang-js">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;style&gt;p { margin:10px; padding:10px; }&lt;/style&gt;
  &lt;script src="http://code.jquery.com/jquery-latest.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;p&gt;&lt;span&gt;Hello&lt;/span&gt;, how are you?&lt;/p&gt;
&lt;script&gt;$("p").find("span").end().css("border", "2px red solid");&lt;/script&gt;
 
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p>
	<p>
		<a href="http://www.shouce.ren/study/api/s/8149" target="_blank" class="btn btn-sm btn-success">运行一下</a>
	</p>
</p>
<p>
</p></div>
<div class="m-bg text-center margin_t_1">
	<a class="btn btn-sm btn-default" href="http://www.shouce.ren"><strong>手册网</strong></a>
</div>
<script type="text/javascript">
$(function(){
	$("pre").addClass("prettyprint linenums");
	//代码高亮
	prettyPrint();
	$("table").attr('class','table table-striped table-bordered table-condensed');
});
</script>
</body>
</html>
