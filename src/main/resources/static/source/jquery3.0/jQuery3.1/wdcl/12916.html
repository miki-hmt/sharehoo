<!DOCTYPE html>
<html>
<head>
<meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, minimumscale=1.0, maximum-scale=1.0" />
<meta name="language" content="zh-cn" />
<meta name="renderer" content="webkit" />
<title>clone()</title>
<link rel="stylesheet" type="text/css" href="../style/prettify.css" />
<link rel="stylesheet" type="text/css" href="../style/bootstrap.min.css" />
<link rel="stylesheet" type="text/css" href="../style/love.css" />
<script type="text/javascript" src="../style/jquery.min.js"></script>
<script type="text/javascript" src="../style/bootstrap.min.js"></script>
<script type="text/javascript" src="../style/prettify.js"></script>
</head>
<body>
<div id="post-content" class="m-bg">
	<h1 class="text-center">clone()</h1>
	<hr>
		<h3>
	<blockquote>
		概述&nbsp;&nbsp;&nbsp;&nbsp;.clone( [withDataAndEvents ] )
	</blockquote>
</h3>
<div class="desc">
	<p>
		返回值：<code><a href="http://www.shouce.ren/api/view/a/13081#articleHeader38" target="_blank">jQuery</a></code> 
	</p>
</div>
<p>
</p>
<p class="desc">
	<strong>描述：</strong>创建一个匹配的元素集合的深度拷贝副本。
</p>
<ul class="signatures">
	<li class="signature" id="clone-withDataAndEvents">
		<h4 class="name">
			<span class="version-details">V : 1.0</span>.clone(  [withDataAndEvents ] )
		</h4>
		<ul>
			<li>
				<div>
					<strong>withDataAndEvents</strong> (默认: <code>false</code>)
				</div>
				<div>
					类型: Boolean
				</div>
				<div>
					一个Boolean值，表示是否会复制元素上的事件处理函数。从jQuery 1.4开始，元素数据也会被复制。
				</div>
			</li>
		</ul>
	</li>
	<li class="signature" id="clone-withDataAndEvents-deepWithDataAndEvents">
		<h4 class="name">
			<span class="version-details">V : 1.5</span>.clone(  [withDataAndEvents ] [, deepWithDataAndEvents ] )
		</h4>
		<ul>
			<li>
				<div>
					<strong>withDataAndEvents</strong> (默认: <code>false</code>)
				</div>
				<div>
					类型: Boolean
				</div>
				<div>
					一个Boolean值，表示是否会复制元素上的事件处理函数。 默认值是 <code>false</code>。<em>*对于1.5.0的默认值被不适当地设置成了<code>true</code>，将在1.5.1以上改回<code>false</code> 。</em> 
				</div>
			</li>
			<li>
				<div>
					<strong>deepWithDataAndEvents</strong> (默认: <code>value of withDataAndEvents</code>)
				</div>
				<div>
					类型: Boolean
				</div>
				<div>
					一个布尔值，指示是否对事件处理程序和克隆的元素的所有子元素的数据应该被复制。默认情况下它的值相匹配的第一个参数的值（ 默认值是 <code>false</code>）
				</div>
			</li>
		</ul>
	</li>
</ul>
<div class="longdesc" id="entry-longdesc">
	<p>
		<code>.clone()</code>方法<em>深度</em> 复制所有匹配的元素集合，包括所有匹配元素、匹配元素的下级元素、文字节点。
	</p>
	<div class="warning">
		<p>
			<strong>注意:</strong>出于性能方面的考虑，表单元素动态的状态（例如，用户将数据输入到 <code>textarea</code>中的值，或者用户在<code>select</code>中已经选中某一项）不会被复制到克隆元素。当克隆<code>input</code>元素时候，该元素的动态状态（例如，用户数据输入到文本输入框(手册网注：<code> &lt;input type="text"&gt;</code>) 和用户选中一个复选框）将被保留在克隆元素中。
		</p>
	</div>
	<p>
		当和插入方法联合使用时，<code>.clone()</code>对于复制页面上的元素很方便。请看下面的HTML：
	</p>
	<div class="syntaxhighlighter xml nogutter">
<pre class="prettyprint lang-js">&lt;div class="container"&gt;
  &lt;div class="hello"&gt;Hello&lt;/div&gt;
  &lt;div class="goodbye"&gt;Goodbye&lt;/div&gt;
&lt;/div&gt;</pre>
	</div>
	<p>
		像我们讨论<code>.append()</code>一样，通常我们将页面上一个元素插入到DOM里另立个地方，它会被从老地方移走（手册网注：不是复制）。所以，给定下面的代码：
	</p>
	<div class="syntaxhighlighter javascript nogutter">
<pre class="prettyprint lang-js">$('.hello').appendTo('.goodbye');</pre>
	</div>
	<p>
		得到的DOM结构如下：
	</p>
	<div class="syntaxhighlighter xml nogutter">
<pre class="prettyprint lang-js">&lt;div class="container"&gt;
  &lt;div class="goodbye"&gt;
    Goodbye
    &lt;div class="hello"&gt;Hello&lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;</pre>
	</div>
	<p>
		但是我们如果需要的是复制而不是移除，我们可以像下面这样写代码：
	</p>
	<div class="syntaxhighlighter javascript nogutter">
<pre class="prettyprint lang-js">$('.hello').clone().appendTo('.goodbye');</pre>
	</div>
	<p>
		结果会是：
	</p>
	<div class="syntaxhighlighter xml nogutter">
<pre class="prettyprint lang-js">&lt;div class="container"&gt;
  &lt;div class="hello"&gt;Hello&lt;/div&gt;
  &lt;div class="goodbye"&gt;
    Goodbye
    &lt;div class="hello"&gt;Hello&lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;</pre>
	</div>
	<blockquote>
		<p>
			注意<strong>:</strong>当我们用<code>.clone()</code>方法时，在将它插入到文档之前，我们可以修改克隆后的元素或者元素内容。
		</p>
	</blockquote>
	<p>
		通常，任何绑定绑定在原始元素上的事件处理函数都<em>不会</em> 被复制到克隆元素。可选的<code>withDataAndEvents </code>参数允许我们改变该默认行为，从而将所有绑定在原始元素上的事件处理函数复制到克隆元素上。对于jQuery 1.4，所有元素数据（ <code>.data()</code>方法返回的内容）同样被复制到新的克隆元素。
	</p>
	<p>
		然而，元素数据（data）内对象和数组不会被复制，将继续被克隆元素和原始元素共享。深复制的所有数据，需要手动复制每一个：
	</p>
	<div class="syntaxhighlighter javascript">
<pre class="prettyprint lang-js">// Original element with attached data
var $elem = $( "#elem" ).data( "arr", [ 1 ] ),
    $clone = $elem.clone( true )
      // Deep copy to prevent data sharing
      .data( "arr", $.extend( [], $elem.data( "arr" ) ) );</pre>
	</div>
	<p>
		在jQuery 1.5，<code>withDataAndEvents</code>可以选择性增强<code>deepWithDataAndEvents</code>复制元素的事件和数据的克隆的所有子元素。
	</p>
	<blockquote>
		<p>
			注意<strong>:</strong> 使用<code>.clone()</code>可能产生<code>id</code>属性重复的元素的副作用，<code>id</code>应该是唯一的。在可能的情况下，建议，应避免克隆有此属性或标识符的元素，使用类（class）属性代替。
		</p>
	</blockquote>
</div>
<div class="jquery-api-top">
</div>
<header>
<h3 class="underline">
	<blockquote>
		示例
	</blockquote>
</h3>
</header>
<div class="entry-example" id="example-0">
	<h4>
		实例
	</h4>
	<p>
		<span class="desc">复制所有 b 元素然后将他们插入到所有段落里面的前面。</span> 
	</p>
	<div class="syntaxhighlighter xml ">
<pre class="prettyprint lang-js">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;script src="http://code.jquery.com/jquery-latest.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
 
  &lt;b&gt;Hello&lt;/b&gt;&lt;p&gt;, how are you?&lt;/p&gt;
 
&lt;script&gt;
  $("b").clone().prependTo("p");
&lt;/script&gt;
 
&lt;/body&gt;
&lt;/html&gt;</pre>
	</div>
	<p>
		<a href="http://www.shouce.ren/study/api/s/8097" target="_blank" class="btn btn-sm btn-success">运行一下</a>
	</p>
</div>
<h4>
	实例
</h4>
<p>
	<span class="desc">当使用 <code>.clone()</code>克隆一组元素，并且这些克隆生成的元素尚未被添加到 DOM 中，那么当这些元素被插入到 DOM 中时，不能保证是按它们的原顺序被插入的。但是，可以像下面示例中提到的那样，保证顺序的正确性：</span> 
</p>
<div class="syntaxhighlighter xml ">
<pre class="prettyprint lang-js">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;style&gt;
  #orig, #copy, #copy-correct {
    float: left;
    width: 20%;
  }
&lt;/style&gt;
  &lt;script src="http://code.jquery.com/jquery-latest.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
 
&lt;div id="orig"&gt;
    &lt;div class="elem"&gt;&lt;a&gt;1&lt;/a&gt;&lt;/div&gt;
    &lt;div class="elem"&gt;&lt;a&gt;2&lt;/a&gt;&lt;/div&gt;
    &lt;div class="elem"&gt;&lt;a&gt;3&lt;/a&gt;&lt;/div&gt;
    &lt;div class="elem"&gt;&lt;a&gt;4&lt;/a&gt;&lt;/div&gt;
    &lt;div class="elem"&gt;&lt;a&gt;5&lt;/a&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div id="copy"&gt;&lt;/div&gt;
&lt;div id="copy-correct"&gt;&lt;/div&gt;
 
&lt;script&gt;
// sort order is not guaranteed here and may vary with browser
$('#copy').append($('#orig .elem')
          .clone()
          .children('a')
          .prepend('foo - ')
          .parent()
          .clone());
 
// correct way to approach where order is maintained
$('#copy-correct')
          .append($('#orig .elem')
          .clone()
          .children('a')
          .prepend('bar - ')
          .end());
&lt;/script&gt;
 
&lt;/body&gt;
&lt;/html&gt;</pre>
</div>
<p>
	<a href="http://www.shouce.ren/study/api/s/8096" target="_blank" class="btn btn-sm btn-success">运行一下</a>
</p>
<p>
</p>
<p>
</p></div>
<div class="m-bg text-center margin_t_1">
	<a class="btn btn-sm btn-default" href="http://www.shouce.ren"><strong>手册网</strong></a>
</div>
<script type="text/javascript">
$(function(){
	$("pre").addClass("prettyprint linenums");
	//代码高亮
	prettyPrint();
	$("table").attr('class','table table-striped table-bordered table-condensed');
});
</script>
</body>
</html>
