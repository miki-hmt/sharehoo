<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><TITLE>&#31532; 1 &#31456;  Hibernate&#20837;&#38376;</TITLE>
<META content="text/html; charset=ISO-8859-1" http-equiv=Content-Type><LINK 
rel=stylesheet type=text/css href="../shared/css/html.css">
<META name=GENERATOR content="MSHTML 11.00.9431.193"><LINK 
title="HIBERNATE - &#31526;&#21512;Java&#20064;&#24815;&#30340;&#20851;&#31995;&#25968;&#25454;&#24211;&#25345;&#20037;&#21270;" rel=home href="index.html"><LINK 
title="HIBERNATE - &#31526;&#21512;Java&#20064;&#24815;&#30340;&#20851;&#31995;&#25968;&#25454;&#24211;&#25345;&#20037;&#21270;" rel=up href="index.html"><LINK title=&#21069;&#35328; 
rel=previous href="preface.html"><LINK 
title=&#31532;&nbsp;2&nbsp;&#31456;&nbsp;&#20307;&#31995;&#32467;&#26500;(Architecture) rel=next 
href="architecture.html"></HEAD>
<BODY aLink=#0000ff link=#0000ff bgColor=white text=black vLink=#840084>
<DIV class=navheader>
<TABLE width="100%" summary="Navigation header">
  <TBODY>
  <TR>
    <TH colSpan=3 align=center>&#31532;&nbsp;1&nbsp;&#31456;&nbsp; Hibernate&#20837;&#38376; </TH></TR>
  <TR>
    <TD width="20%" align=left><A accessKey=p 
    href="preface.html">&#19978;&#19968;&#39029;</A>&nbsp;</TD>
    <TH width="60%" align=center>&nbsp;</TH>
    <TD width="20%" align=right>&nbsp;<A accessKey=n 
      href="architecture.html">&#19979;&#19968;&#39029;</A></TD></TR></TBODY></TABLE>
<HR>
</DIV>
<DIV lang=zh-cn class=chapter>
<DIV class=titlepage>
<DIV>
<DIV>
<H2 class=title><A name=tutorial></A>&#31532;&nbsp;1&nbsp;&#31456;&nbsp; Hibernate&#20837;&#38376; </H2>
<P class=title>&nbsp;</P>
<P class=title>&#23398;&#20064;<FONT color=#ff0000>QQ&#32676;&#65306;</FONT><FONT color=#ff0000 
size=5>476133513&nbsp;&nbsp; &#21487;&#20197;&#21152;&#32676;&#19968;&#36215;&#35752;&#35770;&#23398;&#20064;</FONT></P></DIV></DIV>
<DIV></DIV></DIV>
<DIV lang=zh-cn class=sect1>
<DIV class=titlepage>
<DIV>
<DIV>
<H2 class=title style="CLEAR: both"><A name=tutorial-intro></A>1.1.&nbsp; &#21069;&#35328; 
</H2></DIV></DIV>
<DIV></DIV></DIV>
<P>&#26412;&#31456;&#26159;&#38754;&#21521;Hibernate&#21021;&#23398;&#32773;&#30340;&#19968;&#20010;&#20837;&#38376;&#25945;&#31243;&#12290;&#25105;&#20204;&#20174;&#19968;&#20010;&#20351;&#29992;&#39547;&#30041;&#20869;&#23384;&#24335;(in-memory)&#25968;&#25454;&#24211;&#30340;&#31616;&#21333;&#21629;&#20196;&#34892;&#24212;&#29992;&#31243;&#24207;&#24320;&#22987;, 
&#29992;&#26131;&#20110;&#29702;&#35299;&#30340;&#26041;&#24335;&#36880;&#27493;&#24320;&#21457;&#12290; </P>
<P>&#26412;&#31456;&#38754;&#21521;Hibernate&#21021;&#23398;&#32773;&#65292;&#20294;&#38656;&#35201;Java&#21644;SQL&#30693;&#35782;&#12290;&#23427;&#26159;&#22312;Michael 
Goegl&#25152;&#20889;&#30340;&#25351;&#21335;&#30340;&#22522;&#30784;&#19978;&#23436;&#25104;&#30340;&#12290;&#22312;&#36825;&#37324;&#65292;&#25105;&#20204;&#31216;&#31532;&#19977;&#26041;&#24211;&#25991;&#20214;&#26159;&#25351;JDK 1.4&#21644;5.0&#12290;&#33509;&#20351;&#29992;JDK1.3&#65292;&#20320;&#21487;&#33021;&#38656;&#35201;&#20854;&#23427;&#30340;&#24211;&#25991;&#20214;&#12290; </P>
<P>&#26412;&#31456;&#30340;&#28304;&#20195;&#30721;&#24050;&#21253;&#21547;&#22312;&#21457;&#24067;&#21253;&#20013;&#65292;&#20301;&#20110;<TT class=literal>doc/reference/tutorial/</TT>&#30446;&#24405;&#19979;&#12290; 
</P></DIV>
<DIV lang=zh-cn class=sect1>
<DIV class=titlepage>
<DIV>
<DIV>
<H2 class=title style="CLEAR: both"><A name=tutorial-firstapp></A>1.2.&nbsp; 
&#31532;&#19968;&#37096;&#20998; &#65293; &#31532;&#19968;&#20010;Hibernate&#24212;&#29992;&#31243;&#24207; </H2></DIV></DIV>
<DIV></DIV></DIV>
<P>&#39318;&#20808;&#25105;&#20204;&#23558;&#21019;&#24314;&#19968;&#20010;&#31616;&#21333;&#30340;&#22522;&#20110;&#25511;&#21046;&#21488;&#30340;(console-based)Hibernate&#24212;&#29992;&#31243;&#24207;&#12290;&#30001;&#20110;&#25105;&#20204;&#20351;&#29992;Java&#25968;&#25454;&#24211;(HSQL 
DB)&#65292;&#25152;&#20197;&#19981;&#24517;&#23433;&#35013;&#20219;&#20309;&#25968;&#25454;&#24211;&#26381;&#21153;&#22120;&#12290; </P>
<P>&#20551;&#35774;&#25105;&#20204;&#24076;&#26395;&#26377;&#19968;&#20010;&#23567;&#24212;&#29992;&#31243;&#24207;&#21487;&#20197;&#20445;&#23384;&#25105;&#20204;&#24076;&#26395;&#21442;&#21152;&#30340;&#27963;&#21160;&#65288;events&#65289;&#21644;&#36825;&#20123;&#27963;&#21160;&#20027;&#21150;&#26041;&#30340;&#30456;&#20851;&#20449;&#24687;&#12290; 
&#65288;&#35793;&#32773;&#27880;&#65306;&#22312;&#26412;&#25945;&#31243;&#30340;&#21518;&#38754;&#37096;&#20998;&#65292;&#25105;&#20204;&#23558;&#30452;&#25509;&#20351;&#29992;event&#32780;&#19981;&#26159;&#23427;&#30340;&#20013;&#25991;&#32763;&#35793;“&#27963;&#21160;”&#65292;&#20197;&#20813;&#28151;&#28102;&#12290;&#65289; </P>
<P>&#25105;&#20204;&#25152;&#20570;&#30340;&#31532;&#19968;&#20214;&#20107;&#23601;&#26159;&#21019;&#24314;&#25105;&#20204;&#30340;&#24320;&#21457;&#30446;&#24405;&#65292;&#24182;&#19988;&#25226;&#25152;&#26377;&#38656;&#35201;&#29992;&#21040;&#30340;Java&#24211;&#25991;&#20214;&#25918;&#36827;&#21435;&#12290;&#35299;&#21387;&#32553;&#20174;Hibernate&#32593;&#31449;&#19979;&#36733;&#30340;Hibernate&#21457;&#24067;&#21253;&#65292;&#24182;&#25226;<TT 
class=literal>/lib</TT>&#30446;&#24405;&#19979;&#25152;&#26377;&#38656;&#35201;&#30340;&#24211;&#25991;&#20214;&#25335;&#21040;&#25105;&#20204;&#26032;&#24314;&#24320;&#21457;&#30446;&#24405;&#19979;&#30340;<TT 
class=literal>/lib</TT>&#30446;&#24405;&#19979;&#12290;&#30475;&#36215;&#26469;&#23601;&#20687;&#36825;&#26679;&#65306; </P><PRE class=programlisting>.
+lib
  antlr.jar
  cglib.jar
  asm.jar
  asm-attrs.jars
  commons-collections.jar
  commons-logging.jar
  ehcache.jar
  hibernate3.jar
  jta.jar
  dom4j.jar
  log4j.jar </PRE>
<P><SPAN 
class=emphasis><EM>&#21040;&#32534;&#20889;&#26412;&#25991;&#26102;&#20026;&#27490;</EM></SPAN>&#65292;&#36825;&#20123;&#26159;Hibernate&#36816;&#34892;&#25152;&#38656;&#35201;&#30340;&#26368;&#23567;&#24211;&#25991;&#20214;&#38598;&#21512;&#65288;&#27880;&#24847;&#25105;&#20204;&#20063;&#25335;&#36125;&#20102; 
Hibernate3.jar&#65292;&#36825;&#20010;&#26159;&#26368;&#20027;&#35201;&#30340;&#25991;&#20214;&#65289;&#12290;&#20320;&#27491;&#20351;&#29992;&#30340;Hibernate&#29256;&#26412;&#21487;&#33021;&#38656;&#35201;&#27604;&#36825;&#26356;&#22810;&#25110;&#23569;&#19968;&#20123;&#30340;&#24211;&#25991;&#20214;&#12290;&#35831;&#21442;&#35265;&#21457;&#24067;&#21253;&#20013;&#30340;<TT 
class=literal>lib/</TT>&#30446;&#24405;&#19979;&#30340;<TT 
class=literal>README.txt</TT>&#65292;&#20197;&#33719;&#21462;&#26356;&#22810;&#20851;&#20110;&#25152;&#38656;&#21644;&#21487;&#36873;&#30340;&#31532;&#19977;&#26041;&#24211;&#25991;&#20214;&#20449;&#24687;&#65288;&#20107;&#23454;&#19978;&#65292;Log4j&#24182;&#19981;&#26159;&#24517;&#39035;&#30340;&#24211;&#25991;&#20214;&#65292;&#20294;&#34987;&#35768;&#22810;&#24320;&#21457;&#32773;&#25152;&#21916;&#27426;&#65289;&#12290; 
</P>
<P>&#25509;&#19979;&#26469;&#25105;&#20204;&#21019;&#24314;&#19968;&#20010;&#31867;&#65292;&#29992;&#26469;&#20195;&#34920;&#37027;&#20123;&#25105;&#20204;&#24076;&#26395;&#20648;&#23384;&#22312;&#25968;&#25454;&#24211;&#37324;&#30340;event&#12290; </P>
<DIV lang=zh-cn class=sect2>
<DIV class=titlepage>
<DIV>
<DIV>
<H3 class=title><A name=tutorial-firstapp-firstclass></A>1.2.1.&nbsp; &#31532;&#19968;&#20010;class 
</H3></DIV></DIV>
<DIV></DIV></DIV>
<P>&#25105;&#20204;&#30340;&#31532;&#19968;&#20010;&#25345;&#20037;&#21270;&#31867;&#26159;&#19968;&#20010;&#24102;&#26377;&#19968;&#20123;&#23646;&#24615;&#65288;property&#65289;&#30340;&#31616;&#21333;JavaBean&#31867;&#65306; </P><PRE class=programlisting>package events;

import java.util.Date;

public class Event {
    private Long id;

    private String title;
    private Date date;

    public Event() {}

    public Long getId() {
        return id;
    }

    private void setId(Long id) {
        this.id = id;
    }

    public Date getDate() {
        return date;
    }

    public void setDate(Date date) {
        this.date = date;
    }

    public String getTitle() {
        return title;
    }

    public void setTitle(String title) {
        this.title = title;
    }
}</PRE>
<P>&#20320;&#21487;&#20197;&#30475;&#21040;&#36825;&#20010;&#31867;&#23545;&#23646;&#24615;&#30340;&#23384;&#21462;&#26041;&#27861;&#65288;getter and setter 
method&#65289;&#20351;&#29992;&#20102;&#26631;&#20934;JavaBean&#21629;&#21517;&#32422;&#23450;&#65292;&#21516;&#26102;&#25226;&#31867;&#23646;&#24615;&#65288;field&#65289;&#30340;&#35775;&#38382;&#32423;&#21035;&#35774;&#25104;&#31169;&#26377;&#30340;&#65288;private&#65289;&#12290;&#36825;&#26159;&#25512;&#33616;&#30340;&#35774;&#35745;&#65292;&#20294;&#24182;&#19981;&#26159;&#24517;&#39035;&#30340;&#12290;Hibernate&#20063;&#21487;&#20197;&#30452;&#25509;&#35775;&#38382;&#36825;&#20123;field&#65292;&#32780;&#20351;&#29992;&#35775;&#38382;&#26041;&#27861;&#65288;accessor 
method&#65289;&#30340;&#22909;&#22788;&#26159;&#25552;&#20379;&#20102;&#37325;&#26500;&#26102;&#30340;&#20581;&#22766;&#24615;&#65288;robustness&#65289;&#12290;&#20026;&#20102;&#36890;&#36807;&#21453;&#23556;&#26426;&#21046;&#65288;Reflection&#65289;&#26469;&#23454;&#20363;&#21270;&#36825;&#20010;&#31867;&#30340;&#23545;&#35937;&#65292;&#25105;&#20204;&#38656;&#35201;&#25552;&#20379;&#19968;&#20010;&#26080;&#21442;&#30340;&#26500;&#36896;&#22120;&#65288;no-argument 
constructor)&#12290; </P>
<P>&#23545;&#19968;&#29305;&#23450;&#30340;event, <TT class=literal>id</TT> 
&#23646;&#24615;&#25345;&#26377;&#21807;&#19968;&#30340;&#26631;&#35782;&#31526;&#65288;identifier&#65289;&#30340;&#20540;&#12290;&#22914;&#26524;&#25105;&#20204;&#24076;&#26395;&#20351;&#29992;Hibernate&#25552;&#20379;&#30340;&#25152;&#26377;&#29305;&#24615;&#65292;&#37027;&#20040;&#25152;&#26377;&#30340;&#25345;&#20037;&#21270;&#23454;&#20307;&#65288;persistent 
entity&#65289;&#31867;&#65288;&#36825;&#37324;&#20063;&#21253;&#25324;&#19968;&#20123;&#27425;&#35201;&#20381;&#36182;&#31867;&#65289;&#37117;&#38656;&#35201;&#19968;&#20010;&#36825;&#26679;&#30340;&#26631;&#35782;&#31526;&#23646;&#24615;&#12290;&#32780;&#20107;&#23454;&#19978;&#65292;&#22823;&#22810;&#25968;&#24212;&#29992;&#31243;&#24207;&#65288;&#29305;&#21035;&#26159;web&#24212;&#29992;&#31243;&#24207;&#65289;&#37117;&#38656;&#35201;&#36890;&#36807;&#26631;&#35782;&#31526;&#26469;&#21306;&#21035;&#23545;&#35937;&#65292;&#25152;&#20197;&#20320;&#24212;&#35813;&#32771;&#34385;&#20351;&#29992;&#26631;&#35782;&#31526;&#23646;&#24615;&#32780;&#19981;&#26159;&#25226;&#23427;&#24403;&#20316;&#19968;&#31181;&#38480;&#21046;&#12290;&#28982;&#32780;&#65292;&#25105;&#20204;&#36890;&#24120;&#19981;&#20250;&#25805;&#20316;&#23545;&#35937;&#30340;&#26631;&#35782;&#65288;identity&#65289;&#65292;&#22240;&#27492;&#23427;&#30340;setter&#26041;&#27861;&#30340;&#35775;&#38382;&#32423;&#21035;&#24212;&#35813;&#22768;&#26126;private&#12290;&#36825;&#26679;&#24403;&#23545;&#35937;&#34987;&#20445;&#23384;&#30340;&#26102;&#20505;&#65292;&#21482;&#26377;Hibernate&#21487;&#20197;&#20026;&#23427;&#20998;&#37197;&#26631;&#35782;&#31526;&#20540;&#12290;&#20320;&#21487;&#30475;&#21040;Hibernate&#21487;&#20197;&#30452;&#25509;&#35775;&#38382;public&#65292;private&#21644;protected&#30340;&#35775;&#38382;&#26041;&#27861;&#21644;field&#12290;&#25152;&#20197;&#36873;&#25321;&#21738;&#31181;&#26041;&#24335;&#23436;&#20840;&#21462;&#20915;&#20110;&#20320;&#65292;&#20320;&#21487;&#20197;&#20351;&#20320;&#30340;&#36873;&#25321;&#19982;&#20320;&#30340;&#24212;&#29992;&#31243;&#24207;&#35774;&#35745;&#30456;&#21563;&#21512;&#12290; 
</P>
<P>&#25152;&#26377;&#30340;&#25345;&#20037;&#21270;&#31867;&#65288;persistent 
classes&#65289;&#37117;&#35201;&#27714;&#26377;&#26080;&#21442;&#30340;&#26500;&#36896;&#22120;&#65292;&#22240;&#20026;Hibernate&#24517;&#39035;&#20351;&#29992;Java&#21453;&#23556;&#26426;&#21046;&#26469;&#20026;&#20320;&#21019;&#24314;&#23545;&#35937;&#12290;&#26500;&#36896;&#22120;&#65288;constructor&#65289;&#30340;&#35775;&#38382;&#32423;&#21035;&#21487;&#20197;&#26159;private&#65292;&#28982;&#32780;&#24403;&#29983;&#25104;&#36816;&#34892;&#26102;&#20195;&#29702;&#65288;runtime 
proxy&#65289;&#30340;&#26102;&#20505;&#21017;&#35201;&#27714;&#20351;&#29992;&#33267;&#23569;&#26159;package &#32423;&#21035;&#30340;&#35775;&#38382;&#25511;&#21046;&#65292;&#36825;&#26679;&#22312;&#27809;&#26377;&#23383;&#33410;&#30721;&#25351;&#20196;&#65288;bytecode 
instrumentation&#65289;&#30340;&#24773;&#20917;&#19979;&#65292;&#20174;&#25345;&#20037;&#21270;&#31867;&#37324;&#33719;&#21462;&#25968;&#25454;&#20250;&#26356;&#26377;&#25928;&#29575;&#12290; </P>
<P>&#25226;&#36825;&#20010;Java&#28304;&#20195;&#30721;&#25991;&#20214;&#25918;&#21040;&#24320;&#21457;&#30446;&#24405;&#19979;&#30340;<TT class=literal>src</TT>&#30446;&#24405;&#37324;&#65292;&#27880;&#24847;&#21253;&#20301;&#32622;&#35201;&#27491;&#30830;&#12290; &#29616;&#22312;&#36825;&#20010;&#30446;&#24405;&#30475;&#36215;&#26469;&#24212;&#35813;&#20687;&#36825;&#26679;&#65306; 
</P><PRE class=programlisting>.
+lib
  &lt;Hibernate and third-party libraries&gt;
+src
  +events
    Event.java</PRE>
<P>&#19979;&#19968;&#27493;&#65292;&#25105;&#20204;&#25226;&#36825;&#20010;&#25345;&#20037;&#21270;&#31867;&#30340;&#20449;&#24687;&#21578;&#35785;Hibernate&#12290; </P></DIV>
<DIV lang=zh-cn class=sect2>
<DIV class=titlepage>
<DIV>
<DIV>
<H3 class=title><A name=tutorial-firstapp-mapping></A>1.2.2.&nbsp; &#26144;&#23556;&#25991;&#20214; 
</H3></DIV></DIV>
<DIV></DIV></DIV>
<P>Hibernate&#38656;&#35201;&#30693;&#36947;&#24590;&#26679;&#21435;&#21152;&#36733;&#65288;load&#65289;&#21644;&#23384;&#20648;&#65288;store&#65289;&#25345;&#20037;&#21270;&#31867;&#30340;&#23545;&#35937;&#12290;&#36825;&#27491;&#26159;Hibernate&#26144;&#23556;&#25991;&#20214;&#21457;&#25381;&#20316;&#29992;&#30340;&#22320;&#26041;&#12290;&#26144;&#23556;&#25991;&#20214;&#21578;&#35785;Hibernate&#23427;&#65292;&#24212;&#35813;&#35775;&#38382;&#25968;&#25454;&#24211;(database)&#37324;&#38754;&#30340;&#21738;&#20010;&#34920;&#65288;table&#65289;&#21450;&#24212;&#35813;&#20351;&#29992;&#34920;&#37324;&#38754;&#30340;&#21738;&#20123;&#23383;&#27573;&#65288;column&#65289;&#12290; 
</P>
<P>&#19968;&#20010;&#26144;&#23556;&#25991;&#20214;&#30340;&#22522;&#26412;&#32467;&#26500;&#30475;&#36215;&#26469;&#20687;&#36825;&#26679;&#65306; </P><PRE class=programlisting>&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"&gt;

&lt;hibernate-mapping&gt;
[...]
&lt;/hibernate-mapping&gt;</PRE>
<P>&#27880;&#24847;Hibernate&#30340;DTD&#26159;&#38750;&#24120;&#22797;&#26434;&#30340;&#12290;&#20320;&#30340;&#32534;&#36753;&#22120;&#25110;&#32773;IDE&#37324;&#20351;&#29992;&#23427;&#26469;&#33258;&#21160;&#23436;&#25104;&#37027;&#20123;&#29992;&#26469;&#26144;&#23556;&#30340;XML&#20803;&#32032;&#65288;element&#65289;&#21644;&#23646;&#24615;&#65288;attribute&#65289;&#12290;&#20320;&#20063;&#21487;&#20197;&#22312;&#25991;&#26412;&#32534;&#36753;&#22120;&#37324;&#25171;&#24320;DTD&#65293;&#36825;&#26159;&#26368;&#31616;&#21333;&#30340;&#26041;&#24335;&#26469;&#27010;&#35272;&#25152;&#26377;&#30340;&#20803;&#32032;&#21644;attribute&#65292;&#24182;&#26597;&#30475;&#23427;&#20204;&#30340;&#32570;&#30465;&#20540;&#20197;&#21450;&#27880;&#37322;&#12290;&#27880;&#24847;Hibernate&#19981;&#20250;&#20174;web&#21152;&#36733;DTD&#25991;&#20214;&#65292;&#20294;&#23427;&#20250;&#39318;&#20808;&#22312;&#24212;&#29992;&#31243;&#24207;&#30340;classpath&#20013;&#26597;&#25214;&#12290;DTD&#25991;&#20214;&#24050;&#21253;&#25324;&#22312;<TT 
class=literal>hibernate3.jar</TT>&#37324;&#65292;&#21516;&#26102;&#20063;&#22312;Hibernate&#21457;&#24067;&#21253;&#30340;<TT 
class=literal>src/</TT>&#30446;&#24405;&#19979;&#12290; </P>
<P>&#20026;&#32553;&#30701;&#20195;&#30721;&#38271;&#24230;&#65292;&#22312;&#20197;&#21518;&#30340;&#20363;&#23376;&#37324;&#25105;&#20204;&#20250;&#30465;&#30053;DTD&#30340;&#22768;&#26126;&#12290;&#24403;&#28982;&#65292;&#22312;&#23454;&#38469;&#30340;&#24212;&#29992;&#31243;&#24207;&#20013;&#65292;DTD&#22768;&#26126;&#26159;&#24517;&#39035;&#30340;&#12290; </P>
<P>&#22312;<TT class=literal>hibernate-mapping</TT>&#26631;&#31614;&#65288;tag&#65289;&#20043;&#38388;, &#21547;&#26377;&#19968;&#20010;<TT 
class=literal>class</TT>&#20803;&#32032;&#12290;&#25152;&#26377;&#30340;&#25345;&#20037;&#21270;&#23454;&#20307;&#31867;&#65288;&#20877;&#27425;&#22768;&#26126;&#65292;&#25110;&#35768;&#25509;&#19979;&#26469;&#20250;&#26377;&#20381;&#36182;&#31867;&#65292;&#23601;&#26159;&#37027;&#20123;&#27425;&#35201;&#30340;&#23454;&#20307;&#65289;&#37117;&#38656;&#35201;&#19968;&#20010;&#36825;&#26679;&#30340;&#26144;&#23556;&#65292;&#26469;&#25226;&#31867;&#23545;&#35937;&#26144;&#23556;&#21040;SQL&#25968;&#25454;&#24211;&#37324;&#30340;&#34920;&#12290; 
</P><PRE class=programlisting>&lt;hibernate-mapping&gt;

    &lt;class name="events.Event" table="EVENTS"&gt;

    &lt;/class&gt;

&lt;/hibernate-mapping&gt;</PRE>
<P>&#21040;&#30446;&#21069;&#20026;&#27490;&#65292;&#25105;&#20204;&#21578;&#35785;&#20102;Hibernate&#24590;&#26679;&#25226;<TT class=literal>Events</TT>&#31867;&#30340;&#23545;&#35937;&#25345;&#20037;&#21270;&#21040;&#25968;&#25454;&#24211;&#30340;<TT 
class=literal>EVENTS</TT>&#34920;&#37324;&#65292;&#20197;&#21450;&#24590;&#26679;&#20174;<TT class=literal>EVENTS</TT>&#34920;&#21152;&#36733;&#21040;<TT 
class=literal>Events</TT>&#31867;&#30340;&#23545;&#35937;&#12290;&#27599;&#20010;&#23454;&#20363;&#23545;&#24212;&#30528;&#25968;&#25454;&#24211;&#34920;&#20013;&#30340;&#19968;&#34892;&#12290;&#29616;&#22312;&#25105;&#20204;&#23558;&#32487;&#32493;&#35752;&#35770;&#26377;&#20851;&#21807;&#19968;&#26631;&#35782;&#31526;&#23646;&#24615;&#21040;&#25968;&#25454;&#24211;&#34920;&#30340;&#26144;&#23556;&#12290;&#21478;&#22806;&#65292;&#30001;&#20110;&#25105;&#20204;&#19981;&#20851;&#24515;&#24590;&#26679;&#22788;&#29702;&#36825;&#20010;&#26631;&#35782;&#31526;&#65292;&#25105;&#20204;&#23601;&#37197;&#32622;&#30001;Hibernate&#30340;&#26631;&#35782;&#31526;&#29983;&#25104;&#31574;&#30053;&#26469;&#20135;&#29983;&#20195;&#29702;&#20027;&#38190;&#23383;&#27573;&#12290; 
</P><PRE class=programlisting>&lt;hibernate-mapping&gt;

    &lt;class name="events.Event" table="EVENTS"&gt;
        &lt;id name="id" column="EVENT_ID"&gt;
            &lt;generator class="native"/&gt;
        &lt;/id&gt;
    &lt;/class&gt;

&lt;/hibernate-mapping&gt;</PRE>
<P><TT class=literal>id</TT>&#20803;&#32032;&#26159;&#26631;&#35782;&#31526;&#23646;&#24615;&#30340;&#22768;&#26126;&#65292;<TT class=literal>name="id"</TT> 
&#22768;&#26126;&#20102;Java&#23646;&#24615;&#30340;&#21517;&#23383; &#65293; Hibernate&#20250;&#20351;&#29992;<TT class=literal>getId()</TT>&#21644;<TT 
class=literal>setId()</TT>&#26469;&#35775;&#38382;&#23427;&#12290; <TT class=literal>column</TT>&#23646;&#24615;&#21017;&#21578;&#35785;Hibernate, 
&#25105;&#20204;&#20351;&#29992;<TT class=literal>EVENTS</TT>&#34920;&#30340;&#21738;&#20010;&#23383;&#27573;&#20316;&#20026;&#20027;&#38190;&#12290;&#23884;&#22871;&#30340;<TT 
class=literal>generator</TT>&#20803;&#32032;&#25351;&#23450;&#20102;&#26631;&#35782;&#31526;&#29983;&#25104;&#31574;&#30053;&#65292;&#22312;&#36825;&#37324;&#25105;&#20204;&#25351;&#23450;<TT 
class=literal>native</TT>&#65292;&#23427;&#26681;&#25454;&#24050;&#37197;&#32622;&#30340;&#25968;&#25454;&#24211;&#65288;&#26041;&#35328;&#65289;&#33258;&#21160;&#36873;&#25321;&#26368;&#20339;&#30340;&#26631;&#35782;&#31526;&#29983;&#25104;&#31574;&#30053;&#12290;Hibernate&#25903;&#25345;&#30001;&#25968;&#25454;&#24211;&#29983;&#25104;&#65292;&#20840;&#23616;&#21807;&#19968;&#24615;&#65288;globally 
unique&#65289;&#21644;&#24212;&#29992;&#31243;&#24207;&#25351;&#23450;&#65288;&#25110;&#32773;&#20320;&#33258;&#24049;&#20026;&#20219;&#20309;&#24050;&#26377;&#31574;&#30053;&#25152;&#20889;&#30340;&#25193;&#23637;&#65289;&#36825;&#20123;&#31574;&#30053;&#26469;&#29983;&#25104;&#26631;&#35782;&#31526;&#12290; </P>
<P>&#26368;&#21518;&#25105;&#20204;&#22312;&#26144;&#23556;&#25991;&#20214;&#37324;&#38754;&#21253;&#21547;&#38656;&#35201;&#25345;&#20037;&#21270;&#23646;&#24615;&#30340;&#22768;&#26126;&#12290;&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;&#31867;&#37324;&#38754;&#30340;&#23646;&#24615;&#37117;&#34987;&#35270;&#20026;&#38750;&#25345;&#20037;&#21270;&#30340;&#65306; </P><PRE class=programlisting>&lt;hibernate-mapping&gt;

    &lt;class name="events.Event" table="EVENTS"&gt;
        &lt;id name="id" column="EVENT_ID"&gt;
            &lt;generator class="native"/&gt;
        &lt;/id&gt;
        &lt;property name="date" type="timestamp" column="EVENT_DATE"/&gt;
        &lt;property name="title"/&gt;
    &lt;/class&gt;

&lt;/hibernate-mapping&gt;</PRE>
<P>&#21644;<TT class=literal>id</TT>&#20803;&#32032;&#19968;&#26679;&#65292;<TT class=literal>property</TT>&#20803;&#32032;&#30340;<TT 
class=literal>name</TT>&#23646;&#24615;&#21578;&#35785;Hibernate&#20351;&#29992;&#21738;&#20010;getter&#21644;setter&#26041;&#27861;&#12290;&#22312;&#27492;&#20363;&#20013;&#65292;Hibernate&#20250;&#23547;&#25214;<TT 
class=literal>getDate()/setDate()</TT>, &#20197;&#21450;<TT 
class=literal>getTitle()/setTitle()</TT>&#12290; </P>
<P>&#20026;&#20160;&#20040;<TT class=literal>date</TT>&#23646;&#24615;&#30340;&#26144;&#23556;&#21547;&#26377;<TT class=literal>column</TT> 
attribute&#65292;&#32780;<TT class=literal>title</TT>&#21364;&#27809;&#26377;&#65311;&#24403;&#27809;&#26377;&#35774;&#23450;<TT class=literal>column</TT> 
attribute &#30340;&#26102;&#20505;&#65292;Hibernate&#32570;&#30465;&#22320;&#20351;&#29992;JavaBean&#30340;&#23646;&#24615;&#21517;&#20316;&#20026;&#23383;&#27573;&#21517;&#12290;&#23545;&#20110;<TT 
class=literal>title</TT>&#65292;&#36825;&#26679;&#24037;&#20316;&#24471;&#24456;&#22909;&#12290;&#28982;&#32780;&#65292;<TT 
class=literal>date</TT>&#22312;&#22810;&#25968;&#30340;&#25968;&#25454;&#24211;&#37324;&#65292;&#26159;&#19968;&#20010;&#20445;&#30041;&#20851;&#38190;&#23383;&#65292;&#25152;&#20197;&#25105;&#20204;&#26368;&#22909;&#25226;&#23427;&#26144;&#23556;&#25104;&#19968;&#20010;&#19981;&#21516;&#30340;&#21517;&#23383;&#12290; </P>
<P>&#21478;&#19968;&#26377;&#36259;&#30340;&#20107;&#24773;&#26159;<TT class=literal>title</TT>&#23646;&#24615;&#32570;&#23569;&#19968;&#20010;<TT class=literal>type</TT> 
attribute&#12290;&#25105;&#20204;&#22312;&#26144;&#23556;&#25991;&#20214;&#37324;&#22768;&#26126;&#24182;&#20351;&#29992;&#30340;&#31867;&#22411;&#65292;&#21364;&#19981;&#26159;&#25105;&#20204;&#26399;&#26395;&#30340;&#37027;&#26679;&#65292;&#26159;Java&#25968;&#25454;&#31867;&#22411;&#65292;&#21516;&#26102;&#20063;&#19981;&#26159;SQL&#25968;&#25454;&#24211;&#30340;&#25968;&#25454;&#31867;&#22411;&#12290;&#36825;&#20123;&#31867;&#22411;&#23601;&#26159;&#25152;&#35859;&#30340;Hibernate 
&#26144;&#23556;&#31867;&#22411;<SPAN class=emphasis><EM>&#65288;mapping 
types&#65289;</EM></SPAN>&#65292;&#23427;&#20204;&#33021;&#25226;Java&#25968;&#25454;&#31867;&#22411;&#36716;&#25442;&#21040;SQL&#25968;&#25454;&#31867;&#22411;&#65292;&#21453;&#20043;&#20134;&#28982;&#12290;&#20877;&#27425;&#37325;&#30003;&#65292;&#22914;&#26524;&#22312;&#26144;&#23556;&#25991;&#20214;&#20013;&#27809;&#26377;&#35774;&#32622;<TT 
class=literal>type</TT>&#23646;&#24615;&#30340;&#35805;&#65292;Hibernate&#20250;&#33258;&#24049;&#35797;&#30528;&#21435;&#30830;&#23450;&#27491;&#30830;&#30340;&#36716;&#25442;&#31867;&#22411;&#21644;&#23427;&#30340;&#26144;&#23556;&#31867;&#22411;&#12290;&#22312;&#26576;&#20123;&#24773;&#20917;&#19979;&#36825;&#20010;&#33258;&#21160;&#26816;&#27979;&#26426;&#21046;&#65288;&#22312;Java 
&#31867;&#19978;&#20351;&#29992;&#21453;&#23556;&#26426;&#21046;&#65289;&#19981;&#20250;&#20135;&#29983;&#20320;&#25152;&#26399;&#24453;&#25110;&#38656;&#35201;&#30340;&#32570;&#30465;&#20540;&#12290;<TT 
class=literal>date</TT>&#23646;&#24615;&#23601;&#26159;&#20010;&#24456;&#22909;&#30340;&#20363;&#23376;&#65292;Hibernate&#26080;&#27861;&#30693;&#36947;&#36825;&#20010;&#23646;&#24615;&#65288;<TT 
class=literal>java.util.Date</TT>&#31867;&#22411;&#30340;&#65289;&#24212;&#35813;&#34987;&#26144;&#23556;&#25104;&#65306;SQL <TT class=literal>date</TT>&#65292;&#25110;<TT 
class=literal>timestamp</TT>&#65292;&#36824;&#26159;<TT class=literal>time</TT> &#23383;&#27573;&#12290;&#22312;&#27492;&#20363;&#20013;&#65292;&#25226;&#36825;&#20010;&#23646;&#24615;&#26144;&#23556;&#25104;<TT 
class=literal>timestamp</TT> &#36716;&#25442;&#22120;&#65292;&#36825;&#26679;&#25105;&#20204;&#39044;&#30041;&#20102;&#26085;&#26399;&#21644;&#26102;&#38388;&#30340;&#20840;&#37096;&#20449;&#24687;&#12290; </P>
<P>&#24212;&#35813;&#25226;&#36825;&#20010;&#26144;&#23556;&#25991;&#20214;&#20445;&#23384;&#20026;<TT class=literal>Event.hbm.xml</TT>&#65292;&#19988;&#23601;&#22312;<TT 
class=literal>Event</TT>Java&#31867;&#30340;&#28304;&#25991;&#20214;&#30446;&#24405;&#19979;&#12290;&#26144;&#23556;&#25991;&#20214;&#21487;&#38543;&#24847;&#22320;&#21629;&#21517;&#65292;&#20294;<TT 
class=literal>hbm.xml</TT>&#30340;&#21518;&#32512;&#24050;&#25104;&#20026;Hibernate&#24320;&#21457;&#32773;&#31038;&#21306;&#30340;&#32422;&#23450;&#12290;&#29616;&#22312;&#30446;&#24405;&#32467;&#26500;&#30475;&#36215;&#26469;&#24212;&#35813;&#20687;&#36825;&#26679;&#65306; </P><PRE class=programlisting>.
+lib
  &lt;Hibernate and third-party libraries&gt;
+src
 +events
  Event.java
  Event.hbm.xml</PRE>
<P>&#25105;&#20204;&#32487;&#32493;&#36827;&#34892;Hibernate&#30340;&#20027;&#35201;&#37197;&#32622;&#12290; </P></DIV>
<DIV lang=zh-cn class=sect2>
<DIV class=titlepage>
<DIV>
<DIV>
<H3 class=title><A name=tutorial-firstapp-configuration></A>1.2.3.&nbsp; 
Hibernate&#37197;&#32622; </H3></DIV></DIV>
<DIV></DIV></DIV>
<P>&#29616;&#22312;&#25105;&#20204;&#24050;&#32463;&#26377;&#20102;&#19968;&#20010;&#25345;&#20037;&#21270;&#31867;&#21644;&#23427;&#30340;&#26144;&#23556;&#25991;&#20214;&#65292;&#35813;&#26159;&#37197;&#32622;Hibernate&#30340;&#26102;&#20505;&#20102;&#12290;&#22312;&#27492;&#20043;&#21069;&#65292;&#25105;&#20204;&#38656;&#35201;&#19968;&#20010;&#25968;&#25454;&#24211;&#12290; HSQL DB&#26159;&#31181;&#22522;&#20110;Java 
&#30340;SQL&#25968;&#25454;&#24211;&#31649;&#29702;&#31995;&#32479;&#65288;DBMS&#65289;&#65292;&#21487;&#20197;&#20174;HSQL DB&#30340;&#32593;&#31449;&#19978;&#19979;&#36733;&#12290;&#23454;&#38469;&#19978;&#65292;&#20320;&#21482;&#38656;&#19979;&#36733;&#30340;&#21253;&#20013;&#30340;<TT 
class=literal>hsqldb.jar</TT>&#25991;&#20214;&#65292;&#24182;&#25226;&#36825;&#20010;&#25991;&#20214;&#25918;&#22312;&#24320;&#21457;&#25991;&#20214;&#22841;&#30340;<TT class=literal>lib/</TT>&#30446;&#24405;&#19979;&#21363;&#21487;&#12290; 
</P>
<P>&#22312;&#24320;&#21457;&#30340;&#26681;&#30446;&#24405;&#19979;&#21019;&#24314;&#19968;&#20010;<TT class=literal>data</TT>&#30446;&#24405; &#65293; &#36825;&#26159;HSQL 
DB&#23384;&#20648;&#25968;&#25454;&#25991;&#20214;&#30340;&#22320;&#26041;&#12290;&#27492;&#26102;&#22312;data&#30446;&#24405;&#20013;&#36816;&#34892;<TT class=literal>java -classpath lib/hsqldb.jar 
org.hsqldb.Server</TT>&#23601;&#21487;&#21551;&#21160;&#25968;&#25454;&#24211;&#12290;&#20320;&#21487;&#20197;&#22312;log&#20013;&#30475;&#21040;&#23427;&#30340;&#21551;&#21160;&#65292;&#21450;&#32465;&#23450;&#21040;TCP/IP&#22871;&#32467;&#23383;&#65292;&#36825;&#27491;&#26159;&#25105;&#20204;&#30340;&#24212;&#29992;&#31243;&#24207;&#31245;&#21518;&#20250;&#36830;&#25509;&#30340;&#22320;&#26041;&#12290;&#22914;&#26524;&#20320;&#24076;&#26395;&#22312;&#26412;&#20363;&#20013;&#36816;&#34892;&#19968;&#20010;&#20840;&#26032;&#30340;&#25968;&#25454;&#24211;&#65292;&#23601;&#22312;&#31383;&#21475;&#20013;&#25353;&#19979;<TT 
class=literal>CTRL + C</TT>&#26469;&#20851;&#38381;HSQL&#25968;&#25454;&#24211;&#65292;&#24182;&#21024;&#38500;<TT 
class=literal>data/</TT>&#30446;&#24405;&#19979;&#30340;&#25152;&#26377;&#25991;&#20214;&#65292;&#20877;&#37325;&#26032;&#21551;&#21160;HSQL&#25968;&#25454;&#24211;&#12290; </P>
<P>Hibernate&#26159;&#20320;&#30340;&#24212;&#29992;&#31243;&#24207;&#37324;&#36830;&#25509;&#25968;&#25454;&#24211;&#30340;&#37027;&#23618;&#65292;&#25152;&#20197;&#23427;&#38656;&#35201;&#36830;&#25509;&#29992;&#30340;&#20449;&#24687;&#12290;&#36830;&#25509;&#65288;connection&#65289;&#26159;&#36890;&#36807;&#19968;&#20010;&#20063;&#30001;&#25105;&#20204;&#37197;&#32622;&#30340;JDBC&#36830;&#25509;&#27744;&#65288;connection 
pool&#65289;&#26469;&#23436;&#25104;&#30340;&#12290;Hibernate&#30340;&#21457;&#24067;&#21253;&#37324;&#21253;&#21547;&#20102;&#35768;&#22810;&#24320;&#28304;&#30340;&#65288;open 
source&#65289;&#36830;&#25509;&#27744;&#65292;&#20294;&#22312;&#25105;&#20204;&#20363;&#23376;&#20013;&#20351;&#29992;Hibernate&#20869;&#32622;&#30340;&#36830;&#25509;&#27744;&#12290;&#27880;&#24847;&#65292;&#22914;&#26524;&#20320;&#24076;&#26395;&#20351;&#29992;&#19968;&#20010;&#20135;&#21697;&#32423;(production-quality)&#30340;&#31532;&#19977;&#26041;&#36830;&#25509;&#27744;&#36719;&#20214;&#65292;&#20320;&#24517;&#39035;&#25335;&#36125;&#25152;&#38656;&#30340;&#24211;&#25991;&#20214;&#21040;&#20320;&#30340;classpath&#19979;&#65292;&#24182;&#20351;&#29992;&#19981;&#21516;&#30340;&#36830;&#25509;&#27744;&#35774;&#32622;&#12290; 
</P>
<P>&#20026;&#20102;&#20445;&#23384;Hibernate&#30340;&#37197;&#32622;&#65292;&#25105;&#20204;&#21487;&#20197;&#20351;&#29992;&#19968;&#20010;&#31616;&#21333;&#30340;<TT 
class=literal>hibernate.properties</TT>&#25991;&#20214;&#65292;&#25110;&#32773;&#19968;&#20010;&#31245;&#24494;&#22797;&#26434;&#30340;<TT 
class=literal>hibernate.cfg.xml</TT>&#65292;&#29978;&#33267;&#21487;&#20197;&#23436;&#20840;&#20351;&#29992;&#31243;&#24207;&#26469;&#37197;&#32622;Hibernate&#12290;&#22810;&#25968;&#29992;&#25143;&#26356;&#21916;&#27426;&#20351;&#29992;XML&#37197;&#32622;&#25991;&#20214;&#65306; 
</P><PRE class=programlisting>&lt;?xml version='1.0' encoding='utf-8'?&gt;
&lt;!DOCTYPE hibernate-configuration PUBLIC
        "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
        "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"&gt;

&lt;hibernate-configuration&gt;

    &lt;session-factory&gt;

        &lt;!-- Database connection settings --&gt;
        &lt;property name="connection.driver_class"&gt;org.hsqldb.jdbcDriver&lt;/property&gt;
        &lt;property name="connection.url"&gt;jdbc:hsqldb:hsql://localhost&lt;/property&gt;
        &lt;property name="connection.username"&gt;sa&lt;/property&gt;
        &lt;property name="connection.password"&gt;&lt;/property&gt;

        &lt;!-- JDBC connection pool (use the built-in) --&gt;
        &lt;property name="connection.pool_size"&gt;1&lt;/property&gt;

        &lt;!-- SQL dialect --&gt;
        &lt;property name="dialect"&gt;org.hibernate.dialect.HSQLDialect&lt;/property&gt;

        &lt;!-- Enable Hibernate's automatic session context management --&gt;
        &lt;property name="current_session_context_class"&gt;thread&lt;/property&gt;

        &lt;!-- Disable the second-level cache  --&gt;
        &lt;property name="cache.provider_class"&gt;org.hibernate.cache.NoCacheProvider&lt;/property&gt;

        &lt;!-- Echo all executed SQL to stdout --&gt;
        &lt;property name="show_sql"&gt;true&lt;/property&gt;

        &lt;!-- Drop and re-create the database schema on startup --&gt;
        &lt;property name="hbm2ddl.auto"&gt;create&lt;/property&gt;

        &lt;mapping resource="events/Event.hbm.xml"/&gt;

    &lt;/session-factory&gt;

&lt;/hibernate-configuration&gt;</PRE>
<P>&#27880;&#24847;&#36825;&#20010;XML&#37197;&#32622;&#20351;&#29992;&#20102;&#19968;&#20010;&#19981;&#21516;&#30340;DTD&#12290;&#22312;&#36825;&#37324;&#65292;&#25105;&#20204;&#37197;&#32622;&#20102;Hibernate&#30340;<TT 
class=literal>SessionFactory</TT>&#65293;&#19968;&#20010;&#20851;&#32852;&#20110;&#29305;&#23450;&#25968;&#25454;&#24211;&#20840;&#23616;&#30340;&#24037;&#21378;&#65288;factory&#65289;&#12290;&#22914;&#26524;&#20320;&#35201;&#20351;&#29992;&#22810;&#20010;&#25968;&#25454;&#24211;&#65292;&#23601;&#35201;&#29992;&#22810;&#20010;&#30340;<TT 
class=literal>&lt;session-factory&gt;</TT>&#65292;&#36890;&#24120;&#25226;&#23427;&#20204;&#25918;&#22312;&#22810;&#20010;&#37197;&#32622;&#25991;&#20214;&#20013;&#65288;&#20026;&#20102;&#26356;&#23481;&#26131;&#21551;&#21160;&#65289;&#12290; </P>
<P>&#26368;&#24320;&#22987;&#30340;4&#20010;<TT class=literal>property</TT>&#20803;&#32032;&#21253;&#21547;&#24517;&#35201;&#30340;JDBC&#36830;&#25509;&#20449;&#24687;&#12290;&#26041;&#35328;&#65288;dialect&#65289;&#30340;<TT 
class=literal>property</TT>&#20803;&#32032;&#25351;&#26126;Hibernate 
&#29983;&#25104;&#30340;&#29305;&#23450;SQL&#21464;&#37327;&#12290;&#20320;&#24456;&#24555;&#20250;&#30475;&#21040;&#65292;Hibernate&#23545;&#25345;&#20037;&#21270;&#19978;&#19979;&#25991;&#30340;&#33258;&#21160;session&#31649;&#29702;&#23601;&#20250;&#27966;&#19978;&#29992;&#22330;&#12290; &#25171;&#24320;<TT 
class=literal>hbm2ddl.auto</TT>&#36873;&#39033;&#23558;&#33258;&#21160;&#29983;&#25104;&#25968;&#25454;&#24211;&#27169;&#24335;&#65288;schema&#65289;&#65293; 
&#30452;&#25509;&#21152;&#20837;&#25968;&#25454;&#24211;&#20013;&#12290;&#24403;&#28982;&#36825;&#20010;&#36873;&#39033;&#20063;&#21487;&#20197;&#34987;&#20851;&#38381;&#65288;&#36890;&#36807;&#21435;&#38500;&#36825;&#20010;&#37197;&#32622;&#36873;&#39033;&#65289;&#25110;&#32773;&#36890;&#36807;Ant&#20219;&#21153;<TT 
class=literal>SchemaExport</TT>&#30340;&#24110;&#21161;&#26469;&#25226;&#25968;&#25454;&#24211;schema&#37325;&#23450;&#21521;&#21040;&#25991;&#20214;&#20013;&#12290;&#26368;&#21518;&#65292;&#22312;&#37197;&#32622;&#20013;&#20026;&#25345;&#20037;&#21270;&#31867;&#21152;&#20837;&#26144;&#23556;&#25991;&#20214;&#12290; </P>
<P>&#25226;&#36825;&#20010;&#25991;&#20214;&#25335;&#36125;&#21040;&#28304;&#20195;&#30721;&#30446;&#24405;&#19979;&#38754;&#65292;&#36825;&#26679;&#23427;&#23601;&#20301;&#20110;classpath&#30340;&#26681;&#30446;&#24405;&#30340;&#26368;&#21518;&#12290;Hibernate&#22312;&#21551;&#21160;&#26102;&#20250;&#33258;&#21160;&#22312;classpath&#30340;&#26681;&#30446;&#24405;&#26597;&#25214;&#21517;&#20026;<TT 
class=literal>hibernate.cfg.xml</TT>&#30340;&#37197;&#32622;&#25991;&#20214;&#12290; </P></DIV>
<DIV lang=zh-cn class=sect2>
<DIV class=titlepage>
<DIV>
<DIV>
<H3 class=title><A name=tutorial-firstapp-ant></A>1.2.4.&nbsp; &#29992;Ant&#26500;&#24314; 
</H3></DIV></DIV>
<DIV></DIV></DIV>
<P>&#29616;&#22312;&#25105;&#20204;&#29992;Ant&#26469;&#26500;&#24314;&#24212;&#29992;&#31243;&#24207;&#12290;&#20320;&#24517;&#39035;&#20808;&#23433;&#35013;Ant&#65293;&#21487;&#20197;&#20174;<A href="http://ant.apache.org/bindownload.cgi" 
target=_top>Ant &#19979;&#36733;&#39029;&#38754;</A>&#24471;&#21040;&#23427;&#12290;&#24590;&#26679;&#23433;&#35013;Ant&#23601;&#19981;&#22312;&#36825;&#37324;&#20171;&#32461;&#20102;&#65292;&#35831;&#21442;&#32771;<A 
href="http://ant.apache.org/manual/index.html" target=_top>Ant 
&#29992;&#25143;&#25163;&#20876;</A>&#12290;&#24403;&#20320;&#23433;&#35013;&#23436;&#20102;Ant&#65292;&#23601;&#21487;&#20197;&#24320;&#22987;&#21019;&#24314;<TT class=literal>build.xml</TT>&#25991;&#20214;&#65292;&#25226;&#23427;&#30452;&#25509;&#25918;&#22312;&#24320;&#21457;&#30446;&#24405;&#19979;&#38754;&#12290; </P>
<P>&#19968;&#20010;&#31616;&#21333;&#30340;build&#25991;&#20214;&#30475;&#36215;&#26469;&#20687;&#36825;&#26679;&#65306; </P><PRE class=programlisting>&lt;project name="hibernate-tutorial" default="compile"&gt;

    &lt;property name="sourcedir" value="${basedir}/src"/&gt;
    &lt;property name="targetdir" value="${basedir}/bin"/&gt;
    &lt;property name="librarydir" value="${basedir}/lib"/&gt;

    &lt;path id="libraries"&gt;
        &lt;fileset dir="${librarydir}"&gt;
            &lt;include name="*.jar"/&gt;
        &lt;/fileset&gt;
    &lt;/path&gt;

    &lt;target name="clean"&gt;
        &lt;delete dir="${targetdir}"/&gt;
        &lt;mkdir dir="${targetdir}"/&gt;
    &lt;/target&gt;

    &lt;target name="compile" depends="clean, copy-resources"&gt;
      &lt;javac srcdir="${sourcedir}"
             destdir="${targetdir}"
             classpathref="libraries"/&gt;
    &lt;/target&gt;

    &lt;target name="copy-resources"&gt;
        &lt;copy todir="${targetdir}"&gt;
            &lt;fileset dir="${sourcedir}"&gt;
                &lt;exclude name="**/*.java"/&gt;
            &lt;/fileset&gt;
        &lt;/copy&gt;
    &lt;/target&gt;

&lt;/project&gt;</PRE>
<P>&#36825;&#23558;&#21578;&#35785;Ant&#25226;&#25152;&#26377;&#22312;lib&#30446;&#24405;&#19979;&#20197;<TT 
class=literal>.jar</TT>&#32467;&#23614;&#30340;&#25991;&#20214;&#25335;&#36125;&#21040;classpath&#20013;&#20197;&#20379;&#32534;&#35793;&#20043;&#29992;&#12290;&#23427;&#20063;&#25226;&#25152;&#26377;&#30340;&#38750;Java&#28304;&#20195;&#30721;&#25991;&#20214;&#65292;&#20363;&#22914;&#37197;&#32622;&#21644;Hibernate&#26144;&#23556;&#25991;&#20214;&#65292;&#25335;&#36125;&#21040;&#30446;&#26631;&#30446;&#24405;&#12290;&#22914;&#26524;&#20320;&#29616;&#22312;&#36816;&#34892;Ant&#65292;&#20250;&#24471;&#21040;&#20197;&#19979;&#36755;&#20986;&#65306; 
</P><PRE class=programlisting>C:\hibernateTutorial\&gt;ant
Buildfile: build.xml

copy-resources:
     [copy] Copying 2 files to C:\hibernateTutorial\bin

compile:
    [javac] Compiling 1 source file to C:\hibernateTutorial\bin

BUILD SUCCESSFUL
Total time: 1 second </PRE></DIV>
<DIV lang=zh-cn class=sect2>
<DIV class=titlepage>
<DIV>
<DIV>
<H3 class=title><A name=tutorial-firstapp-helpers></A>1.2.5.&nbsp; &#21551;&#21160;&#21644;&#36741;&#21161;&#31867; 
</H3></DIV></DIV>
<DIV></DIV></DIV>
<P>&#26159;&#26102;&#20505;&#26469;&#21152;&#36733;&#21644;&#20648;&#23384;&#19968;&#20123;<TT 
class=literal>Event</TT>&#23545;&#35937;&#20102;&#65292;&#20294;&#39318;&#20808;&#25105;&#20204;&#24471;&#32534;&#20889;&#19968;&#20123;&#22522;&#30784;&#30340;&#20195;&#30721;&#20197;&#23436;&#25104;&#35774;&#32622;&#12290;&#25105;&#20204;&#24517;&#39035;&#21551;&#21160;Hibernate&#65292;&#27492;&#36807;&#31243;&#21253;&#25324;&#21019;&#24314;&#19968;&#20010;&#20840;&#23616;&#30340;<TT 
class=literal>SessoinFactory</TT>&#65292;&#24182;&#25226;&#23427;&#20648;&#23384;&#22312;&#24212;&#29992;&#31243;&#24207;&#20195;&#30721;&#23481;&#26131;&#35775;&#38382;&#30340;&#22320;&#26041;&#12290;<TT 
class=literal>SessionFactory</TT>&#21487;&#20197;&#21019;&#24314;&#24182;&#25171;&#24320;&#26032;&#30340;<TT class=literal>Session</TT>&#12290;&#19968;&#20010;<TT 
class=literal>Session</TT>&#20195;&#34920;&#19968;&#20010;&#21333;&#32447;&#31243;&#30340;&#21333;&#20803;&#25805;&#20316;&#65292;<TT 
class=literal>SessionFactory</TT>&#21017;&#26159;&#20010;&#32447;&#31243;&#23433;&#20840;&#30340;&#20840;&#23616;&#23545;&#35937;&#65292;&#21482;&#38656;&#35201;&#34987;&#23454;&#20363;&#21270;&#19968;&#27425;&#12290; </P>
<P>&#25105;&#20204;&#23558;&#21019;&#24314;&#19968;&#20010;<TT class=literal>HibernateUtil</TT>&#36741;&#21161;&#31867;&#65288;helper 
class&#65289;&#26469;&#36127;&#36131;&#21551;&#21160;Hibernate&#21644;&#26356;&#26041;&#20415;&#22320;&#25805;&#20316;<TT class=literal>SessionFactory</TT>&#12290;&#35753;&#25105;&#20204;&#26469;&#30475;&#19968;&#19979;&#23427;&#30340;&#23454;&#29616;&#65306; 
</P><PRE class=programlisting>package util;

import org.hibernate.*;
import org.hibernate.cfg.*;

public class HibernateUtil {

    private static final SessionFactory sessionFactory;

    static {
        try {
            // Create the SessionFactory from hibernate.cfg.xml
            sessionFactory = new Configuration().configure().buildSessionFactory();
        } catch (Throwable ex) {
            // Make sure you log the exception, as it might be swallowed
            System.err.println("Initial SessionFactory creation failed." + ex);
            throw new ExceptionInInitializerError(ex);
        }
    }

    public static SessionFactory getSessionFactory() {
        return sessionFactory;
    }

}</PRE>
<P>&#36825;&#20010;&#31867;&#19981;&#20294;&#22312;&#23427;&#30340;&#38745;&#24577;&#21021;&#22987;&#21270;&#36807;&#31243;&#65288;&#20165;&#24403;&#21152;&#36733;&#36825;&#20010;&#31867;&#30340;&#26102;&#20505;&#34987;JVM&#25191;&#34892;&#19968;&#27425;&#65289;&#20013;&#20135;&#29983;&#20840;&#23616;&#30340;<TT 
class=literal>SessionFactory</TT>&#65292;&#32780;&#19988;&#38544;&#34255;&#20102;&#23427;&#20351;&#29992;&#20102;&#38745;&#24577;singleton&#30340;&#20107;&#23454;&#12290;&#23427;&#20063;&#21487;&#33021;&#22312;&#24212;&#29992;&#31243;&#24207;&#26381;&#21153;&#22120;&#20013;&#30340;JNDI&#26597;&#25214;<TT 
class=literal>SessionFactory</TT>&#12290; </P>
<P>&#22914;&#26524;&#20320;&#22312;&#37197;&#32622;&#25991;&#20214;&#20013;&#32473;<TT class=literal>SessionFactory</TT>&#19968;&#20010;&#21517;&#23383;&#65292;&#22312;<TT 
class=literal>SessionFactory</TT>&#21019;&#24314;&#21518;&#65292;Hibernate&#20250;&#35797;&#30528;&#25226;&#23427;&#32465;&#23450;&#21040;JNDI&#12290;&#35201;&#23436;&#20840;&#36991;&#20813;&#36825;&#26679;&#30340;&#20195;&#30721;&#65292;&#20320;&#20063;&#21487;&#20197;&#20351;&#29992;JMX&#37096;&#32626;&#65292;&#35753;&#20855;&#26377;JMX&#33021;&#21147;&#30340;&#23481;&#22120;&#26469;&#23454;&#20363;&#21270;<TT 
class=literal>HibernateService</TT>&#24182;&#25226;&#23427;&#32465;&#23450;&#21040;JNDI&#12290;&#36825;&#20123;&#39640;&#32423;&#21487;&#36873;&#39033;&#22312;&#21518;&#38754;&#30340;&#31456;&#33410;&#20013;&#20250;&#35752;&#35770;&#21040;&#12290; </P>
<P>&#25226;<TT class=literal>HibernateUtil.java</TT>&#25918;&#22312;&#24320;&#21457;&#30446;&#24405;&#30340;&#28304;&#20195;&#30721;&#36335;&#24452;&#19979;&#65292;&#19982;&#25918;<TT 
class=literal>events</TT>&#30340;&#21253;&#24182;&#21015;&#65306; </P><PRE class=programlisting>.
+lib
  &lt;Hibernate and third-party libraries&gt;
+src
  +events
    Event.java
    Event.hbm.xml
  +util
    HibernateUtil.java
  hibernate.cfg.xml
+data
build.xml</PRE>
<P>&#20877;&#27425;&#32534;&#35793;&#36825;&#20010;&#24212;&#29992;&#31243;&#24207;&#24212;&#35813;&#19981;&#20250;&#26377;&#38382;&#39064;&#12290;&#26368;&#21518;&#25105;&#20204;&#38656;&#35201;&#37197;&#32622;&#19968;&#20010;&#26085;&#24535;&#65288;logging)&#31995;&#32479; &#65293; Hibernate&#20351;&#29992;&#36890;&#29992;&#26085;&#24535;&#25509;&#21475;&#65292;&#20801;&#35768;&#20320;&#22312;Log4j&#21644;JDK 
1.4 &#26085;&#24535;&#20043;&#38388;&#36827;&#34892;&#36873;&#25321;&#12290;&#22810;&#25968;&#24320;&#21457;&#32773;&#26356;&#21916;&#27426;Log4j&#65306;&#20174;Hibernate&#30340;&#21457;&#24067;&#21253;&#20013;&#65288;&#23427;&#22312;<TT 
class=literal>etc/</TT>&#30446;&#24405;&#19979;&#65289;&#25335;&#36125;<TT class=literal>log4j.properties</TT>&#21040;&#20320;&#30340;<TT 
class=literal>src</TT>&#30446;&#24405;&#65292;&#19982;<TT 
class=literal>hibernate.cfg.xml</TT>.&#25918;&#22312;&#19968;&#36215;&#12290;&#30475;&#19968;&#19979;&#37197;&#32622;&#31034;&#20363;&#65292;&#22914;&#26524;&#20320;&#24076;&#26395;&#30475;&#21040;&#26356;&#21152;&#35814;&#32454;&#30340;&#36755;&#20986;&#20449;&#24687;&#65292;&#20320;&#21487;&#20197;&#20462;&#25913;&#37197;&#32622;&#12290;&#40664;&#35748;&#24773;&#20917;&#19979;&#65292;&#21482;&#26377;Hibernate&#30340;&#21551;&#21160;&#20449;&#24687;&#25165;&#20250;&#26174;&#31034;&#22312;&#26631;&#20934;&#36755;&#20986;&#19978;&#12290; 
</P>
<P>&#31034;&#20363;&#30340;&#22522;&#26412;&#26694;&#26550;&#23436;&#25104;&#20102; &#65293; &#29616;&#22312;&#25105;&#20204;&#21487;&#20197;&#29992;Hibernate&#26469;&#20570;&#20123;&#30495;&#27491;&#30340;&#24037;&#20316;&#12290; </P></DIV>
<DIV lang=zh-cn class=sect2>
<DIV class=titlepage>
<DIV>
<DIV>
<H3 class=title><A name=tutorial-firstapp-workingpersistence></A>1.2.6.&nbsp; 
&#21152;&#36733;&#24182;&#23384;&#20648;&#23545;&#35937; </H3></DIV></DIV>
<DIV></DIV></DIV>
<P>&#25105;&#20204;&#32456;&#20110;&#21487;&#20197;&#20351;&#29992;Hibernate&#26469;&#21152;&#36733;&#21644;&#23384;&#20648;&#23545;&#35937;&#20102;&#65292;&#32534;&#20889;&#19968;&#20010;&#24102;&#26377;<TT class=literal>main()</TT>&#26041;&#27861;&#30340;<TT 
class=literal>EventManager</TT>&#31867;&#65306; </P><PRE class=programlisting>package events;
import org.hibernate.Session;

import java.util.Date;

import util.HibernateUtil;

public class EventManager {

    public static void main(String[] args) {
        EventManager mgr = new EventManager();

        if (args[0].equals("store")) {
            mgr.createAndStoreEvent("My Event", new Date());
        }

        HibernateUtil.getSessionFactory().close();
    }

    private void createAndStoreEvent(String title, Date theDate) {

        Session session = HibernateUtil.getSessionFactory().getCurrentSession();

        session.beginTransaction();

        Event theEvent = new Event();
        theEvent.setTitle(title);
        theEvent.setDate(theDate);

        session.save(theEvent);

        session.getTransaction().commit();
    }

}</PRE>
<P>&#25105;&#20204;&#21019;&#24314;&#20102;&#20010;&#26032;&#30340;<TT 
class=literal>Event</TT>&#23545;&#35937;&#24182;&#25226;&#23427;&#20256;&#36882;&#32473;Hibernate&#12290;&#29616;&#22312;Hibernate&#36127;&#36131;&#19982;SQL&#25171;&#20132;&#36947;&#65292;&#24182;&#25226;<TT 
class=literal>INSERT</TT>&#21629;&#20196;&#20256;&#32473;&#25968;&#25454;&#24211;&#12290;&#22312;&#36816;&#34892;&#20043;&#21069;&#65292;&#35753;&#25105;&#20204;&#30475;&#19968;&#19979;&#22788;&#29702;<TT 
class=literal>Session</TT>&#21644;<TT class=literal>Transaction</TT>&#30340;&#20195;&#30721;&#12290; </P>
<P>&#19968;&#20010;<TT class=literal>Session</TT>&#23601;&#26159;&#20010;&#21333;&#19968;&#30340;&#24037;&#20316;&#21333;&#20803;&#12290;&#25105;&#20204;&#26242;&#26102;&#35753;&#20107;&#24773;&#31616;&#21333;&#19968;&#20123;&#65292;&#24182;&#20551;&#35774;Hibernate<TT 
class=literal>Session</TT>&#21644;&#25968;&#25454;&#24211;&#20107;&#21153;&#26159;&#19968;&#19968;&#23545;&#24212;&#30340;&#12290;&#20026;&#20102;&#35753;&#25105;&#20204;&#30340;&#20195;&#30721;&#20174;&#24213;&#23618;&#30340;&#20107;&#21153;&#31995;&#32479;&#20013;&#33073;&#31163;&#20986;&#26469;&#65288;&#27492;&#20363;&#20013;&#26159;JDBC&#65292;&#20294;&#20063;&#21487;&#33021;&#26159;JTA&#65289;&#65292;&#25105;&#20204;&#20351;&#29992;Hibernate 
<TT class=literal>Session</TT>&#20013;&#30340;<TT class=literal>Transaction</TT> API&#12290; </P>
<P><TT class=literal>sessionFactory.getCurrentSession()</TT>&#26159;&#24178;&#20160;&#20040;&#30340;&#21602;&#65311;&#39318;&#20808;&#65292;&#21482;&#35201;&#20320;&#25345;&#26377;<TT 
class=literal>SessionFactory</TT>&#65288;&#24184;&#20111;&#25105;&#20204;&#26377;<TT 
class=literal>HibernateUtil</TT>&#65292;&#21487;&#20197;&#38543;&#26102;&#33719;&#24471;&#65289;&#65292;&#22823;&#21487;&#22312;&#20219;&#20309;&#26102;&#20505;&#12289;&#20219;&#20309;&#22320;&#28857;&#35843;&#29992;&#36825;&#20010;&#26041;&#27861;&#12290;<TT 
class=literal>getCurrentSession()</TT>&#26041;&#27861;&#24635;&#20250;&#36820;&#22238;“&#24403;&#21069;&#30340;”&#24037;&#20316;&#21333;&#20803;&#12290;&#35760;&#24471;&#25105;&#20204;&#22312;<TT 
class=literal>hibernate.cfg.xml</TT>&#20013;&#25226;&#36825;&#19968;&#37197;&#32622;&#36873;&#39033;&#35843;&#25972;&#20026;"thread"&#20102;&#21527;&#65311;&#22240;&#27492;&#65292;&#24403;&#21069;&#24037;&#20316;&#21333;&#20803;&#30340;&#33539;&#22260;&#23601;&#26159;&#24403;&#21069;&#25191;&#34892;&#25105;&#20204;&#24212;&#29992;&#31243;&#24207;&#30340;Java&#32447;&#31243;&#12290;&#20294;&#26159;&#65292;&#36825;&#24182;&#38750;&#24635;&#26159;&#27491;&#30830;&#30340;&#12290; 
<TT class=literal>Session</TT>&#22312;&#31532;&#19968;&#27425;&#34987;&#20351;&#29992;&#30340;&#26102;&#20505;,&#25110;&#32773;&#31532;&#19968;&#27425;&#35843;&#29992;<TT 
class=literal>getCurrentSession()</TT>&#30340;&#26102;&#20505;,&#20854;&#29983;&#21629;&#21608;&#26399;&#23601;&#24320;&#22987;&#12290;&#28982;&#21518;&#23427;&#34987;Hibernate&#32465;&#23450;&#21040;&#24403;&#21069;&#32447;&#31243;&#12290;&#24403;&#20107;&#21153;&#32467;&#26463;&#30340;&#26102;&#20505;&#65292;&#19981;&#31649;&#26159;&#25552;&#20132;&#36824;&#26159;&#22238;&#28378;&#65292;Hibernate&#20063;&#20250;&#25226;<TT 
class=literal>Session</TT>&#20174;&#24403;&#21069;&#32447;&#31243;&#21093;&#31163;&#65292;&#24182;&#19988;&#20851;&#38381;&#23427;&#12290;&#20551;&#33509;&#20320;&#20877;&#27425;&#35843;&#29992;<TT 
class=literal>getCurrentSession()</TT>&#65292;&#20320;&#20250;&#24471;&#21040;&#19968;&#20010;&#26032;&#30340;<TT 
class=literal>Session</TT>&#65292;&#24182;&#19988;&#24320;&#22987;&#19968;&#20010;&#26032;&#30340;&#24037;&#20316;&#21333;&#20803;&#12290;&#36825;&#31181;<SPAN 
class=emphasis><EM>&#32447;&#31243;&#32465;&#23450;(thread-bound)</EM></SPAN>&#30340;&#32534;&#31243;&#27169;&#22411;&#65288;model&#65289;&#26159;&#20351;&#29992;Hibernate&#30340;&#26368;&#24191;&#27867;&#30340;&#26041;&#24335;&#12290; 
</P>
<P>&#20851;&#20110;&#20107;&#21153;&#22788;&#29702;&#21450;&#20107;&#21153;&#36793;&#30028;&#30028;&#23450;&#30340;&#35814;&#32454;&#20449;&#24687;&#65292;&#35831;&#21442;&#30475;<A title=&#31532;&nbsp;11&nbsp;&#31456;&nbsp;&#20107;&#21153;&#21644;&#24182;&#21457; 
href="transactions.html">&#31532;&nbsp;11&nbsp;&#31456; 
<I>&#20107;&#21153;&#21644;&#24182;&#21457;</I></A>&#12290;&#22312;&#19978;&#38754;&#30340;&#20363;&#23376;&#20013;&#65292;&#25105;&#20204;&#20063;&#24573;&#30053;&#20102;&#25152;&#26377;&#30340;&#38169;&#35823;&#19982;&#22238;&#28378;&#30340;&#22788;&#29702;&#12290; </P>
<P>&#20026;&#31532;&#19968;&#27425;&#36816;&#34892;&#25105;&#20204;&#30340;&#31243;&#24207;&#65292;&#25105;&#20204;&#24471;&#22312;Ant&#30340;build&#25991;&#20214;&#20013;&#22686;&#21152;&#19968;&#20010;&#21487;&#20197;&#35843;&#29992;&#24471;&#21040;&#30340;target&#12290; </P><PRE class=programlisting>&lt;target name="run" depends="compile"&gt;
    &lt;java fork="true" classname="events.EventManager" classpathref="libraries"&gt;
        &lt;classpath path="${targetdir}"/&gt;
        &lt;arg value="${action}"/&gt;
    &lt;/java&gt;
&lt;/target&gt;</PRE>
<P><TT class=literal>action</TT>&#21442;&#25968;&#65288;argument&#65289;&#30340;&#20540;&#26159;&#36890;&#36807;&#21629;&#20196;&#34892;&#35843;&#29992;&#36825;&#20010;target&#30340;&#26102;&#20505;&#35774;&#32622;&#30340;&#65306; </P><PRE class=programlisting>C:\hibernateTutorial\&gt;ant run -Daction=store</PRE>
<P>&#20320;&#24212;&#35813;&#20250;&#30475;&#21040;&#65292;&#32534;&#35793;&#20197;&#21518;&#65292;Hibernate&#26681;&#25454;&#20320;&#30340;&#37197;&#32622;&#21551;&#21160;&#65292;&#24182;&#20135;&#29983;&#19968;&#22823;&#22534;&#30340;&#36755;&#20986;&#26085;&#24535;&#12290;&#22312;&#26085;&#24535;&#26368;&#21518;&#20320;&#20250;&#30475;&#21040;&#19979;&#38754;&#36825;&#34892;&#65306; </P><PRE class=programlisting>[java] Hibernate: insert into EVENTS (EVENT_DATE, title, EVENT_ID) values (?, ?, ?)</PRE>
<P>&#36825;&#26159;Hibernate&#25191;&#34892;&#30340;<TT 
class=literal>INSERT</TT>&#21629;&#20196;&#65292;&#38382;&#21495;&#20195;&#34920;JDBC&#30340;&#32465;&#23450;&#21442;&#25968;&#12290;&#22914;&#26524;&#24819;&#35201;&#30475;&#21040;&#32465;&#23450;&#21442;&#25968;&#30340;&#20540;&#25110;&#32773;&#20943;&#23569;&#26085;&#24535;&#30340;&#38271;&#24230;&#65292;&#23601;&#35201;&#35843;&#25972;&#20320;&#22312;<TT 
class=literal>log4j.properties</TT>&#25991;&#20214;&#37324;&#30340;&#35774;&#32622;&#12290; </P>
<P>&#25105;&#20204;&#24819;&#35201;&#21015;&#20986;&#25152;&#26377;&#24050;&#32463;&#34987;&#23384;&#20648;&#30340;events&#65292;&#23601;&#35201;&#22686;&#21152;&#19968;&#20010;&#26465;&#20214;&#20998;&#25903;&#36873;&#39033;&#21040;main&#26041;&#27861;&#20013;&#21435;&#12290; </P><PRE class=programlisting>if (args[0].equals("store")) {
    mgr.createAndStoreEvent("My Event", new Date());
}
else if (args[0].equals("list")) {
    List events = mgr.listEvents();
    for (int i = 0; i &lt; events.size(); i++) {
        Event theEvent = (Event) events.get(i);
        System.out.println("Event: " + theEvent.getTitle() +
                           " Time: " + theEvent.getDate());
    }
}</PRE>
<P>&#25105;&#20204;&#20063;&#22686;&#21152;&#19968;&#20010;&#26032;&#30340;<TT class=literal>listEvents()</TT>&#26041;&#27861;: </P><PRE class=programlisting>private List listEvents() {

    Session session = HibernateUtil.getSessionFactory().getCurrentSession();

    session.beginTransaction();

    List result = session.createQuery("from Event").list();

    session.getTransaction().commit();

    return result;
}</PRE>
<P>&#25105;&#20204;&#22312;&#36825;&#37324;&#26159;&#29992;&#19968;&#20010;HQL&#65288;Hibernate Query Language&#65293;Hibernate&#26597;&#35810;&#35821;&#35328;&#65289;&#26597;&#35810;&#35821;&#21477;&#26469;&#20174;&#25968;&#25454;&#24211;&#20013;&#21152;&#36733;&#25152;&#26377;&#23384;&#22312;&#30340;<TT 
class=literal>Event</TT>&#23545;&#35937;&#12290;Hibernate&#20250;&#29983;&#25104;&#36866;&#24403;&#30340;SQL&#65292;&#25226;&#23427;&#21457;&#36865;&#21040;&#25968;&#25454;&#24211;&#65292;&#24182;&#25805;&#20316;&#20174;&#26597;&#35810;&#24471;&#21040;&#25968;&#25454;&#30340;<TT 
class=literal>Event</TT>&#23545;&#35937;&#12290;&#24403;&#28982;&#65292;&#20320;&#21487;&#20197;&#20351;&#29992;HQL&#26469;&#21019;&#24314;&#26356;&#21152;&#22797;&#26434;&#30340;&#26597;&#35810;&#12290; </P>
<P>&#29616;&#22312;&#65292;&#26681;&#25454;&#20197;&#19979;&#27493;&#39588;&#26469;&#25191;&#34892;&#24182;&#27979;&#35797;&#20197;&#19978;&#21508;&#39033;&#65306; </P>
<DIV class=itemizedlist>
<UL type=disc>
  <LI>
  <P>&#36816;&#34892;<TT class=literal>ant run 
  -Daction=store</TT>&#26469;&#20445;&#23384;&#19968;&#20123;&#20869;&#23481;&#21040;&#25968;&#25454;&#24211;&#12290;&#24403;&#28982;&#65292;&#20808;&#24471;&#29992;hbm2ddl&#26469;&#29983;&#25104;&#25968;&#25454;&#24211;schema&#12290; </P>
  <LI>
  <P>&#29616;&#22312;&#25226;<TT 
  class=literal>hibernate.cfg.xml</TT>&#25991;&#20214;&#20013;hbm2ddl&#23646;&#24615;&#27880;&#37322;&#25481;&#65292;&#36825;&#26679;&#25105;&#20204;&#23601;&#21462;&#28040;&#20102;&#22312;&#21551;&#21160;&#26102;&#29992;hbm2ddl&#26469;&#29983;&#25104;&#25968;&#25454;&#24211;schema&#12290;&#36890;&#24120;&#21482;&#26377;&#22312;&#19981;&#26029;&#37325;&#22797;&#36827;&#34892;&#21333;&#20803;&#27979;&#35797;&#30340;&#26102;&#20505;&#25165;&#38656;&#35201;&#25171;&#24320;&#23427;&#65292;&#20294;&#20877;&#27425;&#36816;&#34892;hbm2ddl&#20250;&#25226;&#20320;&#20445;&#23384;&#30340;&#19968;&#20999;&#37117;&#21024;&#25481;&#65288;<SPAN 
  class=emphasis><EM>drop</EM></SPAN>&#65289;——<TT 
  class=literal>create</TT>&#37197;&#32622;&#30340;&#30495;&#23454;&#21547;&#20041;&#26159;&#65306;“&#22312;&#21019;&#24314;SessionFactory&#30340;&#26102;&#20505;&#65292;&#20174;schema &#20013;drop 
  &#25481;&#25152;&#26377;&#30340;&#34920;&#65292;&#20877;&#37325;&#26032;&#21019;&#24314;&#23427;&#20204;”&#12290; </P></LI></UL></DIV>
<P>&#22914;&#26524;&#20320;&#29616;&#22312;&#20351;&#29992;&#21629;&#20196;&#34892;&#21442;&#25968;<TT 
class=literal>-Daction=list</TT>&#36816;&#34892;Ant&#65292;&#20320;&#20250;&#30475;&#21040;&#37027;&#20123;&#33267;&#20170;&#20026;&#27490;&#25105;&#20204;&#25152;&#20648;&#23384;&#30340;events&#12290;&#24403;&#28982;&#65292;&#20320;&#20063;&#21487;&#20197;&#22810;&#35843;&#29992;&#20960;&#27425;<TT 
class=literal>store</TT>&#20197;&#20445;&#23384;&#26356;&#22810;&#30340;envents&#12290; </P>
<P>&#27880;&#24847;&#65292;&#24456;&#22810;Hibernate&#26032;&#25163;&#22312;&#36825;&#19968;&#27493;&#20250;&#22833;&#36133;&#65292;&#25105;&#20204;&#19981;&#26102;&#30475;&#21040;&#20851;&#20110;<SPAN class=emphasis><EM>Table not 
found</EM></SPAN>&#38169;&#35823;&#20449;&#24687;&#30340;&#25552;&#38382;&#12290;&#20294;&#26159;&#65292;&#21482;&#35201;&#20320;&#26681;&#25454;&#19978;&#38754;&#25551;&#36848;&#30340;&#27493;&#39588;&#26469;&#25191;&#34892;&#65292;&#23601;&#19981;&#20250;&#26377;&#36825;&#20010;&#38382;&#39064;&#65292;&#22240;&#20026;hbm2ddl&#20250;&#22312;&#31532;&#19968;&#27425;&#36816;&#34892;&#30340;&#26102;&#20505;&#21019;&#24314;&#25968;&#25454;&#24211;schema&#65292;&#21518;&#32487;&#30340;&#24212;&#29992;&#31243;&#24207;&#37325;&#36215;&#21518;&#36824;&#33021;&#32487;&#32493;&#20351;&#29992;&#36825;&#20010;schema&#12290;&#20551;&#33509;&#20320;&#20462;&#25913;&#20102;&#26144;&#23556;&#65292;&#25110;&#32773;&#20462;&#25913;&#20102;&#25968;&#25454;&#24211;schema&#65292;&#20320;&#24517;&#39035;&#25226;hbm2ddl&#37325;&#26032;&#25171;&#24320;&#19968;&#27425;&#12290; 
</P></DIV></DIV>
<DIV lang=zh-cn class=sect1>
<DIV class=titlepage>
<DIV>
<DIV>
<H2 class=title style="CLEAR: both"><A name=tutorial-associations></A>1.3.&nbsp; 
&#31532;&#20108;&#37096;&#20998; &#65293; &#20851;&#32852;&#26144;&#23556; </H2></DIV></DIV>
<DIV></DIV></DIV>
<P>&#25105;&#20204;&#24050;&#32463;&#26144;&#23556;&#20102;&#19968;&#20010;&#25345;&#20037;&#21270;&#23454;&#20307;&#31867;&#21040;&#34920;&#19978;&#12290;&#35753;&#25105;&#20204;&#22312;&#36825;&#20010;&#22522;&#30784;&#19978;&#22686;&#21152;&#19968;&#20123;&#31867;&#20043;&#38388;&#30340;&#20851;&#32852;&#12290;&#39318;&#20808;&#25105;&#20204;&#24448;&#24212;&#29992;&#31243;&#24207;&#37324;&#22686;&#21152;&#20154;&#65288;people&#65289;&#30340;&#27010;&#24565;&#65292;&#24182;&#23384;&#20648;&#20182;&#20204;&#25152;&#21442;&#19982;&#30340;&#19968;&#20010;Event&#21015;&#34920;&#12290;&#65288;&#35793;&#32773;&#27880;&#65306;&#19982;Event&#19968;&#26679;&#65292;&#25105;&#20204;&#22312;&#21518;&#38754;&#23558;&#30452;&#25509;&#20351;&#29992;person&#26469;&#34920;&#31034;“&#20154;”&#32780;&#19981;&#26159;&#23427;&#30340;&#20013;&#25991;&#32763;&#35793;&#65289; 
</P>
<DIV lang=zh-cn class=sect2>
<DIV class=titlepage>
<DIV>
<DIV>
<H3 class=title><A name=tutorial-associations-mappinguser></A>1.3.1.&nbsp; 
&#26144;&#23556;Person&#31867; </H3></DIV></DIV>
<DIV></DIV></DIV>
<P>&#26368;&#21021;&#31616;&#21333;&#30340;<TT class=literal>Person</TT>&#31867;&#65306; </P><PRE class=programlisting>package events;

public class Person {

    private Long id;
    private int age;
    private String firstname;
    private String lastname;

    public Person() {}

    // Accessor methods for all properties, private setter for 'id'

}</PRE>
<P>&#21019;&#24314;&#19968;&#20010;&#21517;&#20026;<TT class=literal>Person.hbm.xml</TT>&#30340;&#26032;&#26144;&#23556;&#25991;&#20214;&#65288;&#21035;&#24536;&#20102;&#26368;&#19978;&#38754;&#30340;DTD&#24341;&#29992;&#65289;&#65306; </P><PRE class=programlisting>&lt;hibernate-mapping&gt;

    &lt;class name="events.Person" table="PERSON"&gt;
        &lt;id name="id" column="PERSON_ID"&gt;
            &lt;generator class="native"/&gt;
        &lt;/id&gt;
        &lt;property name="age"/&gt;
        &lt;property name="firstname"/&gt;
        &lt;property name="lastname"/&gt;
    &lt;/class&gt;

&lt;/hibernate-mapping&gt;</PRE>
<P>&#26368;&#21518;&#65292;&#25226;&#26032;&#30340;&#26144;&#23556;&#21152;&#20837;&#21040;Hibernate&#30340;&#37197;&#32622;&#20013;&#65306; </P><PRE class=programlisting>&lt;mapping resource="events/Event.hbm.xml"/&gt;
&lt;mapping resource="events/Person.hbm.xml"/&gt;</PRE>
<P>&#29616;&#22312;&#25105;&#20204;&#22312;&#36825;&#20004;&#20010;&#23454;&#20307;&#20043;&#38388;&#21019;&#24314;&#19968;&#20010;&#20851;&#32852;&#12290;&#26174;&#28982;&#65292;persons&#21487;&#20197;&#21442;&#19982;&#19968;&#31995;&#21015;events&#65292;&#32780;events&#20063;&#26377;&#19981;&#21516;&#30340;&#21442;&#21152;&#32773;&#65288;persons&#65289;&#12290;&#25105;&#20204;&#38656;&#35201;&#22788;&#29702;&#30340;&#35774;&#35745;&#38382;&#39064;&#26159;&#20851;&#32852;&#26041;&#21521;&#65288;directionality&#65289;&#65292;&#38454;&#25968;&#65288;multiplicity&#65289;&#21644;&#38598;&#21512;&#65288;collection&#65289;&#30340;&#34892;&#20026;&#12290; 
</P></DIV>
<DIV lang=zh-cn class=sect2>
<DIV class=titlepage>
<DIV>
<DIV>
<H3 class=title><A name=tutorial-associations-unidirset></A>1.3.2.&nbsp; 
&#21333;&#21521;Set-based&#30340;&#20851;&#32852; </H3></DIV></DIV>
<DIV></DIV></DIV>
<P>&#25105;&#20204;&#23558;&#21521;<TT class=literal>Person</TT>&#31867;&#22686;&#21152;&#19968;&#36830;&#20018;&#30340;events&#12290;&#37027;&#26679;&#65292;&#36890;&#36807;&#35843;&#29992;<TT 
class=literal>aPerson.getEvents()</TT>&#65292;&#23601;&#21487;&#20197;&#36731;&#26494;&#22320;&#23548;&#33322;&#21040;&#29305;&#23450;person&#25152;&#21442;&#19982;&#30340;events&#65292;&#32780;&#19981;&#29992;&#21435;&#25191;&#34892;&#19968;&#20010;&#26174;&#24335;&#30340;&#26597;&#35810;&#12290;&#25105;&#20204;&#20351;&#29992;Java&#30340;&#38598;&#21512;&#31867;&#65288;collection&#65289;&#65306;<TT 
class=literal>Set</TT>&#65292;&#22240;&#20026;set &#19981;&#21253;&#21547;&#37325;&#22797;&#30340;&#20803;&#32032;&#21450;&#19982;&#25105;&#20204;&#26080;&#20851;&#30340;&#25490;&#24207;&#12290; </P>
<P>&#25105;&#20204;&#38656;&#35201;&#29992;set &#23454;&#29616;&#19968;&#20010;&#21333;&#21521;&#22810;&#20540;&#20851;&#32852;&#12290;&#35753;&#25105;&#20204;&#22312;Java&#31867;&#37324;&#20026;&#36825;&#20010;&#20851;&#32852;&#32534;&#30721;&#65292;&#25509;&#30528;&#26144;&#23556;&#23427;&#65306; </P><PRE class=programlisting>public class Person {

    private Set events = new HashSet();

    public Set getEvents() {
        return events;
    }

    public void setEvents(Set events) {
        this.events = events;
    }
}</PRE>
<P>&#22312;&#26144;&#23556;&#36825;&#20010;&#20851;&#32852;&#20043;&#21069;&#65292;&#20808;&#32771;&#34385;&#19968;&#19979;&#27492;&#20851;&#32852;&#30340;&#21478;&#22806;&#19968;&#31471;&#12290;&#24456;&#26174;&#28982;&#65292;&#25105;&#20204;&#21487;&#20197;&#20445;&#25345;&#36825;&#20010;&#20851;&#32852;&#26159;&#21333;&#21521;&#30340;&#12290;&#25110;&#32773;&#65292;&#25105;&#20204;&#21487;&#20197;&#22312;<TT 
class=literal>Event</TT>&#37324;&#21019;&#24314;&#21478;&#22806;&#19968;&#20010;&#38598;&#21512;&#65292;&#22914;&#26524;&#24076;&#26395;&#33021;&#22815;&#21452;&#21521;&#22320;&#23548;&#33322;&#65292;&#22914;&#65306;<TT 
class=literal>anEvent.getParticipants()</TT>&#12290;&#20174;&#21151;&#33021;&#30340;&#35282;&#24230;&#26469;&#35828;&#65292;&#36825;&#24182;&#19981;&#26159;&#24517;&#39035;&#30340;&#12290;&#22240;&#20026;&#20320;&#24635;&#21487;&#20197;&#26174;&#24335;&#22320;&#25191;&#34892;&#19968;&#20010;&#26597;&#35810;&#65292;&#20197;&#33719;&#24471;&#26576;&#20010;&#29305;&#23450;event&#30340;&#25152;&#26377;&#21442;&#19982;&#32773;&#12290;&#36825;&#26159;&#20010;&#22312;&#35774;&#35745;&#26102;&#38656;&#35201;&#20570;&#20986;&#30340;&#36873;&#25321;&#65292;&#23436;&#20840;&#30001;&#20320;&#26469;&#20915;&#23450;&#65292;&#20294;&#27492;&#35752;&#35770;&#20013;&#20851;&#20110;&#20851;&#32852;&#30340;&#38454;&#25968;&#26159;&#28165;&#26970;&#30340;&#65306;&#21363;&#20004;&#31471;&#37117;&#26159;“&#22810;”&#20540;&#30340;&#65292;&#25105;&#20204;&#25226;&#23427;&#21483;&#20570;<SPAN 
class=emphasis><EM>&#22810;&#23545;&#22810;(many-to-many)</EM></SPAN>&#20851;&#32852;&#12290;&#22240;&#32780;&#65292;&#25105;&#20204;&#20351;&#29992;Hibernate&#30340;&#22810;&#23545;&#22810;&#26144;&#23556;&#65306; </P><PRE class=programlisting>&lt;class name="events.Person" table="PERSON"&gt;
    &lt;id name="id" column="PERSON_ID"&gt;
        &lt;generator class="native"/&gt;
    &lt;/id&gt;
    &lt;property name="age"/&gt;
    &lt;property name="firstname"/&gt;
    &lt;property name="lastname"/&gt;

    &lt;set name="events" table="PERSON_EVENT"&gt;
        &lt;key column="PERSON_ID"/&gt;
        &lt;many-to-many column="EVENT_ID" class="events.Event"/&gt;
    &lt;/set&gt;

&lt;/class&gt;</PRE>
<P>Hibernate&#25903;&#25345;&#21508;&#31181;&#21508;&#26679;&#30340;&#38598;&#21512;&#26144;&#23556;&#65292;<TT 
class=literal>&lt;set&gt;</TT>&#20351;&#29992;&#30340;&#26368;&#20026;&#26222;&#36941;&#12290;&#23545;&#20110;&#22810;&#23545;&#22810;&#20851;&#32852;&#65288;&#25110;&#21483;<SPAN 
class=emphasis><EM>n:m</EM></SPAN>&#23454;&#20307;&#20851;&#31995;&#65289;, &#38656;&#35201;&#19968;&#20010;&#20851;&#32852;&#34920;&#65288;association table&#65289;&#12290;<TT 
class=literal>&#34920;</TT>&#37324;&#38754;&#30340;&#27599;&#19968;&#34892;&#20195;&#34920;&#20174;person&#21040;event&#30340;&#19968;&#20010;&#20851;&#32852;&#12290;&#34920;&#21517;&#26159;&#30001;<TT 
class=literal>set</TT>&#20803;&#32032;&#30340;<TT 
class=literal>table</TT>&#23646;&#24615;&#37197;&#32622;&#30340;&#12290;&#20851;&#32852;&#37324;&#38754;&#30340;&#26631;&#35782;&#31526;&#23383;&#27573;&#21517;&#65292;&#23545;&#20110;person&#30340;&#19968;&#31471;&#65292;&#26159;&#30001;<TT 
class=literal>&lt;key&gt;</TT>&#20803;&#32032;&#23450;&#20041;&#65292;&#32780;event&#19968;&#31471;&#30340;&#23383;&#27573;&#21517;&#26159;&#30001;<TT 
class=literal>&lt;many-to-many&gt;</TT>&#20803;&#32032;&#30340;<TT 
class=literal>column</TT>&#23646;&#24615;&#23450;&#20041;&#12290;&#20320;&#20063;&#24517;&#39035;&#21578;&#35785;Hibernate&#38598;&#21512;&#20013;&#23545;&#35937;&#30340;&#31867;&#65288;&#20063;&#23601;&#26159;&#20301;&#20110;&#36825;&#20010;&#38598;&#21512;&#25152;&#20195;&#34920;&#30340;&#20851;&#32852;&#21478;&#22806;&#19968;&#31471;&#30340;&#31867;&#65289;&#12290; 
</P>
<P>&#22240;&#32780;&#36825;&#20010;&#26144;&#23556;&#30340;&#25968;&#25454;&#24211;schema&#26159;&#65306; </P><PRE class=programlisting>    _____________        __________________
   |             |      |                  |       _____________
   |   EVENTS    |      |   PERSON_EVENT   |      |             |
   |_____________|      |__________________|      |    PERSON   |
   |             |      |                  |      |_____________|
   | *EVENT_ID   | &lt;--&gt; | *EVENT_ID        |      |             |
   |  EVENT_DATE |      | *PERSON_ID       | &lt;--&gt; | *PERSON_ID  |
   |  TITLE      |      |__________________|      |  AGE        |
   |_____________|                                |  FIRSTNAME  |
                                                  |  LASTNAME   |
                                                  |_____________|
 </PRE></DIV>
<DIV lang=zh-cn class=sect2>
<DIV class=titlepage>
<DIV>
<DIV>
<H3 class=title><A name=tutorial-associations-working></A>1.3.3.&nbsp; &#20351;&#20851;&#32852;&#24037;&#20316; 
</H3></DIV></DIV>
<DIV></DIV></DIV>
<P>&#25105;&#20204;&#25226;&#19968;&#20123;people&#21644;events &#19968;&#36215;&#25918;&#21040;<TT class=literal>EventManager</TT>&#30340;&#26032;&#26041;&#27861;&#20013;&#65306; </P><PRE class=programlisting>private void addPersonToEvent(Long personId, Long eventId) {

    Session session = HibernateUtil.getSessionFactory().getCurrentSession();
    session.beginTransaction();

    Person aPerson = (Person) session.load(Person.class, personId);
    Event anEvent = (Event) session.load(Event.class, eventId);

    aPerson.getEvents().add(anEvent);

    session.getTransaction().commit();
}</PRE>
<P>&#22312;&#21152;&#36733;&#19968;<TT class=literal>Person</TT>&#21644;<TT 
class=literal>Event</TT>&#21518;&#65292;&#20351;&#29992;&#26222;&#36890;&#30340;&#38598;&#21512;&#26041;&#27861;&#23601;&#21487;&#23481;&#26131;&#22320;&#20462;&#25913;&#25105;&#20204;&#23450;&#20041;&#30340;&#38598;&#21512;&#12290;&#22914;&#20320;&#25152;&#35265;&#65292;&#27809;&#26377;&#26174;&#24335;&#30340;<TT 
class=literal>update()</TT>&#25110;<TT 
class=literal>save()</TT>&#65292;Hibernate&#20250;&#33258;&#21160;&#26816;&#27979;&#21040;&#38598;&#21512;&#24050;&#32463;&#34987;&#20462;&#25913;&#24182;&#38656;&#35201;&#26356;&#26032;&#22238;&#25968;&#25454;&#24211;&#12290;&#36825;&#21483;&#20570;&#33258;&#21160;&#33039;&#26816;&#26597;&#65288;<SPAN 
class=emphasis><EM>automatic dirty 
checking</EM></SPAN>&#65289;&#65292;&#20320;&#20063;&#21487;&#20197;&#23581;&#35797;&#20462;&#25913;&#20219;&#20309;&#23545;&#35937;&#30340;name&#25110;&#32773;date&#23646;&#24615;&#65292;&#21482;&#35201;&#20182;&#20204;&#22788;&#20110;<SPAN 
class=emphasis><EM>&#25345;&#20037;&#21270;</EM></SPAN>&#29366;&#24577;&#65292;&#20063;&#23601;&#26159;&#34987;&#32465;&#23450;&#21040;&#26576;&#20010;Hibernate &#30340;<TT 
class=literal>Session</TT>&#19978;&#65288;&#22914;&#65306;&#20182;&#20204;&#21018;&#21018;&#22312;&#19968;&#20010;&#21333;&#20803;&#25805;&#20316;&#34987;&#21152;&#36733;&#25110;&#32773;&#20445;&#23384;&#65289;&#65292;Hibernate&#30417;&#35270;&#20219;&#20309;&#25913;&#21464;&#24182;&#22312;&#21518;&#21488;&#38544;&#24335;&#20889;&#30340;&#26041;&#24335;&#25191;&#34892;SQL&#12290;&#21516;&#27493;&#20869;&#23384;&#29366;&#24577;&#21644;&#25968;&#25454;&#24211;&#30340;&#36807;&#31243;&#65292;&#36890;&#24120;&#21482;&#22312;&#21333;&#20803;&#25805;&#20316;&#32467;&#26463;&#30340;&#26102;&#20505;&#21457;&#29983;&#65292;&#31216;&#27492;&#36807;&#31243;&#20026;&#28165;&#29702;&#32531;&#23384;<SPAN 
class=emphasis><EM>&#65288;flushing&#65289;</EM></SPAN>&#12290;&#22312;&#25105;&#20204;&#30340;&#20195;&#30721;&#20013;&#65292;&#24037;&#20316;&#21333;&#20803;&#30001;&#25968;&#25454;&#24211;&#20107;&#21153;&#30340;&#25552;&#20132;&#65288;&#25110;&#32773;&#22238;&#28378;&#65289;&#26469;&#32467;&#26463;——&#36825;&#26159;&#30001;<TT 
class=literal>CurrentSessionContext</TT>&#31867;&#30340;<TT class=literal>thread</TT>&#37197;&#32622;&#36873;&#39033;&#23450;&#20041;&#30340;&#12290; 
</P>
<P>&#24403;&#28982;&#65292;&#20320;&#20063;&#21487;&#20197;&#22312;&#19981;&#21516;&#30340;&#21333;&#20803;&#25805;&#20316;&#37324;&#38754;&#21152;&#36733;person&#21644;event&#12290;&#25110;&#22312;<TT 
class=literal>Session</TT>&#20197;&#22806;&#20462;&#25913;&#19981;&#26159;&#22788;&#22312;&#25345;&#20037;&#21270;&#65288;persistent&#65289;&#29366;&#24577;&#19979;&#30340;&#23545;&#35937;&#65288;&#22914;&#26524;&#35813;&#23545;&#35937;&#20197;&#21069;&#26366;&#32463;&#34987;&#25345;&#20037;&#21270;&#65292;&#37027;&#20040;&#25105;&#20204;&#31216;&#36825;&#20010;&#29366;&#24577;&#20026;<SPAN 
class=emphasis><EM>&#33073;&#31649;&#65288;detached&#65289;</EM></SPAN>&#65289;&#12290;&#20320;&#29978;&#33267;&#21487;&#20197;&#22312;&#19968;&#20010;&#38598;&#21512;&#34987;&#33073;&#31649;&#26102;&#20462;&#25913;&#23427;&#65306; </P><PRE class=programlisting>private void addPersonToEvent(Long personId, Long eventId) {

    Session session = HibernateUtil.getSessionFactory().getCurrentSession();
    session.beginTransaction();

    Person aPerson = (Person) session
            .createQuery("select p from Person p left join fetch p.events where p.id = :pid")
            .setParameter("pid", personId)
            .uniqueResult(); // Eager fetch the collection so we can use it detached

    Event anEvent = (Event) session.load(Event.class, eventId);

    session.getTransaction().commit();

    // End of first unit of work

    aPerson.getEvents().add(anEvent); // aPerson (and its collection) is detached

    // Begin second unit of work

    Session session2 = HibernateUtil.getSessionFactory().getCurrentSession();
    session2.beginTransaction();

    session2.update(aPerson); // Reattachment of aPerson

    session2.getTransaction().commit();
}</PRE>
<P>&#23545;<TT 
class=literal>update</TT>&#30340;&#35843;&#29992;&#20351;&#19968;&#20010;&#33073;&#31649;&#23545;&#35937;&#37325;&#26032;&#25345;&#20037;&#21270;&#65292;&#20320;&#21487;&#20197;&#35828;&#23427;&#34987;&#32465;&#23450;&#21040;&#19968;&#20010;&#26032;&#30340;&#21333;&#20803;&#25805;&#20316;&#19978;&#65292;&#25152;&#20197;&#22312;&#33073;&#31649;&#29366;&#24577;&#19979;&#23545;&#23427;&#25152;&#20570;&#30340;&#20219;&#20309;&#20462;&#25913;&#37117;&#20250;&#34987;&#20445;&#23384;&#21040;&#25968;&#25454;&#24211;&#37324;&#12290;&#36825;&#20063;&#21253;&#25324;&#20320;&#23545;&#36825;&#20010;&#23454;&#20307;&#23545;&#35937;&#30340;&#38598;&#21512;&#25152;&#20316;&#30340;&#20219;&#20309;&#25913;&#21160;&#65288;&#22686;&#21152;/&#21024;&#38500;&#65289;&#12290; 
</P>
<P>&#36825;&#23545;&#25105;&#20204;&#24403;&#21069;&#30340;&#24773;&#24418;&#19981;&#26159;&#24456;&#26377;&#29992;&#65292;&#20294;&#23427;&#26159;&#38750;&#24120;&#37325;&#35201;&#30340;&#27010;&#24565;&#65292;&#20320;&#21487;&#20197;&#25226;&#23427;&#34701;&#20837;&#21040;&#20320;&#33258;&#24049;&#30340;&#24212;&#29992;&#31243;&#24207;&#35774;&#35745;&#20013;&#12290;&#22312;<TT 
class=literal>EventManager</TT>&#30340;main&#26041;&#27861;&#20013;&#28155;&#21152;&#19968;&#20010;&#26032;&#30340;&#21160;&#20316;&#65292;&#24182;&#20174;&#21629;&#20196;&#34892;&#36816;&#34892;&#23427;&#26469;&#23436;&#25104;&#25105;&#20204;&#25152;&#20570;&#30340;&#32451;&#20064;&#12290;&#22914;&#26524;&#20320;&#38656;&#35201;person&#21450;event&#30340;&#26631;&#35782;&#31526; 
— &#37027;&#23601;&#29992;<TT class=literal>save()</TT>&#26041;&#27861;&#36820;&#22238;&#23427;&#65288;&#20320;&#21487;&#33021;&#38656;&#35201;&#20462;&#25913;&#21069;&#38754;&#30340;&#19968;&#20123;&#26041;&#27861;&#26469;&#36820;&#22238;&#37027;&#20010;&#26631;&#35782;&#31526;&#65289;&#65306; </P><PRE class=programlisting>else if (args[0].equals("addpersontoevent")) {
    Long eventId = mgr.createAndStoreEvent("My Event", new Date());
    Long personId = mgr.createAndStorePerson("Foo", "Bar");
    mgr.addPersonToEvent(personId, eventId);
    System.out.println("Added person " + personId + " to event " + eventId);</PRE>
<P>&#19978;&#38754;&#26159;&#20010;&#20851;&#20110;&#20004;&#20010;&#21516;&#31561;&#37325;&#35201;&#30340;&#23454;&#20307;&#31867;&#38388;&#20851;&#32852;&#30340;&#20363;&#23376;&#12290;&#20687;&#21069;&#38754;&#25152;&#25552;&#21040;&#30340;&#37027;&#26679;&#65292;&#22312;&#29305;&#23450;&#30340;&#27169;&#22411;&#20013;&#20063;&#23384;&#22312;&#20854;&#23427;&#30340;&#31867;&#21644;&#31867;&#22411;&#65292;&#36825;&#20123;&#31867;&#21644;&#31867;&#22411;&#36890;&#24120;&#26159;“&#27425;&#35201;&#30340;”&#12290;&#20320;&#24050;&#30475;&#21040;&#36807;&#20854;&#20013;&#30340;&#19968;&#20123;&#65292;&#20687;<TT 
class=literal>int</TT>&#25110;<TT class=literal>String</TT>&#12290;&#25105;&#20204;&#31216;&#36825;&#20123;&#31867;&#20026;<SPAN 
class=emphasis><EM>&#20540;&#31867;&#22411;&#65288;value type&#65289;</EM></SPAN>&#65292;&#23427;&#20204;&#30340;&#23454;&#20363;<SPAN 
class=emphasis><EM>&#20381;&#36182;&#65288;depend&#65289;</EM></SPAN>&#22312;&#26576;&#20010;&#29305;&#23450;&#30340;&#23454;&#20307;&#19978;&#12290;&#36825;&#20123;&#31867;&#22411;&#30340;&#23454;&#20363;&#27809;&#26377;&#23427;&#20204;&#33258;&#24049;&#30340;&#26631;&#35782;&#65288;identity&#65289;&#65292;&#20063;&#19981;&#33021;&#22312;&#23454;&#20307;&#38388;&#34987;&#20849;&#20139;&#65288;&#27604;&#22914;&#65292;&#20004;&#20010;person&#19981;&#33021;&#24341;&#29992;&#21516;&#19968;&#20010;<TT 
class=literal>firstname</TT>&#23545;&#35937;&#65292;&#21363;&#20351;&#20182;&#20204;&#26377;&#30456;&#21516;&#30340;first 
name&#65289;&#12290;&#24403;&#28982;&#65292;&#20540;&#31867;&#22411;&#24182;&#19981;&#20165;&#20165;&#22312;JDK&#20013;&#23384;&#22312;&#65288;&#20107;&#23454;&#19978;&#65292;&#22312;&#19968;&#20010;Hibernate&#24212;&#29992;&#31243;&#24207;&#20013;&#65292;&#25152;&#26377;&#30340;JDK&#31867;&#37117;&#34987;&#35270;&#20026;&#20540;&#31867;&#22411;&#65289;&#65292;&#32780;&#19988;&#20320;&#20063;&#21487;&#20197;&#32534;&#20889;&#20320;&#33258;&#24049;&#30340;&#20381;&#36182;&#31867;&#65292;&#20363;&#22914;<TT 
class=literal>Address</TT>&#65292;<TT class=literal>MonetaryAmount</TT>&#12290; </P>
<P>&#20320;&#20063;&#21487;&#20197;&#35774;&#35745;&#19968;&#20010;&#20540;&#31867;&#22411;&#30340;&#38598;&#21512;&#65292;&#36825;&#22312;&#27010;&#24565;&#19978;&#19982;&#24341;&#29992;&#20854;&#23427;&#23454;&#20307;&#30340;&#38598;&#21512;&#26377;&#24456;&#22823;&#30340;&#19981;&#21516;&#65292;&#20294;&#26159;&#22312;Java&#37324;&#38754;&#30475;&#36215;&#26469;&#20960;&#20046;&#26159;&#19968;&#26679;&#30340;&#12290; </P></DIV>
<DIV lang=zh-cn class=sect2>
<DIV class=titlepage>
<DIV>
<DIV>
<H3 class=title><A name=tutorial-associations-valuecollections></A>1.3.4.&nbsp; 
&#20540;&#31867;&#22411;&#30340;&#38598;&#21512; </H3></DIV></DIV>
<DIV></DIV></DIV>
<P>&#25105;&#20204;&#25226;&#19968;&#20010;&#20540;&#31867;&#22411;&#23545;&#35937;&#30340;&#38598;&#21512;&#21152;&#20837;<TT class=literal>Person</TT>&#23454;&#20307;&#20013;&#12290;&#25105;&#20204;&#24076;&#26395;&#20445;&#23384;email&#22320;&#22336;&#65292;&#25152;&#20197;&#20351;&#29992;<TT 
class=literal>String</TT>&#31867;&#22411;&#65292;&#32780;&#19988;&#36825;&#27425;&#30340;&#38598;&#21512;&#31867;&#22411;&#21448;&#26159;<TT class=literal>Set</TT>&#65306; </P><PRE class=programlisting>private Set emailAddresses = new HashSet();

public Set getEmailAddresses() {
    return emailAddresses;
}

public void setEmailAddresses(Set emailAddresses) {
    this.emailAddresses = emailAddresses;
}</PRE>
<P>&#36825;&#20010;<TT class=literal>Set</TT>&#30340;&#26144;&#23556; </P><PRE class=programlisting>&lt;set name="emailAddresses" table="PERSON_EMAIL_ADDR"&gt;
    &lt;key column="PERSON_ID"/&gt;
    &lt;element type="string" column="EMAIL_ADDR"/&gt;
&lt;/set&gt;</PRE>
<P>&#27604;&#36739;&#36825;&#27425;&#21644;&#27492;&#21069;&#26144;&#23556;&#30340;&#24046;&#21035;&#65292;&#20027;&#35201;&#22312;&#20110;<TT 
class=literal>element</TT>&#37096;&#20998;&#65292;&#36825;&#27425;&#24182;&#27809;&#26377;&#21253;&#21547;&#23545;&#20854;&#23427;&#23454;&#20307;&#24341;&#29992;&#30340;&#38598;&#21512;&#65292;&#32780;&#26159;&#20803;&#32032;&#31867;&#22411;&#20026;<TT 
class=literal>String</TT>&#30340;&#38598;&#21512;&#65288;&#22312;&#26144;&#23556;&#20013;&#20351;&#29992;&#23567;&#20889;&#30340;&#21517;&#23383;”string“&#26159;&#21521;&#20320;&#34920;&#26126;&#23427;&#26159;&#19968;&#20010;Hibernate&#30340;&#26144;&#23556;&#31867;&#22411;&#25110;&#32773;&#31867;&#22411;&#36716;&#25442;&#22120;&#65289;&#12290;&#21644;&#20043;&#21069;&#19968;&#26679;&#65292;<TT 
class=literal>set</TT>&#20803;&#32032;&#30340;<TT class=literal>table</TT>&#23646;&#24615;&#20915;&#23450;&#20102;&#29992;&#20110;&#38598;&#21512;&#30340;&#34920;&#21517;&#12290;<TT 
class=literal>key</TT>&#20803;&#32032;&#23450;&#20041;&#20102;&#22312;&#38598;&#21512;&#34920;&#20013;&#22806;&#38190;&#30340;&#23383;&#27573;&#21517;&#12290;<TT class=literal>element</TT>&#20803;&#32032;&#30340;<TT 
class=literal>column</TT>&#23646;&#24615;&#23450;&#20041;&#29992;&#20110;&#23454;&#38469;&#20445;&#23384;<TT class=literal>String</TT>&#20540;&#30340;&#23383;&#27573;&#21517;&#12290; </P>
<P>&#30475;&#19968;&#19979;&#20462;&#25913;&#21518;&#30340;&#25968;&#25454;&#24211;schema&#12290; </P><PRE class=programlisting>  _____________        __________________
 |             |      |                  |       _____________
 |   EVENTS    |      |   PERSON_EVENT   |      |             |       ___________________
 |_____________|      |__________________|      |    PERSON   |      |                   |
 |             |      |                  |      |_____________|      | PERSON_EMAIL_ADDR |
 | *EVENT_ID   | &lt;--&gt; | *EVENT_ID        |      |             |      |___________________|
 |  EVENT_DATE |      | *PERSON_ID       | &lt;--&gt; | *PERSON_ID  | &lt;--&gt; |  *PERSON_ID       |
 |  TITLE      |      |__________________|      |  AGE        |      |  *EMAIL_ADDR      |
 |_____________|                                |  FIRSTNAME  |      |___________________|
                                                |  LASTNAME   |
                                                |_____________|
 </PRE>
<P>&#20320;&#21487;&#20197;&#30475;&#21040;&#38598;&#21512;&#34920;&#30340;&#20027;&#38190;&#23454;&#38469;&#19978;&#26159;&#20010;&#22797;&#21512;&#20027;&#38190;&#65292;&#21516;&#26102;&#20351;&#29992;&#20102;2&#20010;&#23383;&#27573;&#12290;&#36825;&#20063;&#26263;&#31034;&#20102;&#23545;&#20110;&#21516;&#19968;&#20010;person&#19981;&#33021;&#26377;&#37325;&#22797;&#30340;email&#22320;&#22336;&#65292;&#36825;&#27491;&#26159;Java&#37324;&#38754;&#20351;&#29992;Set&#26102;&#20505;&#25152;&#38656;&#35201;&#30340;&#35821;&#20041;&#65288;Set&#37324;&#20803;&#32032;&#19981;&#33021;&#37325;&#22797;&#65289;&#12290; 
</P>
<P>&#20320;&#29616;&#22312;&#21487;&#20197;&#35797;&#30528;&#25226;&#20803;&#32032;&#21152;&#20837;&#21040;&#36825;&#20010;&#38598;&#21512;&#65292;&#23601;&#20687;&#25105;&#20204;&#22312;&#20043;&#21069;&#20851;&#32852;person&#21644;event&#30340;&#37027;&#26679;&#12290;&#20854;&#23454;&#29616;&#30340;Java&#20195;&#30721;&#26159;&#30456;&#21516;&#30340;&#65306; </P><PRE class=programlisting>private void addEmailToPerson(Long personId, String emailAddress) {

    Session session = HibernateUtil.getSessionFactory().getCurrentSession();
    session.beginTransaction();

    Person aPerson = (Person) session.load(Person.class, personId);

    // The getEmailAddresses() might trigger a lazy load of the collection
    aPerson.getEmailAddresses().add(emailAddress);

    session.getTransaction().commit();
}</PRE>
<P>&#36825;&#27425;&#25105;&#20204;&#27809;&#26377;&#20351;&#29992;<SPAN 
class=emphasis><EM>fetch</EM></SPAN>&#26597;&#35810;&#26469;&#21021;&#22987;&#21270;&#38598;&#21512;&#12290;&#22240;&#27492;&#65292;&#35843;&#29992;&#20854;getter&#26041;&#27861;&#20250;&#35302;&#21457;&#21478;&#19968;&#38468;&#21152;&#30340;select&#26469;&#21021;&#22987;&#21270;&#38598;&#21512;&#65292;&#36825;&#26679;&#25105;&#20204;&#25165;&#33021;&#25226;&#20803;&#32032;&#28155;&#21152;&#36827;&#21435;&#12290;&#26816;&#26597;SQL 
log&#65292;&#35797;&#30528;&#36890;&#36807;&#39044;&#20808;&#25235;&#21462;&#26469;&#20248;&#21270;&#23427;&#12290; </P></DIV>
<DIV lang=zh-cn class=sect2>
<DIV class=titlepage>
<DIV>
<DIV>
<H3 class=title><A name=tutorial-associations-bidirectional></A>1.3.5.&nbsp; 
&#21452;&#21521;&#20851;&#32852; </H3></DIV></DIV>
<DIV></DIV></DIV>
<P>&#25509;&#19979;&#26469;&#25105;&#20204;&#23558;&#26144;&#23556;&#21452;&#21521;&#20851;&#32852;&#65288;bi-directional association&#65289;&#65293; 
&#22312;Java&#37324;&#35753;person&#21644;event&#21487;&#20197;&#20174;&#20851;&#32852;&#30340;&#20219;&#20309;&#19968;&#31471;&#35775;&#38382;&#21478;&#19968;&#31471;&#12290;&#24403;&#28982;&#65292;&#25968;&#25454;&#24211;schema&#27809;&#26377;&#25913;&#21464;&#65292;&#25105;&#20204;&#20173;&#28982;&#38656;&#35201;&#22810;&#23545;&#22810;&#30340;&#38454;&#25968;&#12290;&#19968;&#20010;&#20851;&#31995;&#22411;&#25968;&#25454;&#24211;&#35201;&#27604;&#32593;&#32476;&#32534;&#31243;&#35821;&#35328; 
&#26356;&#21152;&#28789;&#27963;&#65292;&#25152;&#20197;&#23427;&#24182;&#19981;&#38656;&#35201;&#20219;&#20309;&#20687;&#23548;&#33322;&#26041;&#21521;&#65288;navigation direction&#65289;&#30340;&#19996;&#35199; &#65293; &#25968;&#25454;&#21487;&#20197;&#29992;&#20219;&#20309;&#21487;&#33021;&#30340;&#26041;&#24335;&#36827;&#34892;&#26597;&#30475;&#21644;&#33719;&#21462;&#12290; </P>
<P>&#39318;&#20808;&#65292;&#25226;&#19968;&#20010;&#21442;&#19982;&#32773;&#65288;person&#65289;&#30340;&#38598;&#21512;&#21152;&#20837;<TT class=literal>Event</TT>&#31867;&#20013;&#65306; </P><PRE class=programlisting>private Set participants = new HashSet();

public Set getParticipants() {
    return participants;
}

public void setParticipants(Set participants) {
    this.participants = participants;
}</PRE>
<P>&#22312;<TT class=literal>Event.hbm.xml</TT>&#37324;&#38754;&#20063;&#26144;&#23556;&#36825;&#20010;&#20851;&#32852;&#12290; </P><PRE class=programlisting>&lt;set name="participants" table="PERSON_EVENT" inverse="true"&gt;
    &lt;key column="EVENT_ID"/&gt;
    &lt;many-to-many column="PERSON_ID" class="events.Person"/&gt;
&lt;/set&gt;</PRE>
<P>&#22914;&#20320;&#25152;&#35265;&#65292;&#20004;&#20010;&#26144;&#23556;&#25991;&#20214;&#37324;&#37117;&#26377;&#26222;&#36890;&#30340;<TT class=literal>set</TT>&#26144;&#23556;&#12290;&#27880;&#24847;&#22312;&#20004;&#20010;&#26144;&#23556;&#25991;&#20214;&#20013;&#65292;&#20114;&#25442;&#20102;<TT 
class=literal>key</TT>&#21644;<TT class=literal>many-to-many</TT>&#30340;&#23383;&#27573;&#21517;&#12290;&#36825;&#37324;&#26368;&#37325;&#35201;&#30340;&#26159;<TT 
class=literal>Event</TT>&#26144;&#23556;&#25991;&#20214;&#37324;&#22686;&#21152;&#20102;<TT class=literal>set</TT>&#20803;&#32032;&#30340;<TT 
class=literal>inverse="true"</TT>&#23646;&#24615;&#12290; </P>
<P>&#36825;&#24847;&#21619;&#30528;&#22312;&#38656;&#35201;&#30340;&#26102;&#20505;&#65292;Hibernate&#33021;&#22312;&#20851;&#32852;&#30340;&#21478;&#19968;&#31471; &#65293; <TT 
class=literal>Person</TT>&#31867;&#24471;&#21040;&#20004;&#20010;&#23454;&#20307;&#38388;&#20851;&#32852;&#30340;&#20449;&#24687;&#12290;&#36825;&#23558;&#20250;&#26497;&#22823;&#22320;&#24110;&#21161;&#20320;&#29702;&#35299;&#21452;&#21521;&#20851;&#32852;&#26159;&#22914;&#20309;&#22312;&#20004;&#20010;&#23454;&#20307;&#38388;&#34987;&#21019;&#24314;&#30340;&#12290; </P></DIV>
<DIV lang=zh-cn class=sect2>
<DIV class=titlepage>
<DIV>
<DIV>
<H3 class=title><A name=tutorial-associations-usingbidir></A>1.3.6.&nbsp; &#20351;&#21452;&#21521;&#36830;&#36215;&#26469; 
</H3></DIV></DIV>
<DIV></DIV></DIV>
<P>&#39318;&#20808;&#35831;&#35760;&#20303;&#65292;Hibernate&#24182;&#19981;&#24433;&#21709;&#36890;&#24120;&#30340;Java&#35821;&#20041;&#12290; &#22312;&#21333;&#21521;&#20851;&#32852;&#30340;&#20363;&#23376;&#20013;&#65292;&#25105;&#20204;&#26159;&#24590;&#26679;&#22312;<TT 
class=literal>Person</TT>&#21644;<TT class=literal>Event</TT>&#20043;&#38388;&#21019;&#24314;&#32852;&#31995;&#30340;&#65311;&#25105;&#20204;&#25226;<TT 
class=literal>Event</TT>&#23454;&#20363;&#28155;&#21152;&#21040;<TT 
class=literal>Person</TT>&#23454;&#20363;&#20869;&#30340;event&#24341;&#29992;&#38598;&#21512;&#37324;&#12290;&#22240;&#27492;&#24456;&#26174;&#28982;&#65292;&#22914;&#26524;&#25105;&#20204;&#35201;&#35753;&#36825;&#20010;&#20851;&#32852;&#21487;&#20197;&#21452;&#21521;&#22320;&#24037;&#20316;&#65292;&#25105;&#20204;&#38656;&#35201;&#22312;&#21478;&#22806;&#19968;&#31471;&#20570;&#21516;&#26679;&#30340;&#20107;&#24773; 
&#65293; &#25226;<TT class=literal>Person</TT>&#23454;&#20363;&#21152;&#20837;<TT 
class=literal>Event</TT>&#31867;&#20869;&#30340;Person&#24341;&#29992;&#38598;&#21512;&#12290;&#36825;“&#22312;&#20851;&#32852;&#30340;&#20004;&#31471;&#35774;&#32622;&#32852;&#31995;”&#26159;&#23436;&#20840;&#24517;&#35201;&#30340;&#32780;&#19988;&#20320;&#37117;&#24471;&#36825;&#20040;&#20570;&#12290; </P>
<P>&#35768;&#22810;&#24320;&#21457;&#20154;&#21592;&#38450;&#24481;&#24335;&#22320;&#32534;&#31243;&#65292;&#21019;&#24314;&#31649;&#29702;&#20851;&#32852;&#30340;&#26041;&#27861;&#26469;&#20445;&#35777;&#27491;&#30830;&#30340;&#35774;&#32622;&#20102;&#20851;&#32852;&#30340;&#20004;&#31471;&#65292;&#27604;&#22914;&#22312;<TT class=literal>Person</TT>&#37324;&#65306; </P><PRE class=programlisting>protected Set getEvents() {
    return events;
}

protected void setEvents(Set events) {
    this.events = events;
}

public void addToEvent(Event event) {
    this.getEvents().add(event);
    event.getParticipants().add(this);
}

public void removeFromEvent(Event event) {
    this.getEvents().remove(event);
    event.getParticipants().remove(this);
}</PRE>
<P>&#27880;&#24847;&#29616;&#22312;&#23545;&#20110;&#38598;&#21512;&#30340;get&#21644;set&#26041;&#27861;&#30340;&#35775;&#38382;&#32423;&#21035;&#26159;protected - 
&#36825;&#20801;&#35768;&#22312;&#20301;&#20110;&#21516;&#19968;&#20010;&#21253;&#65288;package&#65289;&#20013;&#30340;&#31867;&#20197;&#21450;&#32487;&#25215;&#33258;&#36825;&#20010;&#31867;&#30340;&#23376;&#31867;&#21487;&#20197;&#35775;&#38382;&#36825;&#20123;&#26041;&#27861;&#65292;&#20294;&#31105;&#27490;&#20854;&#20182;&#20219;&#20309;&#20154;&#30340;&#30452;&#25509;&#35775;&#38382;&#65292;&#36991;&#20813;&#20102;&#38598;&#21512;&#20869;&#23481;&#30340;&#28151;&#20081;&#12290;&#20320;&#24212;&#23613;&#21487;&#33021;&#22320;&#22312;&#21478;&#19968;&#31471;&#20063;&#25226;&#38598;&#21512;&#30340;&#35775;&#38382;&#32423;&#21035;&#35774;&#25104;protected&#12290; 
</P>
<P><TT 
class=literal>inverse</TT>&#26144;&#23556;&#23646;&#24615;&#31350;&#31455;&#34920;&#31034;&#20160;&#20040;&#21602;&#65311;&#23545;&#20110;&#20320;&#21644;Java&#26469;&#35828;&#65292;&#19968;&#20010;&#21452;&#21521;&#20851;&#32852;&#20165;&#20165;&#26159;&#22312;&#20004;&#31471;&#31616;&#21333;&#22320;&#27491;&#30830;&#35774;&#32622;&#24341;&#29992;&#12290;&#28982;&#32780;&#65292;Hibernate&#24182;&#27809;&#26377;&#36275;&#22815;&#30340;&#20449;&#24687;&#21435;&#27491;&#30830;&#22320;&#25191;&#34892;<TT 
class=literal>INSERT</TT>&#21644;<TT 
class=literal>UPDATE</TT>&#35821;&#21477;&#65288;&#20197;&#36991;&#20813;&#36829;&#21453;&#25968;&#25454;&#24211;&#32422;&#26463;&#65289;&#65292;&#25152;&#20197;&#23427;&#38656;&#35201;&#19968;&#20123;&#24110;&#21161;&#26469;&#27491;&#30830;&#30340;&#22788;&#29702;&#21452;&#21521;&#20851;&#32852;&#12290;&#25226;&#20851;&#32852;&#30340;&#19968;&#31471;&#35774;&#32622;&#20026;<TT 
class=literal>inverse</TT>&#23558;&#21578;&#35785;Hibernate&#24573;&#30053;&#20851;&#32852;&#30340;&#36825;&#19968;&#31471;&#65292;&#25226;&#36825;&#31471;&#30475;&#25104;&#26159;&#21478;&#22806;&#19968;&#31471;&#30340;&#19968;&#20010;<SPAN 
class=emphasis><EM>&#38236;&#35937;&#65288;mirror&#65289;</EM></SPAN>&#12290;&#36825;&#23601;&#26159;&#25152;&#38656;&#30340;&#20840;&#37096;&#20449;&#24687;&#65292;Hibernate&#21033;&#29992;&#36825;&#20123;&#20449;&#24687;&#26469;&#22788;&#29702;&#25226;&#19968;&#20010;&#26377;&#21521;&#23548;&#33322;&#27169;&#22411;&#36716;&#31227;&#21040;&#25968;&#25454;&#24211;schema&#26102;&#30340;&#25152;&#26377;&#38382;&#39064;&#12290;&#20320;&#21482;&#38656;&#35201;&#35760;&#20303;&#36825;&#20010;&#30452;&#35266;&#30340;&#35268;&#21017;&#65306;&#25152;&#26377;&#30340;&#21452;&#21521;&#20851;&#32852;&#38656;&#35201;&#26377;&#19968;&#31471;&#34987;&#35774;&#32622;&#20026;<TT 
class=literal>inverse</TT>&#12290;&#22312;&#19968;&#23545;&#22810;&#20851;&#32852;&#20013;&#23427;&#24517;&#39035;&#26159;&#20195;&#34920;&#22810;&#65288;many&#65289;&#30340;&#37027;&#31471;&#12290;&#32780;&#22312;&#22810;&#23545;&#22810;&#65288;many-to-many&#65289;&#20851;&#32852;&#20013;&#65292;&#20320;&#21487;&#20197;&#20219;&#24847;&#36873;&#21462;&#19968;&#31471;&#65292;&#22240;&#20026;&#20004;&#31471;&#20043;&#38388;&#24182;&#27809;&#26377;&#24046;&#21035;&#12290; 
</P></DIV>
<P>&#35753;&#25105;&#20204;&#25226;&#36827;&#20837;&#19968;&#20010;&#23567;&#22411;&#30340;web&#24212;&#29992;&#31243;&#24207;&#12290; </P></DIV>
<DIV lang=zh-cn class=sect1>
<DIV class=titlepage>
<DIV>
<DIV>
<H2 class=title style="CLEAR: both"><A name=tutorial-webapp></A>1.4.&nbsp;&#31532;&#19977;&#37096;&#20998; - 
EventManager web&#24212;&#29992;&#31243;&#24207;</H2></DIV></DIV>
<DIV></DIV></DIV>
<P>Hibernate web&#24212;&#29992;&#31243;&#24207;&#20351;&#29992;<TT class=literal>Session</TT> &#21644;<TT 
class=literal>Transaction</TT>&#30340;&#26041;&#24335;&#20960;&#20046;&#21644;&#29420;&#31435;&#24212;&#29992;&#31243;&#24207;&#26159;&#19968;&#26679;&#30340;&#12290;&#20294;&#26159;&#65292;&#26377;&#19968;&#20123;&#24120;&#35265;&#30340;&#27169;&#24335;&#65288;pattern&#65289;&#38750;&#24120;&#26377;&#29992;&#12290;&#29616;&#22312;&#25105;&#20204;&#32534;&#20889;&#19968;&#20010;<TT 
class=literal>EventManagerServlet</TT>&#12290;&#36825;&#20010;servlet&#21487;&#20197;&#21015;&#20986;&#25968;&#25454;&#24211;&#20013;&#20445;&#23384;&#30340;&#25152;&#26377;&#30340;events&#65292;&#36824;&#25552;&#20379;&#19968;&#20010;HTML&#34920;&#21333;&#26469;&#22686;&#21152;&#26032;&#30340;events&#12290; 
</P>
<DIV lang=zh-cn class=sect2>
<DIV class=titlepage>
<DIV>
<DIV>
<H3 class=title><A 
name=tutorial-webapp-servlet></A>1.4.1.&nbsp;&#32534;&#20889;&#22522;&#26412;&#30340;servlet</H3></DIV></DIV>
<DIV></DIV></DIV>
<P>&#22312;&#20320;&#30340;&#28304;&#20195;&#30721;&#30446;&#24405;&#30340;<TT class=literal>events</TT>&#21253;&#20013;&#21019;&#24314;&#19968;&#20010;&#26032;&#30340;&#31867;&#65306; </P><PRE class=programlisting>package events;

// Imports

public class EventManagerServlet extends HttpServlet {

    private final SimpleDateFormat dateFormatter =
                            new SimpleDateFormat("dd.MM.yyyy");

    // Servlet code
}</PRE>
<P>&#25105;&#20204;&#21518;&#38754;&#20250;&#29992;&#21040;<TT class=literal>dateFormatter</TT> &#30340;&#24037;&#20855;&#65292; &#23427;&#25226;<TT 
class=literal>Date</TT>&#23545;&#35937;&#36716;&#25442;&#20026;&#23383;&#31526;&#20018;&#12290;&#21482;&#35201;&#19968;&#20010;formatter&#20316;&#20026;servlet&#30340;&#25104;&#21592;&#23601;&#21487;&#20197;&#20102;&#12290; </P>
<P>&#36825;&#20010;servlet&#21482;&#22788;&#29702; HTTP <TT class=literal>GET</TT> &#35831;&#27714;&#65292;&#22240;&#27492;&#65292;&#25105;&#20204;&#35201;&#23454;&#29616;&#30340;&#26159;<TT 
class=literal>doGet()</TT>&#26041;&#27861;&#65306; </P><PRE class=programlisting>protected void doGet(HttpServletRequest request,
                     HttpServletResponse response)
        throws ServletException, IOException {

    try {
        // Begin unit of work
        HibernateUtil.getSessionFactory()
                .getCurrentSession().beginTransaction();

        // Process request and render page...

        // End unit of work
        HibernateUtil.getSessionFactory()
                .getCurrentSession().getTransaction().commit();

    } catch (Exception ex) {
        HibernateUtil.getSessionFactory()
                .getCurrentSession().getTransaction().rollback();
        throw new ServletException(ex);
    }

}</PRE>
<P>&#25105;&#20204;&#31216;&#36825;&#37324;&#24212;&#29992;&#30340;&#27169;&#24335;&#20026;&#27599;&#27425;&#35831;&#27714;&#19968;&#20010;session<SPAN 
class=emphasis><EM>(session-per-request)</EM></SPAN>&#12290;&#24403;&#26377;&#35831;&#27714;&#21040;&#36798;&#36825;&#20010;servlet&#30340;&#26102;&#20505;&#65292;&#36890;&#36807;&#23545;<TT 
class=literal>SessionFactory</TT>&#30340;&#31532;&#19968;&#27425;&#35843;&#29992;&#65292;&#25171;&#24320;&#19968;&#20010;&#26032;&#30340;Hibernate <TT 
class=literal>Session</TT>&#12290;&#28982;&#21518;&#21551;&#21160;&#19968;&#20010;&#25968;&#25454;&#24211;&#20107;&#21153;—&#25152;&#26377;&#30340;&#25968;&#25454;&#35775;&#38382;&#37117;&#26159;&#22312;&#20107;&#21153;&#20013;&#36827;&#34892;&#65292;&#19981;&#31649;&#26159;&#35835;&#36824;&#26159;&#20889;&#65288;&#25105;&#20204;&#22312;&#24212;&#29992;&#31243;&#24207;&#20013;&#19981;&#20351;&#29992;auto-commit&#27169;&#24335;&#65289;&#12290; 
</P>
<P>&#19979;&#19968;&#27493;&#65292;&#23545;&#35831;&#27714;&#30340;&#21487;&#33021;&#21160;&#20316;&#36827;&#34892;&#22788;&#29702;&#65292;&#28210;&#26579;&#20986;&#21453;&#39304;&#30340;HTML&#12290;&#25105;&#20204;&#24456;&#24555;&#23601;&#20250;&#28041;&#21450;&#21040;&#37027;&#37096;&#20998;&#12290; </P>
<P>&#26368;&#21518;&#65292;&#24403;&#22788;&#29702;&#19982;&#28210;&#26579;&#37117;&#32467;&#26463;&#30340;&#26102;&#20505;&#65292;&#36825;&#20010;&#24037;&#20316;&#21333;&#20803;&#23601;&#32467;&#26463;&#20102;&#12290;&#20551;&#33509;&#22312;&#22788;&#29702;&#25110;&#28210;&#26579;&#30340;&#26102;&#20505;&#26377;&#20219;&#20309;&#38169;&#35823;&#21457;&#29983;&#65292;&#20250;&#25243;&#20986;&#19968;&#20010;&#24322;&#24120;&#65292;&#22238;&#28378;&#25968;&#25454;&#24211;&#20107;&#21153;&#12290;&#36825;&#26679;&#65292;<TT 
class=literal>session-per-request</TT>&#27169;&#24335;&#23601;&#23436;&#25104;&#20102;&#12290;&#20026;&#20102;&#36991;&#20813;&#22312;&#27599;&#20010;servlet&#20013;&#37117;&#32534;&#20889;&#20107;&#21153;&#36793;&#30028;&#30028;&#23450;&#30340;&#20195;&#30721;&#65292;&#21487;&#20197;&#32771;&#34385;&#20889;&#19968;&#20010;servlet 
&#36807;&#28388;&#22120;&#65288;filter&#65289;&#26469;&#26356;&#22909;&#22320;&#35299;&#20915;&#12290;&#20851;&#20110;&#36825;&#19968;&#27169;&#24335;&#30340;&#26356;&#22810;&#20449;&#24687;&#65292;&#35831;&#21442;&#38405;Hibernate&#32593;&#31449;&#21644;Wiki&#65292;&#36825;&#19968;&#27169;&#24335;&#21483;&#20570;<SPAN 
class=emphasis><EM>Open Session in 
View</EM></SPAN>—&#21482;&#35201;&#20320;&#32771;&#34385;&#29992;JSP&#26469;&#28210;&#26579;&#20320;&#30340;&#35270;&#22270;&#65288;view&#65289;&#65292;&#32780;&#19981;&#26159;&#22312;servlet&#20013;&#65292;&#20320;&#23601;&#20250;&#24456;&#24555;&#29992;&#21040;&#23427;&#12290; </P></DIV>
<DIV lang=zh-cn class=sect2>
<DIV class=titlepage>
<DIV>
<DIV>
<H3 class=title><A 
name=tutorial-webapp-processing></A>1.4.2.&nbsp;&#22788;&#29702;&#19982;&#28210;&#26579;</H3></DIV></DIV>
<DIV></DIV></DIV>
<P>&#25105;&#20204;&#26469;&#23454;&#29616;&#22788;&#29702;&#35831;&#27714;&#20197;&#21450;&#28210;&#26579;&#39029;&#38754;&#30340;&#24037;&#20316;&#12290; </P><PRE class=programlisting>// Write HTML header
PrintWriter out = response.getWriter();
out.println("&lt;html&gt;&lt;head&gt;&lt;title&gt;Event Manager&lt;/title&gt;&lt;/head&gt;&lt;body&gt;");

// Handle actions
if ( "store".equals(request.getParameter("action")) ) {

    String eventTitle = request.getParameter("eventTitle");
    String eventDate = request.getParameter("eventDate");

    if ( "".equals(eventTitle) || "".equals(eventDate) ) {
        out.println("&lt;b&gt;&lt;i&gt;Please enter event title and date.&lt;/i&gt;&lt;/b&gt;");
    } else {
        createAndStoreEvent(eventTitle, dateFormatter.parse(eventDate));
        out.println("&lt;b&gt;&lt;i&gt;Added event.&lt;/i&gt;&lt;/b&gt;");
    }
}

// Print page
printEventForm(out);
listEvents(out);

// Write HTML footer
out.println("&lt;/body&gt;&lt;/html&gt;");
out.flush();
out.close();</PRE>
<P>&#24517;&#39035;&#25215;&#35748;&#65292;&#36825;&#31181;&#32534;&#30721;&#39118;&#26684;&#35753;Java&#19982;HTML&#28151;&#21512;&#22312;&#20102;&#19968;&#36215;&#65292;&#22312;&#26356;&#22797;&#26434;&#30340;&#24212;&#29992;&#31243;&#24207;&#20013;&#19981;&#24212;&#22823;&#37327;&#22320;&#20351;&#29992;—&#35760;&#20303;&#25105;&#20204;&#22312;&#31456;&#20013;&#20165;&#20026;&#20102;&#23637;&#31034;Hibernate&#30340;&#22522;&#26412;&#27010;&#24565;&#12290;&#36825;&#27573;&#20195;&#30721;&#25171;&#21360;&#20986;&#20102;HTML&#22836;&#21644;&#23614;&#37096;&#12290;&#22312;&#39029;&#38754;&#20013;&#65292;&#25171;&#21360;&#20986;&#19968;&#20010;&#36755;&#20837;event&#26465;&#30446;&#30340;&#34920;&#21333;&#65292;&#24182;&#21015;&#20986;&#25968;&#25454;&#24211;&#20013;&#25152;&#26377;events&#12290;&#31532;&#19968;&#20010;&#26041;&#27861;&#24494;&#19981;&#36275;&#36947;&#65292;&#20165;&#20165;&#26159;&#36755;&#20986;HTML: 
</P><PRE class=programlisting>private void printEventForm(PrintWriter out) {
    out.println("&lt;h2&gt;Add new event:&lt;/h2&gt;");
    out.println("&lt;form&gt;");
    out.println("Title: &lt;input name='eventTitle' length='50'/&gt;&lt;br/&gt;");
    out.println("Date (e.g. 24.12.2009): &lt;input name='eventDate' length='10'/&gt;&lt;br/&gt;");
    out.println("&lt;input type='submit' name='action' value='store'/&gt;");
    out.println("&lt;/form&gt;");
}</PRE>
<P><TT class=literal>listEvents()</TT>&#26041;&#27861;&#20351;&#29992;&#32465;&#23450;&#21040;&#24403;&#21069;&#32447;&#31243;&#30340;Hibernate <TT 
class=literal>Session</TT>&#26469;&#25191;&#34892;&#26597;&#35810;&#65306; </P><PRE class=programlisting>private void listEvents(PrintWriter out) {
    List result = HibernateUtil.getSessionFactory()
                    .getCurrentSession().createCriteria(Event.class).list();
    if (result.size() &gt; 0) {
        out.println("&lt;h2&gt;Events in database:&lt;/h2&gt;");
        out.println("&lt;table border='1'&gt;");
        out.println("&lt;tr&gt;");
        out.println("&lt;th&gt;Event title&lt;/th&gt;");
        out.println("&lt;th&gt;Event date&lt;/th&gt;");
        out.println("&lt;/tr&gt;");
        for (Iterator it = result.iterator(); it.hasNext();) {
            Event event = (Event) it.next();
            out.println("&lt;tr&gt;");
            out.println("&lt;td&gt;" + event.getTitle() + "&lt;/td&gt;");
            out.println("&lt;td&gt;" + dateFormatter.format(event.getDate()) + "&lt;/td&gt;");
            out.println("&lt;/tr&gt;");
        }
        out.println("&lt;/table&gt;");
    }
}</PRE>
<P>&#26368;&#21518;&#65292;<TT class=literal>store</TT>&#21160;&#20316;&#20250;&#34987;&#23548;&#21521;&#21040;<TT 
class=literal>createAndStoreEvent()</TT>&#26041;&#27861;&#65292;&#23427;&#20063;&#20351;&#29992;&#24403;&#21069;&#32447;&#31243;&#30340;<TT 
class=literal>Session</TT>: </P><PRE class=programlisting>protected void createAndStoreEvent(String title, Date theDate) {
    Event theEvent = new Event();
    theEvent.setTitle(title);
    theEvent.setDate(theDate);

    HibernateUtil.getSessionFactory()
                    .getCurrentSession().save(theEvent);
}</PRE>
<P>&#22823;&#21151;&#21578;&#25104;&#65292;&#36825;&#20010;servlet&#20889;&#23436;&#20102;&#12290;Hibernate&#20250;&#22312;&#21333;&#19968;&#30340;<TT class=literal>Session</TT> &#21644;<TT 
class=literal>Transaction</TT>&#20013;&#22788;&#29702;&#21040;&#36798;&#30340;servlet&#35831;&#27714;&#12290;&#22914;&#21516;&#22312;&#21069;&#38754;&#30340;&#29420;&#31435;&#24212;&#29992;&#31243;&#24207;&#20013;&#37027;&#26679;&#65292;Hibernate&#21487;&#20197;&#33258;&#21160;&#30340;&#25226;&#36825;&#20123;&#23545;&#35937;&#32465;&#23450;&#21040;&#24403;&#21069;&#36816;&#34892;&#30340;&#32447;&#31243;&#20013;&#12290;&#36825;&#32473;&#20102;&#20320;&#29992;&#20219;&#20309;&#20320;&#21916;&#27426;&#30340;&#26041;&#24335;&#26469;&#23545;&#20195;&#30721;&#20998;&#23618;&#21450;&#35775;&#38382;<TT 
class=literal>SessionFactory</TT>&#30340;&#33258;&#30001;&#12290;&#36890;&#24120;&#65292;&#20320;&#20250;&#29992;&#26356;&#21152;&#23436;&#22791;&#30340;&#35774;&#35745;&#65292;&#25226;&#25968;&#25454;&#35775;&#38382;&#20195;&#30721;&#36716;&#31227;&#21040;&#25968;&#25454;&#35775;&#38382;&#23545;&#35937;&#20013;(DAO&#27169;&#24335;&#65289;&#12290;&#35831;&#21442;&#35265;Hibernate 
Wiki&#65292;&#37027;&#37324;&#26377;&#26356;&#22810;&#30340;&#20363;&#23376;&#12290; </P></DIV>
<DIV lang=zh-cn class=sect2>
<DIV class=titlepage>
<DIV>
<DIV>
<H3 class=title><A 
name=tutorial-webapp-deploy></A>1.4.3.&nbsp;&#37096;&#32626;&#19982;&#27979;&#35797;</H3></DIV></DIV>
<DIV></DIV></DIV>
<P>&#35201;&#21457;&#24067;&#36825;&#20010;&#31243;&#24207;&#65292;&#20320;&#24471;&#25226;&#23427;&#25171;&#25104;web&#21457;&#24067;&#21253;&#65306;WAR&#25991;&#20214;&#12290;&#25226;&#19979;&#38754;&#30340;&#33050;&#26412;&#21152;&#20837;&#21040;&#20320;&#30340;<TT class=literal>build.xml</TT>&#20013;&#65306; </P><PRE class=programlisting>&lt;target name="war" depends="compile"&gt;
    &lt;war destfile="hibernate-tutorial.war" webxml="web.xml"&gt;
        &lt;lib dir="${librarydir}"&gt;
          &lt;exclude name="jsdk*.jar"/&gt;
        &lt;/lib&gt;

        &lt;classes dir="${targetdir}"/&gt;
    &lt;/war&gt;
&lt;/target&gt;</PRE>
<P>&#36825;&#27573;&#20195;&#30721;&#22312;&#20320;&#30340;&#24320;&#21457;&#30446;&#24405;&#20013;&#21019;&#24314;&#19968;&#20010;<TT class=literal>hibernate-tutorial.war</TT>&#30340;&#25991;&#20214;&#12290;&#23427;&#25226;&#25152;&#26377;&#30340;&#31867;&#24211;&#21644;<TT 
class=literal>web.xml</TT>&#25551;&#36848;&#25991;&#20214;&#37117;&#25171;&#21253;&#36827;&#21435;&#65292;web.xml &#25991;&#20214;&#24212;&#35813;&#20301;&#20110;&#20320;&#30340;&#24320;&#21457;&#26681;&#30446;&#24405;&#20013;&#65306; </P><PRE class=programlisting>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;web-app version="2.4"
    xmlns="http://java.sun.com/xml/ns/j2ee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd"&gt;

    &lt;servlet&gt;
        &lt;servlet-name&gt;Event Manager&lt;/servlet-name&gt;
        &lt;servlet-class&gt;events.EventManagerServlet&lt;/servlet-class&gt;
    &lt;/servlet&gt;

    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;Event Manager&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/eventmanager&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;
&lt;/web-app&gt;</PRE>
<P>&#35831;&#27880;&#24847;&#22312;&#20320;&#32534;&#35793;&#21644;&#37096;&#32626;web&#24212;&#29992;&#31243;&#20043;&#21069;&#65292;&#38656;&#35201;&#19968;&#20010;&#38468;&#21152;&#30340;&#31867;&#24211;&#65306;<TT class=literal>jsdk.jar</TT>&#12290;&#36825;&#26159;Java 
Servlet&#24320;&#21457;&#21253;&#65292;&#20551;&#33509;&#20320;&#36824;&#27809;&#26377;&#65292;&#21487;&#20197;&#20174;Sun&#32593;&#31449;&#19978;&#19979;&#36733;&#65292;&#25226;&#23427;copy&#21040;&#20320;&#30340;lib&#30446;&#24405;&#12290;&#20294;&#26159;&#65292;&#23427;&#20165;&#20165;&#26159;&#22312;&#32534;&#35793;&#26102;&#38656;&#35201;&#65292;&#19981;&#20250;&#34987;&#25171;&#20837;WAR&#21253;&#12290; </P>
<P>&#22312;&#20320;&#30340;&#24320;&#21457;&#30446;&#24405;&#20013;&#65292;&#35843;&#29992;<TT class=literal>ant war</TT>&#26469;&#26500;&#24314;&#12289;&#25171;&#21253;&#65292;&#28982;&#21518;&#25226;<TT 
class=literal>hibernate-tutorial.war</TT>&#25991;&#20214;&#25335;&#36125;&#21040;&#20320;&#30340;tomcat&#30340;<TT 
class=literal>webapps</TT>&#30446;&#24405;&#19979;&#12290;&#20551;&#33509;&#20320;&#36824;&#27809;&#23433;&#35013;Tomcat&#65292;&#23601;&#21435;&#19979;&#36733;&#19968;&#20010;&#65292;&#25353;&#29031;&#25351;&#21335;&#26469;&#23433;&#35013;&#12290;&#23545;&#27492;&#24212;&#29992;&#30340;&#21457;&#24067;&#65292;&#20320;&#19981;&#38656;&#35201;&#20462;&#25913;&#20219;&#20309;Tomcat&#30340;&#37197;&#32622;&#12290; 
</P>
<P>&#22312;&#37096;&#32626;&#23436;&#65292;&#21551;&#21160;Tomcat&#20043;&#21518;&#65292;&#36890;&#36807;<TT 
class=literal>http://localhost:8080/hibernate-tutorial/eventmanager</TT>&#36827;&#34892;&#35775;&#38382;&#20320;&#30340;&#24212;&#29992;&#65292;&#22312;&#31532;&#19968;&#27425;servlet 
&#35831;&#27714;&#21457;&#29983;&#26102;&#65292;&#35831;&#22312;Tomcat log&#20013;&#30830;&#35748;&#20320;&#30475;&#21040;Hibernate&#34987;&#21021;&#22987;&#21270;&#20102;&#65288;<TT 
class=literal>HibernateUtil</TT>&#30340;&#38745;&#24577;&#21021;&#22987;&#21270;&#22120;&#34987;&#35843;&#29992;&#65289;&#65292;&#20551;&#33509;&#26377;&#20219;&#20309;&#24322;&#24120;&#25243;&#20986;&#65292;&#20063;&#21487;&#20197;&#30475;&#21040;&#35814;&#32454;&#30340;&#36755;&#20986;&#12290; 
</P></DIV></DIV>
<DIV lang=zh-cn class=sect1>
<DIV class=titlepage>
<DIV>
<DIV>
<H2 class=title style="CLEAR: both"><A name=tutorial-summary></A>1.5.&nbsp; &#24635;&#32467; 
</H2></DIV></DIV>
<DIV></DIV></DIV>
<P>&#26412;&#31456;&#35206;&#30422;&#20102;&#22914;&#20309;&#32534;&#20889;&#19968;&#20010;&#31616;&#21333;&#29420;&#31435;&#30340;Hibernate&#21629;&#20196;&#34892;&#24212;&#29992;&#31243;&#24207;&#21450;&#23567;&#22411;&#30340;Hibernate web&#24212;&#29992;&#31243;&#24207;&#30340;&#22522;&#26412;&#35201;&#32032;&#12290; </P>
<P>&#22914;&#26524;&#20320;&#24050;&#32463;&#23545;Hibernate&#24863;&#21040;&#33258;&#20449;&#65292;&#36890;&#36807;&#24320;&#21457;&#25351;&#21335;&#30446;&#24405;&#65292;&#32487;&#32493;&#27983;&#35272;&#20320;&#24863;&#20852;&#36259;&#30340;&#20869;&#23481;&#65293;&#37027;&#20123;&#20250;&#34987;&#38382;&#21040;&#30340;&#38382;&#39064;&#22823;&#22810;&#26159;&#20107;&#21153;&#22788;&#29702; (<A 
title=&#31532;&nbsp;11&nbsp;&#31456;&nbsp;&#20107;&#21153;&#21644;&#24182;&#21457; href="transactions.html">&#31532;&nbsp;11&nbsp;&#31456; 
<I>&#20107;&#21153;&#21644;&#24182;&#21457;</I></A>)&#65292;&#25235;&#21462;&#65288;fetch&#65289;&#30340;&#25928;&#29575; (<A title="&#31532;&nbsp;19&nbsp;&#31456;&nbsp;&#25552;&#21319;&#24615;&#33021;&#10;&#9;" 
href="performance.html">&#31532;&nbsp;19&nbsp;&#31456; <I>&#25552;&#21319;&#24615;&#33021; </I></A>)&#65292;&#25110;&#32773;API&#30340;&#20351;&#29992; (<A 
title=&#31532;&nbsp;10&nbsp;&#31456;&nbsp;&#19982;&#23545;&#35937;&#20849;&#20107; href="objectstate.html">&#31532;&nbsp;10&nbsp;&#31456; 
<I>&#19982;&#23545;&#35937;&#20849;&#20107;</I></A>)&#21644;&#26597;&#35810;&#30340;&#29305;&#24615;(<A title=10.4.&nbsp;&#26597;&#35810; 
href="objectstate.html#objectstate-querying">&#31532;&nbsp;10.4&nbsp;&#33410; “&#26597;&#35810;”</A>)&#12290; </P>
<P>&#21035;&#24536;&#20102;&#21435;Hibernate&#30340;&#32593;&#31449;&#26597;&#30475;&#26356;&#22810;&#65288;&#26377;&#38024;&#23545;&#24615;&#30340;&#65289;&#31034;&#20363;&#12290; </P></DIV></DIV>
<DIV class=navfooter>
<HR>

<TABLE width="100%" summary="Navigation footer">
  <TBODY>
  <TR>
    <TD width="40%" align=left><A accessKey=p 
    href="preface.html">&#19978;&#19968;&#39029;</A>&nbsp;</TD>
    <TD width="20%" align=center><A accessKey=u href="index.html">&#19978;&#19968;&#32423;</A></TD>
    <TD width="40%" align=right>&nbsp;<A accessKey=n 
      href="architecture.html">&#19979;&#19968;&#39029;</A></TD></TR>
  <TR>
    <TD vAlign=top width="40%" align=left>&#21069;&#35328;&nbsp;</TD>
    <TD width="20%" align=center><A accessKey=h href="index.html">&#36215;&#22987;&#39029;</A></TD>
    <TD vAlign=top width="40%" 
      align=right>&nbsp;&#31532;&nbsp;2&nbsp;&#31456;&nbsp;&#20307;&#31995;&#32467;&#26500;(Architecture)</TD></TR></TBODY></TABLE></DIV></BODY></HTML>
