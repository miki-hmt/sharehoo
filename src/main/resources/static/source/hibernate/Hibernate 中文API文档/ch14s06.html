<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=GBK">
<title>14.6.&#160;聚集函数</title>
<link rel="stylesheet" href="styles/html.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.71.0">
<link rel="start" href="index.html" title="HIBERNATE - 符合Java习惯的关系数据库持久化">
<link rel="up" href="ch14.html" title="第&#160;14&#160;章&#160;HQL: Hibernate查询语言">
<link rel="prev" href="ch14s05.html" title="14.5.&#160;select子句">
<link rel="next" href="ch14s07.html" title="14.7.&#160;多态查询">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="sect1" lang="zh-cn">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="queryhql-aggregation"></a>14.6.&#160;聚集函数</h2></div></div></div>
<p>
            HQL查询甚至可以返回作用于属性之上的聚集函数的计算结果:
        </p>
<pre class="programlisting">select avg(cat.weight), sum(cat.weight), max(cat.weight), count(cat)
from Cat cat</pre>
<p>
            受支持的聚集函数如下：
        </p>
<div class="itemizedlist"><ul type="disc" compact>
<li><p>
                    <code class="literal">avg(...), sum(...), min(...), max(...)</code>
                </p></li>
<li><p>
                    <code class="literal">count(*)</code>
                </p></li>
<li><p>
                    <code class="literal">count(...), count(distinct ...), count(all...)</code>
                </p></li>
</ul></div>
<p>
            你可以在选择子句中使用数学操作符、连接以及经过验证的SQL函数：
        </p>
<pre class="programlisting">select cat.weight + sum(kitten.weight) 
from Cat cat 
    join cat.kittens kitten
group by cat.id, cat.weight</pre>
<pre class="programlisting">select firstName||' '||initial||' '||upper(lastName) from Person</pre>
<p>
            关键字<code class="literal">distinct</code>与<code class="literal">all</code> 也可以使用，它们具有与SQL相同的语义.
        </p>
<pre class="programlisting">select distinct cat.name from Cat cat

select count(distinct cat.name), count(cat) from Cat cat</pre>
</div></body>
</html>
