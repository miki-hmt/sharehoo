<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=GBK">
<title>5.3.&#160;多次映射同一个类</title>
<link rel="stylesheet" href="styles/html.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.71.0">
<link rel="start" href="index.html" title="HIBERNATE - 符合Java习惯的关系数据库持久化">
<link rel="up" href="ch05.html" title="第&#160;5&#160;章&#160;对象/关系数据库映射基础(Basic O/R Mapping)">
<link rel="prev" href="ch05s02.html" title="5.2.&#160;Hibernate 的类型">
<link rel="next" href="ch05s04.html" title="5.4.&#160;SQL中引号包围的标识符">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="sect1" lang="zh-cn">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="mapping-entityname"></a>5.3.&#160;多次映射同一个类</h2></div></div></div>
<p>
            对特定的持久化类，映射多次是允许的。这种情形下，你必须指定<span class="emphasis"><em>entity name</em></span>来区别不同映射实体的对象实例。（默认情况下，实体名字和类名是相同的。）
            Hibernate在操作持久化对象、编写查询条件，或者把关联映射到指定实体时，允许你指定这个entity name（实体名字）。
        </p>
<pre class="programlisting">&lt;class name="Contract" table="Contracts" 
        entity-name="CurrentContract"&gt;
    ...
    &lt;set name="history" inverse="true" 
            order-by="effectiveEndDate desc"&gt;
        &lt;key column="currentContractId"/&gt;
        &lt;one-to-many entity-name="HistoricalContract"/&gt;
    &lt;/set&gt;
&lt;/class&gt;

&lt;class name="Contract" table="ContractHistory" 
        entity-name="HistoricalContract"&gt;
    ...
    &lt;many-to-one name="currentContract" 
            column="currentContractId" 
            entity-name="CurrentContract"/&gt;
&lt;/class&gt;</pre>
<p>
            注意这里关联是如何用<code class="literal">entity-name</code>来代替<code class="literal">class</code>的。
        </p>
</div></body>
</html>
