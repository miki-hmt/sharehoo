<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=GBK">
<title>第&#160;10&#160;章&#160;与对象共事</title>
<link rel="stylesheet" href="styles/html.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.71.0">
<link rel="start" href="index.html" title="HIBERNATE - 符合Java习惯的关系数据库持久化">
<link rel="up" href="index.html" title="HIBERNATE - 符合Java习惯的关系数据库持久化">
<link rel="prev" href="ch09s02.html" title="9.2.&#160;限制">
<link rel="next" href="ch10s02.html" title="10.2.&#160;使对象持久化">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter" lang="zh-cn">
<div class="titlepage"><div><div><h2 class="title">
<a name="objectstate"></a>第&#160;10&#160;章&#160;与对象共事</h2></div></div></div>
<div class="toc">
<p><b>目录</b></p>
<dl>
<dt><span class="sect1"><a href="ch10.html#objectstate-overview">10.1. Hibernate对象状态(object states)</a></span></dt>
<dt><span class="sect1"><a href="ch10s02.html">10.2. 使对象持久化</a></span></dt>
<dt><span class="sect1"><a href="ch10s03.html">10.3. 装载对象</a></span></dt>
<dt><span class="sect1"><a href="ch10s04.html">10.4. 查询</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="ch10s04.html#objectstate-querying-executing">10.4.1. 执行查询</a></span></dt>
<dt><span class="sect2"><a href="ch10s04.html#objectstate-filtering">10.4.2. 过滤集合</a></span></dt>
<dt><span class="sect2"><a href="ch10s04.html#objecstate-querying-criteria">10.4.3. 条件查询(Criteria queries)</a></span></dt>
<dt><span class="sect2"><a href="ch10s04.html#objectstate-querying-nativesql">10.4.4. 使用原生SQL的查询</a></span></dt>
</dl></dd>
<dt><span class="sect1"><a href="ch10s05.html">10.5. 修改持久对象</a></span></dt>
<dt><span class="sect1"><a href="ch10s06.html">10.6. 修改脱管(Detached)对象</a></span></dt>
<dt><span class="sect1"><a href="ch10s07.html">10.7. 自动状态检测</a></span></dt>
<dt><span class="sect1"><a href="ch10s08.html">10.8. 删除持久对象</a></span></dt>
<dt><span class="sect1"><a href="ch10s09.html">10.9. 在两个不同数据库间复制对象</a></span></dt>
<dt><span class="sect1"><a href="ch10s10.html">10.10. Session刷出(flush)</a></span></dt>
<dt><span class="sect1"><a href="ch10s11.html">10.11. 传播性持久化(transitive persistence)</a></span></dt>
<dt><span class="sect1"><a href="ch10s12.html">10.12. 使用元数据</a></span></dt>
</dl>
</div>
<p>
	    Hibernate是完整的对象/关系映射解决方案，它提供了对象<span class="emphasis"><em>状态管理(state management)</em></span>的功能，使开发者不再需要理会底层数据库系统的细节。
		也就是说，相对于常见的JDBC/SQL持久层方案中需要<code class="literal">管理SQL语句</code>，Hibernate采用了更自然的面向对象的视角来持久化Java应用中的数据。
    </p>
<p>
		换句话说，使用Hibernate的开发者应该总是关注对象的<span class="emphasis"><em>状态(state)</em></span>，不必考虑SQL语句的执行。
		这部分细节已经由Hibernate掌管妥当，只有开发者在进行系统性能调优的时候才需要进行了解。
    </p>
<div class="sect1" lang="zh-cn">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="objectstate-overview"></a>10.1.&#160;Hibernate对象状态(object states)</h2></div></div></div>
<p>
            Hibernate定义并支持下列对象状态(state):
        </p>
<div class="itemizedlist"><ul type="disc">
<li><p>
                    <span class="emphasis"><em>瞬时(Transient)</em></span> - 由<code class="literal">new</code>操作符创建，且尚未与Hibernate <code class="literal">Session</code>
					关联的对象被认定为瞬时(Transient)的。瞬时(Transient)对象不会被持久化到数据库中，也不会被赋予持久化标识(identifier)。
					如果瞬时(Transient)对象在程序中没有被引用，它会被垃圾回收器(garbage collector)销毁。
					使用Hibernate <code class="literal">Session</code>可以将其变为持久(Persistent)状态。(Hibernate会自动执行必要的SQL语句)
                </p></li>
<li><p>
                    <span class="emphasis"><em>持久(Persistent)</em></span> - 持久(Persistent)的实例在数据库中有对应的记录，并拥有一个持久化标识(identifier)。
					持久(Persistent)的实例可能是刚被保存的，或刚被加载的，无论哪一种，按定义，它存在于相关联的<code class="literal">Session</code>作用范围内。
					Hibernate会检测到处于持久(Persistent)状态的对象的任何改动，在当前操作单元(unit of work)执行完毕时将对象数据(state)与数据库同步(synchronize)。
					开发者不需要手动执行<code class="literal">UPDATE</code>。将对象从持久(Persistent)状态变成瞬时(Transient)状态同样也不需要手动执行<code class="literal">DELETE</code>语句。
                </p></li>
<li><p>
                    <span class="emphasis"><em>脱管(Detached)</em></span> - 与持久(Persistent)对象关联的<code class="literal">Session</code>被关闭后，对象就变为脱管(Detached)的。
					对脱管(Detached)对象的引用依然有效，对象可继续被修改。脱管(Detached)对象如果重新关联到某个新的<code class="literal">Session</code>上，
					会再次转变为持久(Persistent)的(在Detached其间的改动将被持久化到数据库)。
                	这个功能使得一种编程模型，即中间会给用户思考时间(user think-time)的长时间运行的操作单元(unit of work)的编程模型成为可能。
                	我们称之为<span class="emphasis"><em>应用程序事务</em></span>，即从用户观点看是一个操作单元(unit of work)。
                </p></li>
</ul></div>
<p>
			接下来我们来细致的讨论下状态(states)及状态间的转换(state transitions)（以及触发状态转换的Hibernate方法）。
        </p>
</div>
</div></body>
</html>
