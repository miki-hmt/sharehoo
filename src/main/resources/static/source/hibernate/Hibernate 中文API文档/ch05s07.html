<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=GBK">
<title>5.7.&#160;辅助数据库对象(Auxiliary Database Objects)</title>
<link rel="stylesheet" href="styles/html.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.71.0">
<link rel="start" href="index.html" title="HIBERNATE - 符合Java习惯的关系数据库持久化">
<link rel="up" href="ch05.html" title="第&#160;5&#160;章&#160;对象/关系数据库映射基础(Basic O/R Mapping)">
<link rel="prev" href="ch05s06.html" title="5.6.&#160;数据库生成属性（Generated Properties）">
<link rel="next" href="ch06.html" title="第&#160;6&#160;章&#160;集合类(Collections)映射">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="sect1" lang="zh-cn">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="mapping-database-object"></a>5.7.&#160;辅助数据库对象(Auxiliary Database Objects)</h2></div></div></div>
<p>
            Allows CREATE and DROP of arbitrary database objects, in conjunction with
            Hibernate's schema evolution tools, to provide the ability to fully define
            a user schema within the Hibernate mapping files.  Although designed specifically
            for creating and dropping things like triggers or stored procedures, really any
            SQL command that can be run via a <code class="literal">java.sql.Statement.execute()</code>
            method is valid here (ALTERs, INSERTS, etc).  There are essentially two modes for
            defining auxiliary database objects...
            帮助CREATE和DROP任意数据库对象，与Hibernate的schema交互工具组合起来，可以提供在Hibernate映射文件中完全定义用户schema的能力。虽然这是为创建和销毁trigger(触发器）或stored procedure(存储过程）等特别设计的，实际上任何可以在<code class="literal">java.sql.Statement.execute()</code>方法中执行的SQL命令都可以在此使用（比如ALTER, INSERT，等等）。本质上有两种模式来定义辅助数据库对象...
        </p>
<p>
            第一种模式是在映射文件中显式声明CREATE和DROP命令：
        </p>
<pre class="programlisting">&lt;hibernate-mapping&gt;
    ...
    &lt;database-object&gt;
        &lt;create&gt;CREATE TRIGGER my_trigger ...&lt;/create&gt;
        &lt;drop&gt;DROP TRIGGER my_trigger&lt;/drop&gt;
    &lt;/database-object&gt;
&lt;/hibernate-mapping&gt;</pre>
<p>
            第二种模式是提供一个类，这个类知道如何组织CREATE和DROP命令。这个特别类必须实现<code class="literal">org.hibernate.mapping.AuxiliaryDatabaseObject</code>接口。
        </p>
<pre class="programlisting">&lt;hibernate-mapping&gt;
    ...
    &lt;database-object&gt;
        &lt;definition class="MyTriggerDefinition"/&gt;
    &lt;/database-object&gt;
&lt;/hibernate-mapping&gt;</pre>
<p>
            还有，这些数据库对象可以特别指定为仅在特定的方言中才使用。
        </p>
<pre class="programlisting">&lt;hibernate-mapping&gt;
    ...
    &lt;database-object&gt;
        &lt;definition class="MyTriggerDefinition"/&gt;
        &lt;dialect-scope name="org.hibernate.dialect.Oracle9Dialect"/&gt;
        &lt;dialect-scope name="org.hibernate.dialect.OracleDialect"/&gt;
    &lt;/database-object&gt;
&lt;/hibernate-mapping&gt;</pre>
</div></body>
</html>
