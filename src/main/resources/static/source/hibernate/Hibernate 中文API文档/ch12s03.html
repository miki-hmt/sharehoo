<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=GBK">
<title>12.3.&#160; Hibernate的声明式安全机制</title>
<link rel="stylesheet" href="styles/html.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.71.0">
<link rel="start" href="index.html" title="HIBERNATE - 符合Java习惯的关系数据库持久化">
<link rel="up" href="ch12.html" title="第&#160;12&#160;章&#160; 拦截器与事件(Interceptors and events)">
<link rel="prev" href="ch12s02.html" title="12.2.&#160; 事件系统(Event system)">
<link rel="next" href="ch13.html" title="第&#160;13&#160;章&#160;批量处理（Batch processing）">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="sect1" lang="zh-cn">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="objectstate-decl-security"></a>12.3.&#160;
		Hibernate的声明式安全机制
		</h2></div></div></div>
<p>
		    通常，Hibernate应用程序的声明式安全机制由会话外观层(session facade)所管理。
                    现在，Hibernate3允许某些特定的行为由JACC进行许可管理，由JAAS进行授权管理。
                    本功能是一个建立在事件框架之上的可选的功能。
        </p>
<p>
		    首先，你必须要配置适当的事件监听器（event listener），来激活使用JAAS管理授权的功能。
        </p>
<pre class="programlisting">&lt;listener type="pre-delete" class="org.hibernate.secure.JACCPreDeleteEventListener"/&gt;
&lt;listener type="pre-update" class="org.hibernate.secure.JACCPreUpdateEventListener"/&gt;
&lt;listener type="pre-insert" class="org.hibernate.secure.JACCPreInsertEventListener"/&gt;
&lt;listener type="pre-load" class="org.hibernate.secure.JACCPreLoadEventListener"/&gt;</pre>
<p>
            注意，<code class="literal">&lt;listener type="..." class="..."/&gt;</code>只是<code class="literal">&lt;event type="..."&gt;&lt;listener class="..."/&gt;&lt;/event&gt;</code>的简写，对每一个事件类型都必须严格的有一个监听器与之对应。
        </p>
<p>
		    接下来，仍然在<code class="literal">hibernate.cfg.xml</code>文件中，绑定角色的权限：
        </p>
<pre class="programlisting">&lt;grant role="admin" entity-name="User" actions="insert,update,read"/&gt;
&lt;grant role="su" entity-name="User" actions="*"/&gt;</pre>
<p>
		    这些角色的名字就是你的JACC provider所定义的角色的名字。
        </p>
</div></body>
</html>
