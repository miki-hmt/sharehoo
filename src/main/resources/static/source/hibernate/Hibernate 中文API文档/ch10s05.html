<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=GBK">
<title>10.5.&#160;修改持久对象</title>
<link rel="stylesheet" href="styles/html.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.71.0">
<link rel="start" href="index.html" title="HIBERNATE - 符合Java习惯的关系数据库持久化">
<link rel="up" href="ch10.html" title="第&#160;10&#160;章&#160;与对象共事">
<link rel="prev" href="ch10s04.html" title="10.4.&#160;查询">
<link rel="next" href="ch10s06.html" title="10.6.&#160;修改脱管(Detached)对象">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="sect1" lang="zh-cn">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="objectstate-modifying"></a>10.5.&#160;修改持久对象</h2></div></div></div>
<p>
            <span class="emphasis"><em>事务中的持久实例</em></span>（就是通过<code class="literal">session</code>装载、保存、创建或者查询出的对象）
            被应用程序操作所造成的任何修改都会在<code class="literal">Session</code>被<span class="emphasis"><em>刷出（flushed）</em></span>的时候被持久化（本章后面会详细讨论）。
			这里不需要调用某个特定的方法（比如<code class="literal">update()</code>，设计它的目的是不同的）将你的修改持久化。
            所以最直接的更新一个对象的方法就是在<code class="literal">Session</code>处于打开状态时<code class="literal">load()</code>它，然后直接修改即可：
        </p>
<pre class="programlisting">DomesticCat cat = (DomesticCat) sess.load( Cat.class, new Long(69) );
cat.setName("PK");
sess.flush();  // changes to cat are automatically detected and persisted</pre>
<p>
        	有时这种程序模型效率低下，因为它在同一Session里需要一条SQL <code class="literal">SELECT</code>语句（用于加载对象）
        	以及一条SQL <code class="literal">UPDATE</code>语句(持久化更新的状态)。
        	为此Hibernate提供了另一种途径，使用脱管(detached)实例。
        </p>
<p>
            <span class="emphasis"><em>请注意Hibernate本身不提供直接执行<code class="literal">UPDATE</code>或<code class="literal">DELETE</code>语句的API。
            Hibernate提供的是<span class="emphasis"><em>状态管理(state management)</em></span>服务，你不必考虑要使用的<span class="emphasis"><em>语句(statements)</em></span>。
			JDBC是出色的执行SQL语句的API，任何时候调用<code class="literal">session.connection()</code>你都可以得到一个JDBC <code class="literal">Connection</code>对象。
			此外，在联机事务处理(OLTP)程序中，大量操作(mass operations)与对象/关系映射的观点是相冲突的。
            Hibernate的将来版本可能会提供专门的进行大量操作(mass operation)的功能。            
            参考<a href="ch13.html" title="第&#160;13&#160;章&#160;批量处理（Batch processing）">第&#160;13&#160;章 <i>批量处理（Batch processing）</i></a>，寻找一些可用的批量(batch)操作技巧。</em></span>
        </p>
</div></body>
</html>
