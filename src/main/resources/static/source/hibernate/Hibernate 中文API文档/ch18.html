<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=GBK">
<title>第&#160;18&#160;章&#160;XML映射</title>
<link rel="stylesheet" href="styles/html.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.71.0">
<link rel="start" href="index.html" title="HIBERNATE - 符合Java习惯的关系数据库持久化">
<link rel="up" href="index.html" title="HIBERNATE - 符合Java习惯的关系数据库持久化">
<link rel="prev" href="ch17.html" title="第&#160;17&#160;章&#160;过滤数据">
<link rel="next" href="ch18s02.html" title="18.2.&#160;XML映射元数据">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="chapter" lang="zh-cn">
<div class="titlepage"><div><div><h2 class="title">
<a name="xml"></a>第&#160;18&#160;章&#160;XML映射</h2></div></div></div>
<div class="toc">
<p><b>目录</b></p>
<dl>
<dt><span class="sect1"><a href="ch18.html#xml-intro">18.1. 用XML数据进行工作</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="ch18.html#xml-intro-mapping">18.1.1. 指定同时映射XML和类</a></span></dt>
<dt><span class="sect2"><a href="ch18.html#xml-onlyxml">18.1.2. 只定义XML映射</a></span></dt>
</dl></dd>
<dt><span class="sect1"><a href="ch18s02.html">18.2. XML映射元数据</a></span></dt>
<dt><span class="sect1"><a href="ch18s03.html">18.3. 操作XML数据</a></span></dt>
</dl>
</div>
<p><span class="emphasis"><em>
        注意这是Hibernate 3.0的一个实验性的特性。这一特性仍在积极开发中。
    </em></span></p>
<div class="sect1" lang="zh-cn">
<div class="titlepage"><div><div><h2 class="title" style="clear: both">
<a name="xml-intro"></a>18.1.&#160;用XML数据进行工作</h2></div></div></div>
<p>
            Hibernate使得你可以用XML数据来进行工作，恰如你用持久化的POJO进行工作那样。解析过的XML树
            可以被认为是代替POJO的另外一种在对象层面上表示关系型数据的途径.
        </p>
<p>
            Hibernate支持采用dom4j作为操作XML树的API。你可以写一些查询从数据库中检索出
            dom4j树，随后你对这颗树做的任何修改都将自动同步回数据库。你甚至可以用dom4j解析
            一篇XML文档，然后使用Hibernate的任一基本操作将它写入数据库：
            <code class="literal">persist(), saveOrUpdate(), merge(), delete(), replicate()</code> 
            (合并操作merge()目前还不支持)。
        </p>
<p>
            这一特性可以应用在很多场合，包括数据导入导出，通过JMS或SOAP具体化实体数据以及
            基于XSLT的报表。
        </p>
<p>
            一个单一的映射就可以将类的属性和XML文档的节点同时映射到数据库。如果不需要映射类，
            它也可以用来只映射XML文档。
        </p>
<div class="sect2" lang="zh-cn">
<div class="titlepage"><div><div><h3 class="title">
<a name="xml-intro-mapping"></a>18.1.1.&#160;指定同时映射XML和类</h3></div></div></div>
<p>
                这是一个同时映射POJO和XML的例子：
            </p>
<pre class="programlisting">&lt;class name="Account" 
        table="ACCOUNTS" 
        node="account"&gt;
        
    &lt;id name="accountId" 
            column="ACCOUNT_ID" 
            node="@id"/&gt;
            
    &lt;many-to-one name="customer" 
            column="CUSTOMER_ID" 
            node="customer/@id" 
            embed-xml="false"/&gt;
            
    &lt;property name="balance" 
            column="BALANCE" 
            node="balance"/&gt;
            
    ...
    
&lt;/class&gt;</pre>
</div>
<div class="sect2" lang="zh-cn">
<div class="titlepage"><div><div><h3 class="title">
<a name="xml-onlyxml"></a>18.1.2.&#160;只定义XML映射</h3></div></div></div>
<p>
                这是一个不映射POJO的例子：
            </p>
<pre class="programlisting">&lt;class entity-name="Account" 
        table="ACCOUNTS" 
        node="account"&gt;
        
    &lt;id name="id" 
            column="ACCOUNT_ID" 
            node="@id" 
            type="string"/&gt;
            
    &lt;many-to-one name="customerId" 
            column="CUSTOMER_ID" 
            node="customer/@id" 
            embed-xml="false" 
            entity-name="Customer"/&gt;
            
    &lt;property name="balance" 
            column="BALANCE" 
            node="balance" 
            type="big_decimal"/&gt;
            
    ...
    
&lt;/class&gt;</pre>
<p>
                这个映射使得你既可以把数据作为一棵dom4j树那样访问，又可以作为由属性键值对(java <code class="literal">Map</code>s)
                组成的图那样访问。属性名字纯粹是逻辑上的结构，你可以在HQL查询中引用它。
            </p>
</div>
</div>
</div></body>
</html>
